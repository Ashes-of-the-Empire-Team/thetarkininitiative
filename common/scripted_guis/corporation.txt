scripted_gui = {
	after_intel_agency_button = {	
		context_type = player_context
		window_name = "Market_top_bar_button"
		parent_window_token = top_bar
		effects = {
			market_opener_button_click = {
				if = {
					limit = {
						check_variable = { open_market_click = 2}
					}
					set_variable = { open_market_click = 1 }
				}
				else = {
					set_variable = { open_market_click = 2}
					set_country_flag = open_buy_market
					if = {
						limit = {
							NOT = {
								has_country_flag = open_market_ground_forces
								has_country_flag = starfighters_buying_market_open
								has_country_flag = open_market_ships
								has_country_flag = open_market_droids
								has_country_flag = open_market_mercs
								has_country_flag = open_market_medical
								has_country_flag = open_market_entertainment
								has_country_flag = open_market_resource_extraction
								has_country_flag = open_market_raw_goods
							}
						}
						set_country_flag = open_first_tab_lazy
						set_country_flag = open_market_ground_forces
					}
				}
			}	
		}
		properties = {
			market_opener_button = {
				frame = open_market_click
			}
		}
	}
	corporation_sell_market = {
		context_type = player_context
		window_name = "corporation_sell_market"
		visible = {
			has_country_flag = corp_sell
		}
		effects = {
			fighter_add_click = {
				add_to_array = { fighter_product_array = 0 }
			}
		}
		triggers = {
		}

		properties = {
			contract_nation = {
				image = "[?v.GetFlag]" 
				}
			item_button = {
				image = "[GetFighterProduct]" 
				}
			}
		dynamic_lists = {
			contract_grid = {
				array = current_contracts_tag
				entry_container = contract_item
				change_scope = yes
			}
		}
	}
	corp_product_market = {
		context_type = player_context
		window_name = "corp_product_market"
		visible = {
			has_country_flag = corp_product
		}
		effects = {
			efficiency_red_button_1_click = {

			}
			fighter_category_click = {
				set_country_flag = fighter_select_category
				clr_country_flag = droid_select_category
				clr_country_flag = ship_select_category
				clr_country_flag = vehicle_select_category
				add_to_array = { product_dev_array = token:tie_fighter_airframe_0 }
			}
			ship_category_click = {
				set_country_flag = ship_select_category
				clr_country_flag = droid_select_category
				clr_country_flag = fighter_select_category
				clr_country_flag = vehicle_select_category
			}
			vehicle_category_click = {
				set_country_flag = vehicle_select_category
				clr_country_flag = droid_select_category
				clr_country_flag = ship_select_category
				clr_country_flag = fighter_select_category
			}
			droid_category_click = {
				set_country_flag = droid_select_category
				clr_country_flag = vehicle_select_category
				clr_country_flag = ship_select_category
				clr_country_flag = fighter_select_category
			}
			product_item_select_click = {
				set_variable = { selected_item = ROOT }
			}
			research_button_click = {
				if = {
					limit = {
						has_country_flag = tie_fighter_selected
					}
					set_country_flag = {
						flag = tie_fighter_development
						days = 180
					}
					set_country_flag = tie_fighter_researched
				}
				if = {
					limit = {
						has_country_flag = tie_bomber_selected
					}
					set_country_flag = {
						flag = tie_bomber
						days = 180
					}
					set_country_flag = tie_bomber_researched
				}
			}
			flagship_button_click = {
				for_each_loop = {
					array = global.imperial_fighters_tag_array
					value = v
						if = {
							 limit = { tag = var:v }
						  remove_from_array = {
							array = Global.imperial_fighters_tag_array
							index = i
						}
						remove_from_array = {
							array = Global.imperial_fighters_array
							index = i
						}
						remove_from_array = {
							array = Global.imperial_fighters_price_per_unit_array
							index = i
						}
					}
				}
				if = {
					limit = {
						has_country_flag = tie_fighter_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 0 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_bomber_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 1 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_advanced_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 2 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_advanced_defender_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 3 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_defender_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 4 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_defender_gunner_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 5 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_heavy_bomber_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 6 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_interceptor_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 7 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_interceptor_2_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 8 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_punisher_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 9 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_specter_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 10 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_tiespecter_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 11 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_vanguard_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 12 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
			}
			higher_button_product_click = {
				add_to_variable = { product_set_markup = 0.1 }
				set_variable = { actual_price = base_price }
				set_variable = { product_markup = product_set_markup }
				add_to_variable = { product_markup = 1 }
				multiply_variable = { actual_price = product_markup }
			}
			lower_button_product_click = {
				subtract_from_variable = { product_set_markup = 0.1 }
				set_variable = { actual_price = base_price }
				set_variable = { product_markup = product_set_markup }
				add_to_variable = { product_markup = 1 }
				multiply_variable = { actual_price = product_markup }
			}
		}
		triggers = {
			price_visible = {
				has_country_flag = not_developed
			}
			markup_visible = {
				NOT = {
					has_country_flag = not_developed
				}
			}
			lower_button_product_click_enabled = {
				check_variable = { actual_price > 1 }
			}
			efficiency_red_button_1_click_enabled = {
				check_variable = { efficiency_item > 0 }
			}
			efficiency_red_button_2_click_enabled = {
				check_variable = { efficiency_item > 1 }
			}
			efficiency_red_button_3_click_enabled = {
				check_variable = { efficiency_item > 2 }
			}
			efficiency_red_button_4_click_enabled = {
				check_variable = { efficiency_item > 3 }
			}
			efficiency_red_button_5_click_enabled = {
				check_variable = { efficiency_item > 4 }
			}
			quality_red_button_1_click_enabled = {
				check_variable = { quality_item > 0 }
			}
			quality_red_button_2_click_enabled = {
				check_variable = { quality_item > 1 }
			}
			quality_red_button_3_click_enabled = {
				check_variable = { quality_item > 2 }
			}
			quality_red_button_4_click_enabled = {
				check_variable = { quality_item > 3 }
			}
			quality_red_button_5_click_enabled = {
				check_variable = { quality_item > 4 }
			}
			fighter_category_click_enabled = {
				NOT = {
					has_country_flag = fighter_select_category
				}
			}
			ship_category_click_enabled = {
				NOT = {
					has_country_flag = ship_select_category
				}
			}
			vehicle_category_click_enabled = {
				NOT = {
					has_country_flag = vehicle_select_category
				}
			}
			droid_category_click_enabled = {
				NOT = {
					has_country_flag = droid_select_category
				}
			}
		}
		#dynamic_lists = {
		#	product_dev_grid = {
		#		array = product_dev_array
		#		entry_container = product_item_entry
		#		change_scope = yes
		#	}
		#}
		properties = {
			product_selected_imperial = {
				image = "[Getimperialfighter]" 
				}
			}
	}
	imperial_fighters = {
		context_type = player_context
		window_name = "imperial_fighters"
		parent_window_name = "corp_product_market"
		visible = {
			has_country_flag = fighter_select_category
		}
		effects = {
			tie_fighter_click = {
				set_variable = { base_price = 5 }
				set_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_bomber_click = {
				set_variable = { base_price = 7 }
				clr_country_flag = tie_fighter_selected
				set_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_advanced_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				set_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_advanced_defender_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				set_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_defender_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				set_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_defender_gunner_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				set_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_heavy_bomber_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				set_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_interceptor_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				set_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_interceptor_2_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				set_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_punisher_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				set_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_specter_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				set_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_tiespecter_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				set_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_vanguard_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				set_country_flag = tie_vanguard_selected
			}
		}
		triggers = {
			tie_fighter_click_enabled = {
				NOT = {
					has_country_flag = tie_fighter_selected
				}
			}
			tie_bomber_click_enabled = {
				NOT = {
					has_country_flag = tie_bomber_selected
				}
			}
			tie_advanced_click_enabled = {
				NOT = {
					has_country_flag = tie_advanced_selected
				}
			}
			tie_advanced_defender_click_enabled = {
				NOT = {
					has_country_flag = tie_advanced_defender_selected
				}
			}
			tie_defender_click_enabled = {
				NOT = {
					has_country_flag = tie_defender_selected
				}
			}
			tie_defender_gunner_click_enabled = {
				NOT = {
					has_country_flag = tie_defender_gunner_selected
				}
			}
			tie_heavy_bomber_click_enabled = {
				NOT = {
					has_country_flag = tie_heavy_bomber_selected
				}
			}
			tie_interceptor_click_enabled = {
				NOT = {
					has_country_flag = tie_interceptor_selected
				}
			}
			tie_interceptor_2_click_enabled = {
				NOT = {
					has_country_flag = tie_interceptor_2_selected
				}
			}
			tie_punisher_click_enabled = {
				NOT = {
					has_country_flag = tie_punisher_selected
				}
			}
			tie_specter_click_enabled = {
				NOT = {
					has_country_flag = tie_specter_selected
				}
			}
			tie_tiespecter_click_enabled = {
				NOT = {
					has_country_flag = tie_tiespecter_selected
				}
			}
			tie_vanguard_click_enabled = {
				NOT = {
					has_country_flag = tie_vanguard_selected
				}
			}
		}
	}
	Marketplace_production_ships = {
		context_type = player_context
		window_name = "Marketplace_production_ships"
		visible = {
           has_country_flag = market_ships_open
		}
		effects = {
			light_ship_button_click = {
				set_variable = { Root.light_selected_ship_production_cost = light_ship_production_array^i }
				set_variable = { Root.light_selected_ship_to_be_reduced = light_ship_production_array^i }
				recalculate_light_ship_creation_time = yes
			}
			medium_ship_button_click = {
				set_variable = { Root.medium_selected_ship_production_cost = medium_ship_production_array^i }
				set_variable = { Root.medium_selected_ship_to_be_reduced = medium_ship_production_array^i }
				recalculate_medium_ship_creation_time = yes
			}
			heavy_ship_button_click = {
				set_variable = { Root.heavy_selected_ship_production_cost = heavy_ship_production_array^i }
				set_variable = { Root.heavy_selected_ship_to_be_reduced = heavy_ship_production_array^i }
				recalculate_heavy_ship_creation_time = yes
			}
			selected_light_ship_click = {
				if = {
					limit = {
						has_country_flag = light_ship_selection_open
					}
					clr_country_flag = light_ship_selection_open
				}else = {
					set_country_flag = light_ship_selection_open
				}
			}
			selected_medium_ship_click = {
				if = {
					limit = {
						has_country_flag = medium_ship_selection_open
					}
					clr_country_flag = medium_ship_selection_open
				}else = {
					set_country_flag = medium_ship_selection_open
				}
			}
			selected_heavy_ship_click = {
				if = {
					limit = {
						has_country_flag = heavy_ship_selection_open
					}
					clr_country_flag = heavy_ship_selection_open
				}else = {
					set_country_flag = heavy_ship_selection_open
				}
			}
			light_workers_add_button_click = {
				add_to_variable = {light_ship_workers = 1000}
				recalculate_light_ship_creation_time = yes
			}
			medium_workers_add_button_click = {
				add_to_variable = {medium_ship_workers = 1000}
				recalculate_medium_ship_creation_time = yes
			}
			heavy_workers_add_button_click = {
				add_to_variable = {heavy_ship_workers = 1000}
				recalculate_heavy_ship_creation_time = yes
			}
			light_workers_subtract_button_click = {
				subtract_from_variable = {light_ship_workers = 1000}
				recalculate_light_ship_creation_time = yes
			}
			medium_workers_subtract_button_click = {
				subtract_from_variable = {medium_ship_workers = 1000}
				recalculate_medium_ship_creation_time = yes
			}
			heavy_workers_subtract_button_click = {
				subtract_from_variable = {heavy_ship_workers = 1000}
				recalculate_heavy_ship_creation_time = yes
			}
			light_dockyards_add_button_click = {
				add_to_variable = {light_dockyards = 1}
				subtract_from_variable = {total_dockyards = 1}
				add_to_variable = {max_light_workers = 1000}
			}
			medium_dockyards_add_button_click = {
				add_to_variable = {medium_dockyards = 1}
				subtract_from_variable = {total_dockyards = 1}
				add_to_variable = {max_medium_workers = 1000}
			}
			heavy_dockyards_add_button_click = {
				add_to_variable = {heavy_dockyards = 1}
				subtract_from_variable = {total_dockyards = 1}
				add_to_variable = {max_heavy_workers = 1000}
			}
			light_dockyards_subtract_button_click = {
				subtract_from_variable = {light_dockyards = 1}
				add_to_variable = {total_dockyards = 1}
				subtract_from_variable = {max_light_workers = 1000}
				if = {
					limit = {
						check_variable = {light_ship_workers > max_light_workers}
					}
					subtract_from_variable = {light_ship_workers = 1000}
					recalculate_light_ship_creation_time = yes
				}
			}
			medium_dockyards_subtract_button_click = {
				subtract_from_variable = {medium_dockyards = 1}
				add_to_variable = {total_dockyards = 1}
				subtract_from_variable = {max_medium_workers = 1000}
				if = {
					limit = {
						check_variable = {medium_ship_workers > max_medium_workers}
					}
					subtract_from_variable = {medium_ship_workers = 1000}
					recalculate_medium_ship_creation_time = yes
				}
			}
			heavy_dockyards_subtract_button_click = {
				subtract_from_variable = {heavy_dockyards = 1}
				add_to_variable = {total_dockyards = 1}
				subtract_from_variable = {max_heavy_workers = 1000}
				if = {
					limit = {
						check_variable = {heavy_ship_workers > max_heavy_workers}
					}
					subtract_from_variable = {heavy_ship_workers = 1000}
					recalculate_heavy_ship_creation_time = yes
				}
			}
		}
		triggers ={
			selected_light_ship_click_enabled = {
				check_variable = {light_ship_workers > 999}
			}
			selected_medium_ship_click_enabled = {
				check_variable = {medium_ship_workers > 999}
			}
			selected_heavy_ship_click_enabled = {
				check_variable = {heavy_ship_workers > 999}
			}
			light_workers_add_button_click_enabled = {
				has_manpower > 999
				check_variable = {max_light_workers > light_ship_workers}
			}
			light_workers_subtract_button_click_enabled = {
				check_variable = {light_ship_workers > 999}
			}
			medium_workers_add_button_click_enabled = {
				has_manpower > 999
				check_variable = {max_medium_workers > medium_ship_workers}
			}
			medium_workers_subtract_button_click_enabled = {
				check_variable = {medium_ship_workers > 999}
			}
			heavy_workers_add_button_click_enabled = {
				has_manpower > 999
				check_variable = {max_heavy_workers > heavy_ship_workers}
			}
			heavy_workers_subtract_button_click_enabled = {
				check_variable = {heavy_ship_workers > 999}
			}
			light_dockyards_add_button_click_enabled = {
				check_variable = {total_dockyards > 0}
			}
			medium_dockyards_add_button_click_enabled = {
				check_variable = {total_dockyards > 0}
			}
			heavy_dockyards_add_button_click_enabled = {
				check_variable = {total_dockyards > 0}
			}
			light_dockyards_subtract_button_click_enabled = {
				check_variable = {light_dockyards > 0}
			}
			medium_dockyards_subtract_button_click_enabled = {
				check_variable = {medium_dockyards > 0}
			}
			heavy_dockyards_subtract_button_click_enabled = {
				check_variable = {heavy_dockyards > 0}
			}
			light_ship_create_button_click_enabled = {
				check_variable = {light_ship_workers > 0}
				has_country_flag = light_ship_in_production
			}
			medium_ship_create_button_click_enabled = {
				check_variable = {medium_ship_workers > 0}
			}
			heavy_ship_create_button_click_enabled = {
				check_variable = {heavy_ship_workers > 0}
			}
			light_ship_button_visible = {
				has_country_flag = light_ship_selection_open
			}
			light_entry_background_visible = {
				has_country_flag = light_ship_selection_open
			}
			light_ship_name_visible = {
				has_country_flag = light_ship_selection_open
			}
			medium_ship_button_visible = {
				has_country_flag = medium_ship_selection_open
			}
			medium_entry_background_visible = {
				has_country_flag = medium_ship_selection_open
			}
			medium_ship_name_visible = {
				has_country_flag = medium_ship_selection_open
			}
			heavy_ship_button_visible = {
				has_country_flag = heavy_ship_selection_open
			}
			heavy_entry_background_visible = {
				has_country_flag = heavy_ship_selection_open
			}
			heavy_ship_name_visible = {
				has_country_flag = heavy_ship_selection_open
			}
		}
		properties = {
			selected_light_ship = {image = "[get_light_ship_selected_photo]"}
			selected_medium_ship = {image = "[get_medium_ship_selected_photo]"}
			selected_heavy_ship = {image = "[get_heavy_ship_selected_photo]"}
			light_ship_button = { image = "[get_light_ship_photo]" }
			medium_ship_button = { image = "[get_medium_ship_photo]" }
			heavy_ship_button = { image = "[get_heavy_ship_photo]" }
			light_shipyard = { image = "[get_light_shipyard]" }
			medium_shipyard = { image = "[get_medium_shipyard]" }
			large_shipyard = { image = "[get_heavy_shipyard]" }
		}
		dynamic_lists = {
			light_ship_gridbox = {
				array = light_ship_production_array
				entry_container = light_ship_entry_box
			}
			medium_ship_gridbox = {
				array = medium_ship_production_array
				entry_container = medium_ship_entry_box
			} 
			heavy_ship_gridbox = {
				array = heavy_ship_production_array
				entry_container = heavy_ship_entry_box
			}
		}
	}
	Marketplace_production_starfighter = {
		context_type = player_context
		window_name = "Marketplace_production_air"
		visible = {
           has_country_flag = market_starfighters_open
		}
		effects = {
			air_1_button_click = {
				set_variable = { Root.air_1_production_selected_fighter = air_production_array^i }
				recalculate_air_1_creation_amount = yes
			}
			air_2_button_click = {
				set_variable = { Root.air_2_production_selected_fighter = air_production_array^i }
				recalculate_air_2_creation_amount = yes
			}
			selected_air_1_click = {
				if = {
					limit = {
						has_country_flag = air_1_selection_open
					}
					clr_country_flag = air_1_selection_open
				}else = {
					set_country_flag = air_1_selection_open
				}
			}
			selected_air_2_click = {
				if = {
					limit = {
						has_country_flag = air_2_selection_open
					}
					clr_country_flag = air_2_selection_open
				}else = {
					set_country_flag = air_2_selection_open
				}
			}
			air_1_add_button_click = {
				add_to_variable = {air_1_workers = 1000}
				recalculate_air_1_creation_amount = yes
			}
			air_2_add_button_click = {
				add_to_variable = {air_2_workers = 1000}
				recalculate_air_2_creation_amount = yes
			}
			air_1_subtract_button_click = {
				subtract_from_variable = {air_1_workers = 1000}
				recalculate_air_1_creation_amount = yes
			}
			air_2_subtract_button_click = {
				subtract_from_variable = {air_2_workers = 1000}
				recalculate_air_2_creation_amount = yes
			}
			air_1_factory_add_button_click = {
				add_to_variable = {air_1_factory = 1}
				subtract_from_variable = {total_dockyards = 1}
				add_to_variable = {max_air_1_workers = 1000}
			}
			air_2_factory_add_button_click = {
				add_to_variable = {air_2_factory = 1}
				subtract_from_variable = {total_dockyards = 1}
				add_to_variable = {max_air_2_workers = 1000}
			}
			air_1_factory_subtract_button_click = {
				subtract_from_variable = {air_1_factory = 1}
				add_to_variable = {total_dockyards = 1}
				subtract_from_variable = {max_air_1_workers = 1000}
				if = {
					limit = {
						check_variable = {air_1_workers > max_air_1}
					}
					subtract_from_variable = {air_1_workers = 1000}
					recalculate_air_1_creation_amount = yes
				}
			}
			air_2_factory_subtract_button_click = {
				subtract_from_variable = {air_2_factory = 1}
				add_to_variable = {total_dockyards = 1}
				subtract_from_variable = {max_air_2_workers = 1000}
				if = {
					limit = {
						check_variable = {air_2_workers > max_air_2_workers}
					}
					subtract_from_variable = {air_2_workers = 1000}
					recalculate_air_2_creation_amount = yes
				}
			}
		}
		triggers ={
			selected_air_1_click_enabled = {
				check_variable = {air_1_workers > 999}
			}
			selected_air_2_click_enabled = {
				check_variable = {air_2_workers > 999}
			}
			air_1_add_button_click_enabled = {
				has_manpower > 999
				check_variable = {max_air_1_workers > air_1_workers}
			}
			air_1_subtract_button_click_enabled = {
				check_variable = {air_1_workers > 999}
			}
			air_2_add_button_click_enabled = {
				has_manpower > 999
				check_variable = {max_air_2_workers > air_2_workers}
			}
			air_2_subtract_button_click_enabled = {
				check_variable = {air_2_workers > 999}
			}
			air_1_factory_add_button_click_enabled = {
				check_variable = {total_dockyards > 0}
			}
			air_2_factory_add_button_click_enabled = {
				check_variable = {total_dockyards > 0}
			}
			air_1_factory_subtract_button_click_enabled = {
				check_variable = {air_1_factory > 0}
			}
			air_2_factory_subtract_button_click_enabled = {
				check_variable = {air_2_factory > 0}
			}
			air_1_create_button_click_enabled = {
				check_variable = {air_1_workers > 0}
			}
			air_2_create_button_click_enabled = {
				check_variable = {air_2_workers > 0}
			}
			air_1_button_visible = {
				has_country_flag = air_1_selection_open
			}
			air_1_background_visible = {
				has_country_flag = air_1_selection_open
			}
			air_1_name_visible = {
				has_country_flag = air_1_selection_open
			}
			air_2_button_visible = {
				has_country_flag = air_2_selection_open
			}
			air_2_background_visible = {
				has_country_flag = air_2_selection_open
			}
			air_2_name_visible = {
				has_country_flag = air_2_selection_open
			}
		}
		properties = {
			selected_air_1 = {image = "[get_air_1_selected_photo]"}
			selected_air_2 = {image = "[get_air_2_selected_photo]"}
			air_1_button = { image = "[get_air_photo]" }
			air_2_button = { image = "[get_air_photo]" }
		}
		dynamic_lists = {
			air_1_gridbox = {
				array = air_production_array
				entry_container = air_1_entry_box
			}
			air_2_gridbox = {
				array = air_production_array
				entry_container = air_2_entry_box
			} 
		}
	}
	Marketplace_production_land = {
		context_type = player_context
		window_name = "Marketplace_production_land"
		visible = {
           has_country_flag = market_land_open
		}
		effects = {
			land_1_button_click = {
				set_variable = { Root.land_1_selected_item = land_production_array^i }
				recalculate_land_1_creation_amount = yes
			}
			land_2_button_click = {
				set_variable = { Root.land_2_selected_item = land_production_array^i }
				recalculate_land_2_creation_amount = yes
			}
			selected_land_1_click = {
				if = {
					limit = {
						has_country_flag = land_1_selection_open
					}
					clr_country_flag = land_1_selection_open
				}else = {
					set_country_flag = land_1_selection_open
				}
			}
			selected_land_2_click = {
				if = {
					limit = {
						has_country_flag = land_2_selection_open
					}
					clr_country_flag = land_2_selection_open
				}else = {
					set_country_flag = land_2_selection_open
				}
			}
			land_1_add_button_click = {
				add_to_variable = {land_1_workers = 1000}
				recalculate_land_1_creation_amount = yes
			}
			land_2_add_button_click = {
				add_to_variable = {land_2_workers = 1000}
				recalculate_land_2_creation_amount = yes
			}
			land_1_subtract_button_click = {
				subtract_from_variable = {land_1_workers = 1000}
				recalculate_land_1_creation_amount = yes
			}
			land_2_subtract_button_click = {
				subtract_from_variable = {land_2_workers = 1000}
				recalculate_land_2_creation_amount = yes
			}
			land_1_factory_add_button_click = {
				add_to_variable = {land_1_factory = 1}
				subtract_from_variable = {total_dockyards = 1}
				add_to_variable = {max_land_1_workers = 1000}
			}
			land_2_factory_add_button_click = {
				add_to_variable = {land_2_factory = 1}
				subtract_from_variable = {total_dockyards = 1}
				add_to_variable = {max_land_2_workers = 1000}
			}
			land_1_factory_subtract_button_click = {
				subtract_from_variable = {land_1_factory = 1}
				add_to_variable = {total_dockyards = 1}
				subtract_from_variable = {max_land_1_workers = 1000}
				if = {
					limit = {
						check_variable = {land_1_workers > max_land_1}
					}
					subtract_from_variable = {land_1_workers = 1000}
				}
			}
			land_2_factory_subtract_button_click = {
				subtract_from_variable = {land_2_factory = 1}
				add_to_variable = {total_dockyards = 1}
				subtract_from_variable = {max_land_2_workers = 1000}
				if = {
					limit = {
						check_variable = {land_2_workers > max_land_2}
					}
					subtract_from_variable = {land_2_workers = 1000}
				}
			}
		}
		triggers ={
			selected_land_1_click_enabled = {
				check_variable = {land_1_workers > 999}
			}
			selected_land_2_click_enabled = {
				check_variable = {land_2_workers > 999}
			}
			land_1_add_button_click_enabled = {
				has_manpower > 999
				check_variable = {max_land_1_workers > land_1_workers}
			}
			land_1_subtract_button_click_enabled = {
				check_variable = {land_1_workers > 999}
			}
			land_2_add_button_click_enabled = {
				has_manpower > 999
				check_variable = {max_land_2_workers > land_2_workers}
			}
			land_2_subtract_button_click_enabled = {
				check_variable = {land_2_workers > 999}
			}
			land_1_factory_add_button_click_enabled = {
				check_variable = {total_dockyards > 0}
			}
			land_2_factory_add_button_click_enabled = {
				check_variable = {total_dockyards > 0}
			}
			land_1_factory_subtract_button_click_enabled = {
				check_variable = {land_1_factory > 0}
			}
			land_2_factory_subtract_button_click_enabled = {
				check_variable = {land_2_factory > 0}
			}
			land_1_create_button_click_enabled = {
				check_variable = {land_1_workers > 0}
			}
			land_2_create_button_click_enabled = {
				check_variable = {land_2_workers > 0}
			}
			land_1_button_visible = {
				has_country_flag = land_1_selection_open
			}
			land_1_background_visible = {
				has_country_flag = land_1_selection_open
			}
			land_1_name_visible = {
				has_country_flag = land_1_selection_open
			}
			land_2_button_visible = {
				has_country_flag = land_2_selection_open
			}
			land_2_background_visible = {
				has_country_flag = land_2_selection_open
			}
			land_2_name_visible = {
				has_country_flag = land_2_selection_open
			}
		}
		properties = {
			selected_land_1 = {image = "[get_land_1_selected_photo]"}
			selected_land_2 = {image = "[get_land_2_selected_photo]"}
			land_1_button = { image = "[get_land_1_photo]" }
			land_2_button = { image = "[get_land_2_photo]" }
		}
		dynamic_lists = {
			land_1_gridbox = {
				array = land_production_array
				entry_container = land_1_entry_box
			}
			land_2_gridbox = {
				array = land_production_array
				entry_container = land_2_entry_box
			} 
		}
	}
	Marketplace_production_soft = {
		context_type = player_context
		window_name = "Marketplace_production_soft"
		visible = {
		   has_country_flag = market_soft_open
		}
		effects = {
			soft_1_button_click = {
				set_variable = { Root.soft_1_selected_item = soft_production_array^i }
				recalculate_soft_1_creation_amount = yes
			}
			soft_2_button_click = {
				set_variable = { Root.soft_2_selected_item = soft_production_array^i }
				recalculate_soft_2_creation_amount = yes
			}
			selected_soft_1_click = {
				if = {
					limit = {
						has_country_flag = soft_1_selection_open
					}
					clr_country_flag = soft_1_selection_open
				}else = {
					set_country_flag = soft_1_selection_open
				}
			}
			selected_soft_2_click = {
				if = {
					limit = {
						has_country_flag = soft_2_selection_open
					}
					clr_country_flag = soft_2_selection_open
				}else = {
					set_country_flag = soft_2_selection_open
				}
			}
			soft_1_add_button_click = {
				add_to_variable = {soft_1_workers = 1000}
				recalculate_soft_1_creation_amount = yes
			}
			soft_2_add_button_click = {
				add_to_variable = {soft_2_workers = 1000}
				recalculate_soft_2_creation_amount = yes
			}
			soft_1_subtract_button_click = {
				subtract_from_variable = {soft_1_workers = 1000}
				recalculate_soft_1_creation_amount = yes
			}
			soft_2_subtract_button_click = {
				subtract_from_variable = {soft_2_workers = 1000}
				recalculate_soft_2_creation_amount = yes
			}
			soft_1_factory_add_button_click = {
				add_to_variable = {soft_1_factory = 1}
				subtract_from_variable = {total_dockyards = 1}
				add_to_variable = {max_soft_1_workers = 1000}
			}
			soft_2_factory_add_button_click = {
				add_to_variable = {soft_2_factory = 1}
				subtract_from_variable = {total_dockyards = 1}
				add_to_variable = {max_soft_2_workers = 1000}
			}
			soft_1_factory_subtract_button_click = {
				subtract_from_variable = {soft_1_factory = 1}
				add_to_variable = {total_dockyards = 1}
				subtract_from_variable = {max_soft_1_workers = 1000}
				if = {
					limit = {
						check_variable = {soft_1_workers > max_soft_1}
					}
					subtract_from_variable = {soft_1_workers = 1000}
				}
			}
			soft_2_factory_subtract_button_click = {
				subtract_from_variable = {soft_2_factory = 1}
				add_to_variable = {total_dockyards = 1}
				subtract_from_variable = {max_soft_2_workers = 1000}
				if = {
					limit = {
						check_variable = {soft_2_workers > max_soft_2}
					}
					subtract_from_variable = {soft_2_workers = 1000}
				}
			}
		}
		triggers ={
			selected_soft_1_click_enabled = {
				check_variable = {soft_1_workers > 999}
			}
			selected_soft_2_click_enabled = {
				check_variable = {soft_2_workers > 999}
			}
			soft_1_add_button_click_enabled = {
				has_manpower > 999
				check_variable = {max_soft_1_workers > soft_1_workers}
			}
			soft_1_subtract_button_click_enabled = {
				check_variable = {soft_1_workers > 999}
			}
			soft_2_add_button_click_enabled = {
				has_manpower > 999
				check_variable = {max_soft_2_workers > soft_2_workers}
			}
			soft_2_subtract_button_click_enabled = {
				check_variable = {soft_2_workers > 999}
			}
			soft_1_factory_add_button_click_enabled = {
				check_variable = {total_dockyards > 0}
			}
			soft_2_factory_add_button_click_enabled = {
				check_variable = {total_dockyards > 0}
			}
			soft_1_factory_subtract_button_click_enabled = {
				check_variable = {soft_1_factory > 0}
			}
			soft_2_factory_subtract_button_click_enabled = {
				check_variable = {soft_2_factory > 0}
			}
			soft_1_create_button_click_enabled = {
				check_variable = {soft_1_workers > 0}
			}
			soft_2_create_button_click_enabled = {
				check_variable = {soft_2_workers > 0}
			}
			soft_1_button_visible = {
				has_country_flag = soft_1_selection_open
			}
			soft_1_background_visible = {
				has_country_flag = soft_1_selection_open
			}
			soft_1_name_visible = {
				has_country_flag = soft_1_selection_open
			}
			soft_2_button_visible = {
				has_country_flag = soft_2_selection_open
			}
			soft_2_background_visible = {
				has_country_flag = soft_2_selection_open
			}
			soft_2_name_visible = {
				has_country_flag = soft_2_selection_open
			}
		}
		properties = {
			selected_soft_1 = {image = "[get_soft_1_selected_photo]"}
			selected_soft_2 = {image = "[get_soft_2_selected_photo]"}
			soft_1_button = { image = "[get_soft_1_photo]" }
			soft_2_button = { image = "[get_soft_2_photo]" }
		}
		dynamic_lists = {
			soft_1_gridbox = {
				array = soft_production_array
				entry_container = soft_1_entry_box
			}
			soft_2_gridbox = {
				array = soft_production_array
				entry_container = soft_2_entry_box
			} 
		}
	}
}