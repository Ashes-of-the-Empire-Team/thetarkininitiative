scripted_gui = {
    Marketplace_main_selection = {
        context_type = player_context
        window_name = "Marketplace_buying_menu"
        visible = {
            check_variable = { open_market_click = 2}
        }
        effects = {
            right_click_market_click = {
                if = {
                    limit = {
                        has_country_flag = open_market_ships
                    }
                    add_to_variable = { amount_to_be_produced = 1 }
                }else_if = {
                    limit = {
                        OR = {
                            has_country_flag = a280c_selected
                            has_country_flag = dh_17_selected
                            has_country_flag = ee_4_selected
                            has_country_flag = e_11_selected
                        }
                    }
                    add_to_variable = { amount_to_be_produced = 1000 }
                }
                else = {
                    add_to_variable = { amount_to_be_produced = 100 }
                }
                clamp_variable = {
                    var = amount_to_be_produced
                    min = 0
                }
            }
            left_click_market_click = {
                if = {
                    limit = {
                        has_country_flag = open_market_ships
                    }
                    subtract_from_variable = { amount_to_be_produced = 1 }
                }else_if = {
                    limit = {
                        OR = {
                            has_country_flag = a280c_selected
                            has_country_flag = dh_17_selected
                            has_country_flag = ee_4_selected
                            has_country_flag = e_11_selected
                        }
                    }
                    subtract_from_variable = { amount_to_be_produced = 1000 }
                }
                else = {
                    subtract_from_variable = { amount_to_be_produced = 100 }
                }
                clamp_variable = {
                    var = amount_to_be_produced
                    min = 0
                }
            }
			exit_menu_click = {
                set_variable = { open_market_click = 1}
            }
            select_ground_forces_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_ground_forces
                set_variable = { manufacturing_number = 0 }
                if = {
                    limit = {
                        has_country_flag = gun_selected
                    }
                    set_variable = { amount_to_be_produced = 1000 }
                }else = {
                    set_variable = { amount_to_be_produced = 100 }
                }
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
                if = {
                    limit = {
                        NOT = {
                            has_country_flag = republic_market_open
                            has_country_flag = imperial_market_open
                            has_country_flag = neutral_market_open
                        }
                    }
                    if = {
                        limit = {
                            has_government = democratic
                        }
                        set_country_flag = republic_market_open
                    }
                    if = {
                        limit = {
                            has_government = imperial
                        }
                        set_country_flag = imperial_market_open
                    }
                }
            }
            select_starfighters_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = starfighters_buying_market_open
                set_variable = { amount_to_be_produced = 100 }
                set_variable = { manufacturing_number = 0 }
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
                if = {
                    limit = {
                        NOT = {
                            has_country_flag = republic_market_open
                            has_country_flag = imperial_market_open
                            has_country_flag = neutral_market_open
                        }
                    }
                    if = {
                        limit = {
                            has_government = democratic
                        }
                        set_country_flag = republic_market_open
                    }
                    if = {
                        limit = {
                            has_government = imperial
                        }
                        set_country_flag = imperial_market_open
                    }
                }
            }
            select_ships_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_ships
                set_variable = { amount_to_be_produced = 1 }
                set_variable = { manufacturing_number = 0 }
                if = {
                    limit = {
                        NOT = {
                            has_country_flag = republic_market_open
                            has_country_flag = imperial_market_open
                            has_country_flag = neutral_market_open
                        }
                    }
                    if = {
                        limit = {
                            has_government = democratic
                        }
                        set_country_flag = republic_market_open
                    }
                    if = {
                        limit = {
                            has_government = imperial
                        }
                        set_country_flag = imperial_market_open
                    }
                }
            }
            select_droids_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_droids
            }
            select_mercs_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_mercs
            }
            select_medical_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_medical
            }
            select_entertainment_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_entertainment
            }
            select_resource_extraction_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_resource_extraction
            }
            select_raw_goods_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_raw_goods
            }
            select_republic_button_click = {
                erase_previous_ship_menu_faction_selection = yes
                set_country_flag = republic_market_open
            }
            select_neutral_button_click = {
                erase_previous_ship_menu_faction_selection = yes
                set_country_flag = neutral_market_open
            }
            select_imperial_button_click = {
                erase_previous_ship_menu_faction_selection = yes
                set_country_flag = imperial_market_open
            }
            country_flag_overlay_click = {
                var:manufacturing_country = {
                    capital_scope = {
                        ROOT = {
                            goto_state = PREV
                        }
                    }
                }
            }
        }
        triggers = {
            right_click_market_click_enabled = {
                NOT = {
                    check_variable = { amount_to_be_produced = 5 }
                    check_variable = { amount_to_be_produced = 500 }
                    check_variable = { amount_to_be_produced = 5000 }
                }
            }
            left_click_market_click_enabled = {
                NOT = {
                    check_variable = { amount_to_be_produced = 1 }
                    check_variable = { amount_to_be_produced = 100 }
                    check_variable = { amount_to_be_produced = 1000 }
                }
            }
            top_cover_visible = {
                has_country_flag = starfighters_buying_market_open
            }
            upgrade_cover_visible = {
                NOT = {
                    has_country_flag = open_market_ships
                }
            }
            move_up_button_visible = {
                NOT = {
                    has_country_flag = open_third_tab_lazy
                }
            }
            move_down_button_visible = {
                NOT = {
                    has_country_flag = open_first_tab_lazy
                }
            }
            select_ground_forces_click_enabled = {
                NOT = {
                    has_country_flag = open_market_ground_forces
                }
            }
            select_ships_click_enabled = {
                NOT = {
                  has_country_flag = open_market_ships
                }
            }
            select_starfighters_click_enabled = {
                NOT = {
                    has_country_flag = starfighters_buying_market_open
                }
            }
            select_droids_click_enabled = {
                NOT = {
                    has_country_flag = open_market_droids
                }
            }
            select_republic_button_click_enabled = {
                NOT = {
                    has_country_flag = republic_market_open
                }
                has_government = democratic
            }
            select_neutral_button_click_enabled = {
                NOT = {
                    has_country_flag = neutral_market_open
                }
            }
            select_imperial_button_click_enabled = {
                NOT = {
                    has_country_flag = imperial_market_open
                }
                has_government = imperial
            }
        }
        properties = {
            flag_producer = {
                image = "[?manufacturing_country.GetFlag]"
            }
        }
    }
    Marketplace_buying_land_main = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_land_main"
        visible = {
            has_country_flag = open_market_ground_forces
        }
        effects = {
            order_starship_click = {
                if = {
                    limit = {
                        has_country_flag = atat_selected
                    }
                    set_country_flag = atat_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = at_at_market
                            }
                        }
                        set_technology = {
                            at_at_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = ataa_selected
                    }
                    set_country_flag = ataa_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = at_aa_market
                            }
                        }
                        set_technology = {
                            at_aa_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = atdp_selected
                    }
                    set_country_flag = atdp_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = at_dp_market
                            }
                        }
                        set_technology = {
                            at_dp_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = atst_selected
                    }
                    set_country_flag = atst_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = at_st_market
                            }
                        }
                        set_technology = {
                            at_st_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = juggernaut_selected
                    }
                    set_country_flag = juggernaut_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = juggernaut_market
                            }
                        }
                        set_technology = {
                            juggernaut_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = tie_crawler_selected
                    }
                    set_country_flag = tie_crawler_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = tie_crawler_market
                            }
                        }
                        set_technology = {
                            tie_crawler_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = tx130t_selected
                    }
                    set_country_flag = tx130t_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = tx130t_market
                            }
                        }
                        set_technology = {
                            tx130t_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = smart_rocket_selected
                    }
                    set_country_flag = smart_rocket_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = ee_4_selected
                    }
                    set_country_flag = ee_4_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = e_11_selected
                    }
                    set_country_flag = e_11_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = k79_s80_selected
                    }
                    set_country_flag = k79_s80_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = spha_selected
                    }
                    set_country_flag = spha_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = supply_equipment_merr_selected
                    }
                    set_country_flag = supply_equipment_merr_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = t3_b_selected
                    }
                    set_country_flag = t3_b_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = t3_b
                            }
                        }
                        set_technology = {
                            t3_b_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = t4_b_selected
                    }
                    set_country_flag = t4_b_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = t4_b_market
                            }
                        }
                        set_technology = {
                            t4_b_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = aac_speeder_selected
                    }
                    set_country_flag = aac_speeder_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = aac_speeder_market
                            }
                        }
                        set_technology = {
                            aac_speeder_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = t1_b_selected
                    }
                    set_country_flag = t1_b_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = t1_b_market
                            }
                        }
                        set_technology = {
                            t1_b_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = t1_c_selected
                    }
                    set_country_flag = t1_c_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = t1_c_market
                            }
                        }
                        set_technology = {
                            t1_c_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = flash_speeder_selected
                    }
                    set_country_flag = flash_speeder_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = flash_speeder_market
                            }
                        }
                        set_technology = {
                            flash_speeder_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = combat_speeder_selected
                    }
                    set_country_flag = combat_speeder_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = combat_speeder_market
                            }
                        }
                        set_technology = {
                            combat_speeder_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = a280c_selected
                    }
                    set_country_flag = a280c_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = dh_17_selected
                    }
                    set_country_flag = dh_17_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = hh_12_selected
                    }
                    set_country_flag = hh_12_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = t1_s_selected
                    }
                    set_country_flag = t1_s_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = mptl_2_selected
                    }
                    set_country_flag = mptl_2_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = supply_equipment_czerkia_selected
                    }
                    set_country_flag = supply_equipment_czerkia_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = stormtrooper_equipment_selected
                    }
                    set_country_flag = stormtrooper_equipment_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = AAT_selected
                    }
                    set_country_flag = AAT_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = AAT_market
                            }
                        }
                        set_technology = {
                            AAT_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = a_25_truck_selected
                    }
                    set_country_flag = a_25_truck_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = a_25_truck_market
                            }
                        }
                        set_technology = {
                            a_25_truck_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = x_34_landspeeder_selected
                    }
                    set_country_flag = x_34_landspeeder_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = x_34_landspeeder_market
                            }
                        }
                        set_technology = {
                            x_34_landspeeder_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = t3_b_selected
                        has_country_flag = level_1_selected
                    }
                    YUT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = t3_b_selected
                        has_country_flag = level_2_selected
                    }
                    YUT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = t4_b_selected
                        has_country_flag = level_1_selected
                    }
                    YUT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = t4_b_selected
                        has_country_flag = level_2_selected
                    }
                    YUT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = t1_b_selected
                        has_country_flag = level_1_selected
                    }
                    YUT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = t1_b_selected
                        has_country_flag = level_2_selected
                    }
                    YUT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = t1_c_selected
                        has_country_flag = level_1_selected
                    }
                    YUT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = t1_c_selected
                        has_country_flag = level_2_selected
                    }
                    YUT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = aac_speeder_selected
                        has_country_flag = level_1_selected
                    }
                    SOR = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = aac_speeder_selected
                        has_country_flag = level_2_selected
                    }
                    SOR = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = combat_speeder_selected
                        has_country_flag = level_1_selected
                    }
                    SOR = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = combat_speeder_selected
                        has_country_flag = level_2_selected
                    }
                    SOR = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = flash_speeder_selected
                        has_country_flag = level_1_selected
                    }
                    SOR = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = flash_speeder_selected
                        has_country_flag = level_2_selected
                    }
                    SOR = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = a280c_selected
                        has_country_flag = level_1_selected
                    }
                    BLS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = a280c_selected
                        has_country_flag = level_2_selected
                    }
                    BLS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = a280c_selected
                        has_country_flag = level_3_selected
                    }
                    BLS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = a280c_selected
                        has_country_flag = level_4_selected
                    }
                    BLS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = dh_17_selected
                        has_country_flag = level_1_selected
                    }
                    CZE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = dh_17_selected
                        has_country_flag = level_2_selected
                    }
                    CZE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = dh_17_selected
                        has_country_flag = level_3_selected
                    }
                    CZE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = hh_12_selected
                        has_country_flag = level_1_selected
                    }
                    MER = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = hh_12_selected
                        has_country_flag = level_2_selected
                    }
                    MER = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = hh_12_selected
                        has_country_flag = level_3_selected
                    }
                    MER = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = t1_s_selected
                        has_country_flag = level_1_selected
                    }
                    SOR = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mptl_2_selected
                        has_country_flag = level_1_selected
                    }
                    UBK = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mptl_2_selected
                        has_country_flag = level_2_selected
                    }
                    UBK = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mptl_2_selected
                        has_country_flag = level_3_selected
                    }
                    UBK = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = supply_equipment_czerkia_selected
                        has_country_flag = level_1_selected
                    }
                    CZE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = atat_selected
                        has_country_flag = level_1_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = atat_selected
                        has_country_flag = level_2_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = ataa_selected
                        has_country_flag = level_1_selected
                    }
                    ROT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = ataa_selected
                        has_country_flag = level_2_selected
                    }
                    ROT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = juggernaut_selected
                        has_country_flag = level_1_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = juggernaut_selected
                        has_country_flag = level_2_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = atst_selected
                        has_country_flag = level_1_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = atst_selected
                        has_country_flag = level_2_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tx130t_selected
                        has_country_flag = level_1_selected
                    }
                    ROT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tx130t_selected
                        has_country_flag = level_2_selected
                    }
                    ROT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = atdp_selected
                        has_country_flag = level_1_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = atdp_selected
                        has_country_flag = level_2_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_crawler_selected
                        has_country_flag = level_1_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_crawler_selected
                        has_country_flag = level_2_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
            #
                if = {
                    limit = {
                        has_country_flag = e_11_selected
                        has_country_flag = level_1_selected
                    }
                    BLS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = e_11_selected
                        has_country_flag = level_2_selected
                    }
                    BLS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = e_11_selected
                        has_country_flag = level_3_selected
                    }
                    BLS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = e_11_selected
                        has_country_flag = level_4_selected
                    }
                    BLS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = ee_4_selected
                        has_country_flag = level_1_selected
                    }
                    CZE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = ee_4_selected
                        has_country_flag = level_2_selected
                    }
                    CZE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = ee_4_selected
                        has_country_flag = level_3_selected
                    }
                    CZE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = smart_rocket_selected
                        has_country_flag = level_1_selected
                    }
                    MER = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = smart_rocket_selected
                        has_country_flag = level_2_selected
                    }
                    MER = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = smart_rocket_selected
                        has_country_flag = level_3_selected
                    }
                    MER = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = k79_s80_selected
                        has_country_flag = level_1_selected
                    }
                    BLS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = spha_selected
                        has_country_flag = level_1_selected
                    }
                    ROT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = spha_selected
                        has_country_flag = level_2_selected
                    }
                    ROT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = spha_selected
                        has_country_flag = level_3_selected
                    }
                    ROT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = supply_equipment_merr_selected
                        has_country_flag = level_1_selected
                    }
                    MER = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = stormtrooper_equipment_selected
                        has_country_flag = level_1_selected
                    }
                    ROT = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = soft_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {soft_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = soft_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = soft_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 1000}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = AAT_selected
                        has_country_flag = level_1_selected
                    }
                    UBK = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = AAT_selected
                        has_country_flag = level_2_selected
                    }
                    UBK = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = a_a5_speeder_truck_selected
                        has_country_flag = level_1_selected
                    }
                    TAG = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = a_a5_speeder_truck_selected
                        has_country_flag = level_2_selected
                    }
                    TAG = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = x_34_landspeeder_selected
                        has_country_flag = level_1_selected
                    }
                    TAG = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = x_34_landspeeder_selected
                        has_country_flag = level_2_selected
                    }
                    TAG = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = tank_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {tank_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = tank_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = tank_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
            }
            gun_button_click = {
                set_country_flag = gun_selected
                clr_country_flag = tank_selected
                clr_country_flag = ataa_selected
                clr_country_flag = atdp_selected
                clr_country_flag = atst_selected
                clr_country_flag = juggernaut_selected
                clr_country_flag = tie_crawler_selected
                clr_country_flag = tx130t_selected
                clr_country_flag = atat_selected

                clr_country_flag = t3_b_selected
                clr_country_flag = t4_b_selected
                clr_country_flag = t1_b_selected
                clr_country_flag = t1_c_selected
                clr_country_flag = aac_speeder_selected
                clr_country_flag = combat_speeder_selected
                clr_country_flag = flash_speeder_selected
                set_variable = {amount_to_be_produced = 100}
                set_variable = { manufacturing_number = 0 }
            }
            tank_button_click = {
                set_country_flag = tank_selected
                clr_country_flag = gun_selected
                clr_country_flag = smart_rocket_selected
                clr_country_flag = ee_4_selected
                clr_country_flag = e_11_selected
                clr_country_flag = k79_s80_selected
                clr_country_flag = spha_selected
                clr_country_flag = supply_equipment_merr_selected
                clr_country_flag = stormtrooper_equipment_selected

                clr_country_flag = hh_12_selected
                clr_country_flag = mptl_2_selected
                clr_country_flag = a280c_selected
                clr_country_flag = dh_17_selected
                clr_country_flag = t1_s_selected
                clr_country_flag = supply_equipment_czerkia_selected
                set_variable = {amount_to_be_produced = 100}
                set_variable = { manufacturing_number = 0 }
            }
            level_1_click = {
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
                
                if = {
                    limit = {
                        has_country_flag = atat_selected
                    }
                    set_variable = { manufacturing_number = 14 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = ataa_selected
                    }
                    set_variable = { manufacturing_number = 16 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = juggernaut_selected
                    }
                    set_variable = { manufacturing_number = 18 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = atst_selected
                    }
                    set_variable = { manufacturing_number = 20 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tx130t_selected
                    }
                    set_variable = { manufacturing_number = 22 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = atdp_selected
                    }
                    set_variable = { manufacturing_number = 24 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_crawler_selected
                    }
                    set_variable = { manufacturing_number = 26 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = ee_4_selected
                    }
                    set_variable = { manufacturing_number = 0 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = e_11_selected
                    }
                    set_variable = { manufacturing_number = 4 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = spha_selected
                    }
                    set_variable = { manufacturing_number = 11 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = smart_rocket_selected
                    }
                    set_variable = { manufacturing_number = 7 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = a280c_selected
                    }
                    set_variable = { manufacturing_number = 15 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = dh_17_selected
                    }
                    set_variable = { manufacturing_number = 19 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = hh_12_selected
                    }
                    set_variable = { manufacturing_number = 22 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = mptl_2_selected
                    }
                    set_variable = { manufacturing_number = 26 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = aat_selected
                    }
                    set_variable = { manufacturing_number = 28 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = a_25_truck_selected
                    }
                    set_variable = { manufacturing_number = 30 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = x_34_landspeeder_selected
                    }
                    set_variable = { manufacturing_number = 32 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
            }
            level_2_click = {
                set_country_flag = level_2_selected
                clr_country_flag = level_1_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected

                if = {
                    limit = {
                        has_country_flag = atat_selected
                    }
                    set_variable = { manufacturing_number = 15 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = ataa_selected
                    }
                    set_variable = { manufacturing_number = 17 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = juggernaut_selected
                    }
                    set_variable = { manufacturing_number = 19 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = atst_selected
                    }
                    set_variable = { manufacturing_number = 21 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tx130t_selected
                    }
                    set_variable = { manufacturing_number = 23 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = atdp_selected
                    }
                    set_variable = { manufacturing_number = 25 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_crawler_selected
                    }
                    set_variable = { manufacturing_number = 27 }
					set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = ee_4_selected
                    }
                    set_variable = { manufacturing_number = 5 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = e_11_selected
                    }
                    set_variable = { manufacturing_number = 1 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = spha_selected
                    }
                    set_variable = { manufacturing_number = 12 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = smart_rocket_selected
                    }
                    set_variable = { manufacturing_number = 8 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
                if = {
                    limit = {
                        has_country_flag = a280c_selected
                    }
                    set_variable = { manufacturing_number = 16 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
                if = {
                    limit = {
                        has_country_flag = dh_17_selected
                    }
                    set_variable = { manufacturing_number = 20 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
                if = {
                    limit = {
                        has_country_flag = hh_12_selected
                    }
                    set_variable = { manufacturing_number = 23 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
                if = {
                    limit = {
                        has_country_flag = mptl_2_selected
                    }
                    set_variable = { manufacturing_number = 27 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = aat_selected
                    }
                    set_variable = { manufacturing_number = 29 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = a_25_truck_selected
                    }
                    set_variable = { manufacturing_number = 31 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = x_34_landspeeder_selected
                    }
                    set_variable = { manufacturing_number = 33 }
					set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
            }
            level_3_click = {
                set_country_flag = level_3_selected
                clr_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_4_selected

                if = {
                    limit = {
                        has_country_flag = a280c_selected
                    }
                    set_variable = { manufacturing_number = 17 }
                    set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
                if = {
                    limit = {
                        has_country_flag = dh_17_selected
                    }
                    set_variable = { manufacturing_number = 21 }
                    set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
                if = {
                    limit = {
                        has_country_flag = hh_12_selected
                    }
                    set_variable = { manufacturing_number = 24 }
                    set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
                if = {
                    limit = {
                        has_country_flag = mptl_2_selected
                    }
                    set_variable = { manufacturing_number = 28 }
				    set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
                if = {
                    limit = {
                        has_country_flag = ee_4_selected
                    }
                    set_variable = { manufacturing_number = 6 }
                    set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = e_11_selected
                    }
                    set_variable = { manufacturing_number = 2 }
                    set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = spha_selected
                    }
                    set_variable = { manufacturing_number = 13 }
                    set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = smart_rocket_selected
                    }
                    set_variable = { manufacturing_number = 9 }
                    set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
            }
            level_4_click = {
                set_country_flag = level_4_selected
                clr_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected

                if = {
                    limit = {
                        has_country_flag = a280c_selected
                    }
                    set_variable = { manufacturing_number = 18 }
				    set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
                if = {
                    limit = {
                        has_country_flag = e_11_selected
                    }
                    set_variable = { manufacturing_number = 3 }
                    set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                }
            }
        }
        triggers = {
            gun_button_click_enabled = {
                NOT = {
                    has_country_flag = gun_selected
                }
            }
            tank_button_click_enabled = {
                NOT = {
                    has_country_flag = tank_selected
                }
            }
            level_1_click_enabled = {
                NOT = {
                    has_country_flag = level_1_selected
                }
            }
            level_2_click_enabled = {
                NOT = {
                    has_country_flag = level_2_selected
                }
            }
            level_3_click_enabled = {
                NOT = {
                    has_country_flag = level_3_selected
                }
            }
            level_4_click_enabled = {
                NOT = {
                    has_country_flag = level_4_selected
                }
            }
            level_2_visible = {
                OR = {
                    has_country_flag = ee_4_selected
                    has_country_flag = e_11_selected
                    has_country_flag = smart_rocket_selected
                    has_country_flag = spha_selected  
                    has_country_flag = tank_selected
                    has_country_flag = a280c_selected
                    has_country_flag = mptl_2_selected 
                    has_country_flag = hh_12_selected
                    has_country_flag = dh_17_selected
                }
            }
            level_3_visible = { 
                OR = {
                    has_country_flag = ee_4_selected
                    has_country_flag = smart_rocket_selected
                    has_country_flag = e_11_selected
                    has_country_flag = spha_selected 
                    has_country_flag = a280c_selected
                    has_country_flag = mptl_2_selected 
                    has_country_flag = hh_12_selected
                    has_country_flag = dh_17_selected
                }
            }
            level_4_visible = {
                OR = {
                    has_country_flag = e_11_selected
                    has_country_flag = a280c_selected
                }
            }
            order_starship_click_enabled = {
                if = {
                    limit = {
                        OR = {
                            has_country_flag = e_11_selected
                            has_country_flag = a280c_selected
                        }
                    }
                    NOT = {
                        OR = {
                            has_country_flag = e_11_order_in_progress
                            has_country_flag = a280c_order_in_progress
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        BLS = {
                            has_tech = infantry_weapons1
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_selected
                        }
                        BLS = {
                            has_tech = advanced_infantry_weapons
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_4_selected
                        }
                        BLS = {
                            has_tech = advanced_infantry_weapons
                        }
                    }
                }else_if = {
                    limit = {
                        OR = {
                            has_country_flag = ee_4_selected
                            has_country_flag = dh_17_selected
                        }
                    }
                    NOT = {
                        OR = {
                            has_country_flag = ee_4_order_in_progress
                            has_country_flag = dh_17_order_in_progress
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        CZE = {
                            has_tech = cheap_blaster_1
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_selected
                        }
                        CZE = {
                            has_tech = cheap_blaster_2
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = spha_selected
                    }
                    NOT = {
                        has_country_flag = spha_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        ROT = {
                            has_tech = artillery1
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_selected
                        }
                        ROT = {
                            has_tech = artillery4
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = mptl_2_selected
                    }
                    NOT = {
                        has_country_flag = mptl_2_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        UBK = {
                            has_tech = artillery1
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_selected
                        }
                        UBK = {
                            has_tech = artillery4
                        }
                    }
                }else_if = {
                    limit = {
                        OR = {
                            has_country_flag = smart_rocket_selected
                            has_country_flag = hh_12_selected
                        }
                    }
                    NOT = {
                        OR = {
                            has_country_flag = smart_rocket_order_in_progress
                            has_country_flag = hh_12_order_in_progress
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        MER = {
                            has_tech = antitank2
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_selected
                        }
                        MER = {
                            has_tech = antitank5
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = ataa_selected
                    }
                    NOT = {
                        has_country_flag = ataa_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        KUA = {
                            has_tech = at_aa_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = atdp_selected
                    }
                    NOT = {
                        has_country_flag = atdp_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        KUA = {
                            has_tech = at_dp_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = atst_selected
                    }
                    NOT = {
                        has_country_flag = atst_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        KUA = {
                            has_tech = at_st_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tx130t_selected
                    }
                    NOT = {
                        has_country_flag = tx130t_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        KUA = {
                            has_tech = tx_130T_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = atat_selected
                    }
                    NOT = {
                        has_country_flag = atat_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        KUA = {
                            has_tech = at_at_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_crawler_selected
                    }
                    NOT = {
                        has_country_flag = tie_crawler_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_1_selected
                        }
                        SFS = {
                            has_tech = tie_crawler
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        SFS = {
                            has_tech = tie_crawler_2
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = juggernaut_selected
                    }
                    NOT = {
                        has_country_flag = juggernaut_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        KUA = {
                            has_tech = juggernaut_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = k79_s80_selected
                    }
                    NOT = {
                        has_country_flag = k79_s80_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = supply_equipment_merr_selected
                    }
                    NOT = {
                        has_country_flag = supply_equipment_merr_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = t1_s_selected
                    }
                    NOT = {
                        has_country_flag = t1_s_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = supply_equipment_czerkia_selected
                    }
                    NOT = {
                        has_country_flag = supply_equipment_czerkia_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = t3_b_selected
                    }
                    NOT = {
                        has_country_flag = t3_b_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        YUT = {
                            has_tech =  t3_b_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = t4_b_selected
                    }
                    NOT = {
                        has_country_flag = t4_b_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        YUT = {
                            has_tech =  t4_b_advanced
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_selected
                        }
                        YUT = {
                            has_tech =  t4_b
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = t1_b_selected
                    }
                    NOT = {
                        has_country_flag = t1_b_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        YUT = {
                            has_tech =  t1_b_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = t1_c_selected
                    }
                    NOT = {
                        has_country_flag = t1_c_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        YUT = {
                            has_tech =  t1_c_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = aac_speeder_selected
                    }
                    NOT = {
                        has_country_flag = aac_speeder_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        SUL = {
                            has_tech =  AAC_1_speeder_tank_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = combat_speeder_selected
                    }
                    NOT = {
                        has_country_flag = combat_speeder_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        SUL = {
                            has_tech =  combat_speeder_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = flash_speeder_selected
                    }
                    NOT = {
                        has_country_flag = flash_speeder_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        SUL = {
                            has_tech =  flash_speeder_advanced
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = stormtrooper_equipment_selected
                    }
                    NOT = {
                        has_country_flag = stormtrooper_equipment_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = aat_selected
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        date > 06.12.01
                    }
                    NOT = {
                        has_country_flag = aat_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = a_25_truck_selected
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        date > 05.12.01
                    }
                    NOT = {
                        has_country_flag = a_25_truck_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = x_34_landspeeder_selected
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        date > 05.12.01
                    }
                    NOT = {
                        has_country_flag = x_34_landspeeder_order_in_progress
                    }
                }
                set_temp_variable = {price_of_batch = current_price_market_buy_price}
                multiply_temp_variable = {price_of_batch = amount_to_be_produced}
                if = {
                    limit = {
                        OR = {
                            has_country_flag = e_11_selected
                            has_country_flag = ee_4_selected
                            has_country_flag = a280c_selected
                            has_country_flag = dh_17_selected
                            has_country_flag = stormtrooper_equipment_selected
                        }
                    }
                    divide_temp_variable = {price_of_batch = 1000}
                }else = {
                    divide_temp_variable = {price_of_batch = 100}
                }
                check_variable = {price_of_batch < currency_amount^primary_currency}
            }
            amount_in_queue_in_front_visible = {
                if = {
                    limit = {
                        has_country_flag = ee_4_selected
                    }
                    has_country_flag = ee_4_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = e_11_selected
                    }
                    has_country_flag = e_11_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = smart_rocket_selected
                    }
                    has_country_flag = smart_rocket_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = supply_equipment_merr_selected
                    }
                    has_country_flag = supply_equipment_merr_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = spha_selected
                    }
                    has_country_flag = spha_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = ataa_selected
                    }
                    has_country_flag = ataa_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = tie_crawler_selected
                    }
                    has_country_flag = tie_crawler_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = atdp_selected
                    }
                    has_country_flag = atdp_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = tx130t_selected
                    }
                    has_country_flag = tx130t_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = atst_selected
                    }
                    has_country_flag = atst_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = juggernaut_selected
                    }
                    has_country_flag = juggernaut_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = atat_selected
                    }
                    has_country_flag = atat_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = a280c_selected
                    }
                    has_country_flag = a280c_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = dh_17_selected
                    }
                    has_country_flag = dh_17_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = hh_12_selected
                    }
                    has_country_flag = hh_12_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = mptl_2_selected
                    }
                    has_country_flag = mptl_2_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = supply_equipment_czerkia_selected
                    }
                    has_country_flag = supply_equipment_czerkia_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = t1_s_selected
                    }
                    has_country_flag = t1_s_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = t3_b_selected
                    }
                    has_country_flag = t3_b_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = t4_b_selected
                    }
                    has_country_flag = t4_b_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = t1_b_selected
                    }
                    has_country_flag = t1_b_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = t1_c_selected
                    }
                    has_country_flag = t1_c_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = aac_speeder_selected
                    }
                    has_country_flag = aac_speeder_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = combat_speeder_selected
                    }
                    has_country_flag = combat_speeder_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = flash_speeder_selected
                    }
                    has_country_flag = flash_speeder_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = aat_selected
                    }
                    has_country_flag = aat_selected
                }else_if = {
                    limit = {
                        has_country_flag = a_25_truck_selected
                    }
                    has_country_flag = a_25_truck_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = x_34_landspeeder_selected
                    }
                    has_country_flag = x_34_landspeeder_order_in_progress
                }else = {
                    always = no
                }
            }
            amount_in_queue_visible = {
                if = {
                    limit = {
                        has_country_flag = ee_4_selected
                    }
                    NOT = {
                        has_country_flag = ee_4_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = e_11_selected
                    }
                    NOT = {
                        has_country_flag = e_11_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = smart_rocket_selected
                    }
                    NOT = {
                        has_country_flag = smart_rocket_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = spha_selected
                    }
                    NOT = {
                        has_country_flag = spha_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = supply_equipment_merr_selected
                    }
                    NOT = {
                        has_country_flag = supply_equipment_merr_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = ataa_selected
                    }
                    NOT = {
                        has_country_flag = ataa_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_crawler_selected
                    }
                    NOT = {
                        has_country_flag = tie_crawler_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = atdp_selected
                    }
                    NOT = {
                        has_country_flag = atdp_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tx130t_selected
                    }
                    NOT = {
                        has_country_flag = tx130t_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = atst_selected
                    }
                    NOT = {
                        has_country_flag = atst_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = juggernaut_selected
                    }
                    NOT = {
                        has_country_flag = juggernaut_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = atat_selected
                    }
                    NOT = {
                        has_country_flag = atat_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = a280c_selected
                    }
                    NOT = {
                        has_country_flag = a280c_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = dh_17_selected
                    }
                    NOT = {
                        has_country_flag = dh_17_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = hh_12_selected
                    }
                    NOT = {
                        has_country_flag = hh_12_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = mptl_2_selected
                    }
                    NOT = {
                        has_country_flag = mptl_2_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = supply_equipment_czerkia_selected
                    }
                    NOT = {
                        has_country_flag = supply_equipment_czerkia_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = t1_s_selected
                    }
                    NOT = {
                        has_country_flag = t1_s_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = t3_b_selected
                    }
                    NOT = {
                        has_country_flag = t3_b_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = t4_b_selected
                    }
                    NOT = {
                        has_country_flag = t4_b_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = t1_b_selected
                    }
                    NOT = {
                        has_country_flag = t1_b_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = t1_c_selected
                    }
                    NOT = {
                        has_country_flag = t1_c_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = aac_speeder_selected
                    }
                    NOT = {
                        has_country_flag = aac_speeder_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = combat_speeder_selected
                    }
                    NOT = {
                        has_country_flag = combat_speeder_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = flash_speeder_selected
                    }
                    NOT = {
                        has_country_flag = flash_speeder_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = aat_selected
                    }
                   NOT = {
                        has_country_flag = aat_selected
                    }
                }else_if = {
                    limit = {
                        has_country_flag = a_25_truck_selected
                    }
                   NOT = {
                        has_country_flag = a_25_truck_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = x_34_landspeeder_selected
                    }
                   NOT = {
                        has_country_flag = x_34_landspeeder_order_in_progress
                    }
                }
            }
        }
    }
    Marketplace_buying_land_reb_main = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_land_reb_main"
        visible = {
            has_country_flag = open_market_ground_forces
            has_country_flag = republic_market_open
        }
        effects = {
            a280c_click = {
                set_country_flag = a280c_selected
                clr_country_flag = dh_17_selected
                clr_country_flag = hh_12_selected
                clr_country_flag = t1_s_selected
                clr_country_flag = mptl_2_selected
                clr_country_flag = supply_equipment_czerkia_selected
                set_variable = { manufacturing_country = BLS.id }
                set_variable = {amount_to_be_produced = 1000}
                set_variable = { manufacturing_number = 15 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}

            }
            dh_17_click = {
                set_country_flag = dh_17_selected
                clr_country_flag = a280c_selected
                clr_country_flag = hh_12_selected
                clr_country_flag = t1_s_selected
                clr_country_flag = mptl_2_selected
                clr_country_flag = supply_equipment_czerkia_selected
                set_variable = { manufacturing_country = CZE.id }
                set_variable = {amount_to_be_produced = 1000}
                set_variable = { manufacturing_number = 19 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}
            }
            hh_12_click = {
                set_country_flag = hh_12_selected
                clr_country_flag = a280c_selected
                clr_country_flag = dh_17_selected
                clr_country_flag = t1_s_selected
                clr_country_flag = mptl_2_selected
                clr_country_flag = supply_equipment_czerkia_selected
                set_variable = { manufacturing_country = MER.id }
                set_variable = {amount_to_be_produced = 100}
                set_variable = { manufacturing_number = 22 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}

            }
            t1_s_click = {
                set_country_flag = t1_s_selected
                clr_country_flag = a280c_selected
                clr_country_flag = dh_17_selected
                clr_country_flag = hh_12_selected
                clr_country_flag = mptl_2_selected
                clr_country_flag = supply_equipment_czerkia_selected
                set_variable = { manufacturing_country = SOR.id }
                set_variable = {amount_to_be_produced = 100}
                set_variable = { manufacturing_number = 25 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}

            }
            mptl_2_click = {
                set_country_flag = mptl_2_selected
                clr_country_flag = a280c_selected
                clr_country_flag = dh_17_selected
                clr_country_flag = hh_12_selected
                clr_country_flag = t1_s_selected
                clr_country_flag = supply_equipment_czerkia_selected
                set_variable = { manufacturing_country = UBK.id }
                set_variable = {amount_to_be_produced = 100}
                set_variable = { manufacturing_number = 26 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}

            }
            cze_support_click = {
                set_country_flag = supply_equipment_czerkia_selected
                clr_country_flag = a280c_selected
                clr_country_flag = dh_17_selected
                clr_country_flag = hh_12_selected
                clr_country_flag = t1_s_selected
                clr_country_flag = mptl_2_selected
                set_variable = {amount_to_be_produced = 100}
                set_variable = { manufacturing_country = CZE.id }
                set_variable = { manufacturing_number = 29 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number }

            }
            t3_b_click = {
                set_country_flag = t3_b_selected
                clr_country_flag = t4_b_selected
                clr_country_flag = t1_c_selected
                clr_country_flag = aac_speeder_selected
                clr_country_flag = combat_speeder_selected
                clr_country_flag = flash_speeder_selected
                clr_country_flag = t1_b_selected
                set_variable = { manufacturing_country = YUT.id }
                set_variable = { manufacturing_number = 0 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number }

            }
            t4_b_click = {
                set_country_flag = t4_b_selected
                clr_country_flag = t3_b_selected
                clr_country_flag = t1_c_selected
                clr_country_flag = aac_speeder_selected
                clr_country_flag = combat_speeder_selected
                clr_country_flag = flash_speeder_selected
                clr_country_flag = t1_b_selected
                set_variable = { manufacturing_country = YUT.id }
                set_variable = { manufacturing_number = 2 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number }
                
            }
            t1_b_click = {
                set_country_flag = t1_b_selected
                clr_country_flag = t3_b_selected
                clr_country_flag = t4_b_selected
                clr_country_flag = t1_c_selected
                clr_country_flag = aac_speeder_selected
                clr_country_flag = combat_speeder_selected
                clr_country_flag = flash_speeder_selected
                set_variable = { manufacturing_country = YUT.id }
                set_variable = { manufacturing_number = 4 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number }
            }
            t1_c_click = {
                set_country_flag = t1_c_selected
                clr_country_flag = t3_b_selected
                clr_country_flag = t4_b_selected
                clr_country_flag = aac_speeder_selected
                clr_country_flag = combat_speeder_selected
                clr_country_flag = flash_speeder_selected
                clr_country_flag = t1_b_selected
                set_variable = { manufacturing_country = YUT.id }
                set_variable = { manufacturing_number = 6 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number }
            }
            aac_speeder_click = {
                set_country_flag = aac_speeder_selected
                clr_country_flag = t3_b_selected
                clr_country_flag = t4_b_selected
                clr_country_flag = t1_c_selected
                clr_country_flag = combat_speeder_selected
                clr_country_flag = flash_speeder_selected
                clr_country_flag = t1_b_selected
                set_variable = { manufacturing_country = SOR.id }
                set_variable = { manufacturing_number = 8 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number }
            }
            combat_speeder_click = {
                set_country_flag = combat_speeder_selected
                clr_country_flag = t3_b_selected
                clr_country_flag = t4_b_selected
                clr_country_flag = t1_c_selected
                clr_country_flag = aac_speeder_selected
                clr_country_flag = flash_speeder_selected
                clr_country_flag = t1_b_selected
                set_variable = { manufacturing_country = SOR.id }
                set_variable = { manufacturing_number = 10 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number }
            }
            flash_speeder_click = {
                set_country_flag = flash_speeder_selected
                clr_country_flag = t3_b_selected
                clr_country_flag = t4_b_selected
                clr_country_flag = t1_c_selected
                clr_country_flag = aac_speeder_selected
                clr_country_flag = combat_speeder_selected
                clr_country_flag = t1_b_selected
                set_variable = { manufacturing_country = SOR.id }
                set_variable = { manufacturing_number = 12 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number }
            }
        }
        triggers = {
            a280c_click_enabled = {
                NOT = {
                    has_country_flag = a280c_selected
                }
            }
            dh_17_click_enabled = {
                NOT = {
                    has_country_flag = dh_17_selected
                }
            }
            hh_12_click_enabled = {
                NOT = {
                    has_country_flag = hh_12_selected
                }
            }
            t1_s_click_enabled = {
                NOT = {
                    has_country_flag = t1_s_selected
                }
            }
            mptl_2_click_enabled = {
                NOT = {
                    has_country_flag = mptl_2_selected
                }
            }
            cze_support_click_enabled = {
                NOT = {
                    has_country_flag = supply_equipment_czerkia_selected
                }
            }
            t1_b_click_enabled = {
                NOT = {
                    has_country_flag = t1_b_selected
                }
            }
            t3_b_click_enabled = {
                NOT = {
                    has_country_flag = t3_b_selected
                }
            }
            t4_b_click_enabled = {
                NOT = {
                    has_country_flag = t4_b_selected
                }
            }
            t1_c_click_enabled = {
                NOT = {
                    has_country_flag = t1_c_selected
                }
            }
            aac_speeder_click_enabled = {
                NOT = {
                    has_country_flag = aac_speeder_selected
                }
            }
            combat_speeder_click_enabled = {
                NOT = {
                    has_country_flag = combat_speeder_selected
                }
            }
            flash_speeder_click_enabled = {
                NOT = {
                    has_country_flag = flash_speeder_selected
                }
            }
            t2_b_click_enabled = {
                NOT = {
                    has_country_flag = t2_b_selected
                }
            }
            a280c_visible = {
                has_country_flag = gun_selected
            }
            dh_17_visible = {
                has_country_flag = gun_selected
            }
            hh_12_visible = {
                has_country_flag = gun_selected
            }
            t1_s_visible = {
                has_country_flag = gun_selected
            }
            mptl_2_visible = {
                has_country_flag = gun_selected
            }
            cze_support_visible = {
                has_country_flag = gun_selected
            }
            t3_b_visible = {
                has_country_flag = tank_selected
            }
            t4_b_visible = {
                has_country_flag = tank_selected
            }
            t1_c_visible = {
                has_country_flag = tank_selected
            }
            aac_speeder_visible = {
                has_country_flag = tank_selected
            }
            combat_speeder_visible = {
                has_country_flag = tank_selected
            }
            flash_speeder_visible = {
                has_country_flag = tank_selected
            }
            t1_b_visible = {
                has_country_flag = tank_selected
            }
            starfighter_7_visible = {
                has_country_flag = tank_selected

            }
        }
    }
    Marketplace_buying_land_emp_main = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_land_emp_main"
        visible = {
            has_country_flag = open_market_ground_forces
            has_country_flag = imperial_market_open
        }
        effects = {
            ee_4_click = {
                set_country_flag = ee_4_selected
                clr_country_flag = e_11_selected
                clr_country_flag = smart_rocket_selected
                clr_country_flag = k79_s80_selected
                clr_country_flag = spha_selected
                clr_country_flag = supply_equipment_merr_selected
                clr_country_flag = stormtrooper_equipment_selected
                set_variable = {amount_to_be_produced = 1000}
                set_variable = { manufacturing_country = CZE.id }
                set_variable = { manufacturing_number = 4 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
                
            }
            e_11_click = {
                set_country_flag = e_11_selected
                clr_country_flag = ee_4_selected
                clr_country_flag = smart_rocket_selected
                clr_country_flag = k79_s80_selected
                clr_country_flag = spha_selected
                clr_country_flag = supply_equipment_merr_selected
                clr_country_flag = stormtrooper_equipment_selected
                set_variable = {amount_to_be_produced = 1000}
                set_variable = { manufacturing_country = BLS.id }
                set_variable = { manufacturing_number = 0 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
            smart_rocket_click = {
                set_country_flag = smart_rocket_selected
                clr_country_flag = ee_4_selected
                clr_country_flag = e_11_selected
                clr_country_flag = k79_s80_selected
                clr_country_flag = spha_selected
                clr_country_flag = supply_equipment_merr_selected
                clr_country_flag = stormtrooper_equipment_selected
                set_variable = {amount_to_be_produced = 100}
                set_variable = { manufacturing_country = MER.id }
                set_variable = { manufacturing_number = 7 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
            k79_s80_click = {
                set_country_flag = k79_s80_selected
                clr_country_flag = ee_4_selected
                clr_country_flag = e_11_selected
                clr_country_flag = smart_rocket_selected
                clr_country_flag = spha_selected
                clr_country_flag = supply_equipment_merr_selected
                clr_country_flag = stormtrooper_equipment_selected
                set_variable = {amount_to_be_produced = 100}
                set_variable = { manufacturing_country = BLS.id }
                set_variable = { manufacturing_number = 10 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
            spha_click = {
                set_country_flag = spha_selected
                clr_country_flag = ee_4_selected
                clr_country_flag = e_11_selected
                clr_country_flag = smart_rocket_selected
                clr_country_flag = k79_s80_selected
                clr_country_flag = supply_equipment_merr_selected
                clr_country_flag = stormtrooper_equipment_selected
                set_variable = {amount_to_be_produced = 100}
                set_variable = { manufacturing_country = ROT.id }
                set_variable = { manufacturing_number = 11 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
            supply_equipment_merr_click = {
                set_country_flag = supply_equipment_merr_selected
                clr_country_flag = ee_4_selected
                clr_country_flag = e_11_selected
                clr_country_flag = smart_rocket_selected
                clr_country_flag = k79_s80_selected
                clr_country_flag = spha_selected
                clr_country_flag = stormtrooper_equipment_selected
                set_variable = {amount_to_be_produced = 100}
                set_variable = { manufacturing_country = MER.id }
                set_variable = { manufacturing_number = 12 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
            stormtrooper_equip_click = {
               set_country_flag = stormtrooper_equipment_selected
               clr_country_flag = ee_4_selected
               clr_country_flag = e_11_selected
               clr_country_flag = smart_rocket_selected
               clr_country_flag = k79_s80_selected
               clr_country_flag = spha_selected
               clr_country_flag = supply_equipment_merr_selected
               set_variable = {amount_to_be_produced = 1000}
               set_variable = { manufacturing_country = ROT.id }
               set_variable = { manufacturing_number = 30 }
				set_variable = { current_price_market_buy_price = Global.soft_market_price_holder@root.manufacturing_number }
               set_variable = { current_ic_cost_ships = Global.soft_market_ic_cost_holder@root.manufacturing_number}
               set_country_flag = level_1_selected
               clr_country_flag = level_2_selected
               clr_country_flag = level_3_selected
               clr_country_flag = level_4_selected
            }
            atdp_click = {
                set_country_flag = atdp_selected
                clr_country_flag = atst_selected
                clr_country_flag = juggernaut_selected
                clr_country_flag = tie_crawler_selected
                clr_country_flag = ataa_selected
                clr_country_flag = tx130t_selected
                clr_country_flag = atat_selected
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 24 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number}
            }
            atst_click = {
                set_country_flag = atst_selected
                clr_country_flag = atdp_selected
                clr_country_flag = juggernaut_selected
                clr_country_flag = tie_crawler_selected
                clr_country_flag = ataa_selected
                clr_country_flag = tx130t_selected
                clr_country_flag = atat_selected
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 20 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number}
                
            }
            juggernaut_click = {
                set_country_flag = juggernaut_selected
                clr_country_flag = atdp_selected
                clr_country_flag = atst_selected
                clr_country_flag = tie_crawler_selected
                clr_country_flag = ataa_selected
                clr_country_flag = tx130t_selected
                clr_country_flag = atat_selected
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 18 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number}
            }
            tie_crawler_click = {
                set_country_flag = tie_crawler_selected
                clr_country_flag = atdp_selected
                clr_country_flag = atst_selected
                clr_country_flag = juggernaut_selected
                clr_country_flag = ataa_selected
                clr_country_flag = tx130t_selected
                clr_country_flag = atat_selected
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 26 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number}
            }
            ataa_click = {
                set_country_flag = ataa_selected
                clr_country_flag = atdp_selected
                clr_country_flag = atst_selected
                clr_country_flag = juggernaut_selected
                clr_country_flag = tie_crawler_selected
                clr_country_flag = tx130t_selected
                clr_country_flag = atat_selected
                set_variable = { manufacturing_country = ROT.id }
                set_variable = { manufacturing_number = 16 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number}
            }
            tx130t_click = {
                set_country_flag = tx130t_selected
                clr_country_flag = atdp_selected
                clr_country_flag = atst_selected
                clr_country_flag = juggernaut_selected
                clr_country_flag = tie_crawler_selected
                clr_country_flag = ataa_selected
                clr_country_flag = atat_selected
                set_variable = { manufacturing_country = ROT.id }
                set_variable = { manufacturing_number = 22 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number}
            }
            atat_click = {
                set_country_flag = atat_selected
                clr_country_flag = atdp_selected
                clr_country_flag = atst_selected
                clr_country_flag = juggernaut_selected
                clr_country_flag = tie_crawler_selected
                clr_country_flag = ataa_selected
                clr_country_flag = tx130t_selected
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 14 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number}
            }    
        }
        triggers = {
            ee_4_click_enabled = {
                NOT = {
                    has_country_flag = ee_4_selected
                }
            }
            e_11_click_enabled = {
                NOT = {
                    has_country_flag = e_11_selected
                }
            }
            smart_rocket_click_enabled = {
                NOT = {
                    has_country_flag = smart_rocket_selected
                }
            }
            k79_s80_click_enabled = {
                NOT = {
                    has_country_flag = k79_s80_selected
                }
            }
            spha_click_enabled = {
                NOT = {
                    has_country_flag = spha_selected
                }
            }
            supply_equipment_merr_click_enabled = {
                NOT = {
                    has_country_flag = supply_equipment_merr_selected
                }
            }
            land_emp_icon_gun_visible = {
                has_country_flag = gun_selected
            }
            land_emp_icon_tank_visible = {
                has_country_flag = tank_selected
            }
            starfighter_7_visible = {
               # has_country_flag = tank_selected
            }
            ee_4_visible = {
                has_country_flag = gun_selected
            }
            e_11_visible = {
                has_country_flag = gun_selected
            }
            smart_rocket_visible = {
                has_country_flag = gun_selected
            }
            k79_s80_visible = {
                has_country_flag = gun_selected
            }
            spha_visible = {
                has_country_flag = gun_selected
            }
            supply_equipment_merr_visible = {
                has_country_flag = gun_selected
            }
            atdp_visible = {
                has_country_flag = tank_selected
            }
            atst_visible = {
                has_country_flag = tank_selected
            }
            juggernaut_visible = {
                has_country_flag = tank_selected
            }
            tie_crawler_visible = {
                has_country_flag = tank_selected
            }
            ataa_visible = {
                has_country_flag = tank_selected
            }
            tx130t_visible = {
                has_country_flag = tank_selected
            }
            atat_visible = {
                has_country_flag = tank_selected
            }
            stormtrooper_equip_visible = {
                has_country_flag = gun_selected
            }

        }
        properties = {
            land_emp_icon_gun = {
                image = "[Get_emp_land]"
            }
            land_emp_icon_tank = {
                image = "[Get_emp_land_tank]"
            }
        }
    }
    Marketplace_buying_land_neu_main = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_land_neutral_main"
        visible = {
            has_country_flag = open_market_ground_forces
            has_country_flag = neutral_market_open
        }
        effects = {
            aat_click = {
                set_country_flag = aat_selected
                clr_country_flag = a_25_truck_selected
                clr_country_flag = x_34_landspeeder_selected
                set_variable = { manufacturing_country = UBK.id }
                set_variable = { manufacturing_number = 28 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number}
            }
            a_a5_speeder_truck_click = {
                set_country_flag = a_25_truck_selected
                clr_country_flag = aat_selected
                clr_country_flag = x_34_landspeeder_selected
                set_variable = { manufacturing_country = TAG.id }
                set_variable = { manufacturing_number = 30 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number}
            }
            x_34_landspeeder_click = {
                set_country_flag = x_34_landspeeder_selected
                clr_country_flag = aat_selected
                clr_country_flag = a_25_truck_selected
                set_variable = { manufacturing_country = TAG.id }
                set_variable = { manufacturing_number = 32 }
				set_variable = { current_price_market_buy_price = Global.tank_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.tank_market_ic_cost_holder@root.manufacturing_number}
            }    
        }
        triggers = {
            aat_click_enabled = {
                NOT = {
                    has_country_flag = aat_selected
                }
            }
            a_a5_speeder_truck_click_enabled = {
                NOT = {
                    has_country_flag = a_25_truck_selected
                }
            }
            x_34_landspeeder_click_enabled = {
                NOT = {
                    has_country_flag = x_34_landspeeder_selected
                }
            }
            land_neu_icon_gun_visible = {
                has_country_flag = gun_selected
            }
            land_neu_icon_tank_visible = {
                has_country_flag = tank_selected
            }
            aat_visible = {
                has_country_flag = tank_selected
            }
            a_a5_speeder_truck_visible = {
                has_country_flag = tank_selected
            }
            x_34_landspeeder_visible = {
                has_country_flag = tank_selected
            }
        }
        properties = {
            land_neu_icon_gun = {
                image = "[Get_neu_land]"
            }
            land_neu_icon_tank = {
                image = "[Get_neu_land_tank]"
            }
        }
    }
    Marketplace_buying_starfighters = {

        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_starfighters"
        visible = {
            has_country_flag = starfighters_buying_market_open
        }
        effects = {
            order_starship_click = {
                ####################### Fighters ##################################  
                if = {
                    limit = {
                        has_country_flag = x_wing_selected
                    }
                    set_country_flag = x_wing_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = x_wing_market
                            }
                        }
                        set_technology = {
                            x_wing_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = e_wing_selected
                    }
                    set_country_flag = e_wing_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = e_wing_market
                            }
                        }
                        set_technology = {
                           e_wing_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = a_wing_selected
                    }
                    set_country_flag = a_wing_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = a_wing_market
                            }
                        }
                        set_technology = {
                           a_wing_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = k_wing_selected
                    }
                    set_country_flag = k_wing_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = k_wing_market
                            }
                        }
                        set_technology = {
                           k_wing_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = y_wing_selected
                    }
                    set_country_flag = y_wing_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = y_wing_market
                            }
                        }
                        set_technology = {
                           y_wing_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = b_wing_selected
                    }
                    set_country_flag = b_wing_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech =  b_wing_market
                            }
                        }
                        set_technology = {
                            b_wing_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = u_wing_selected
                    }
                    set_country_flag = u_wing_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = u_wing_market
                            }
                        }
                        set_technology = {
                            u_wing_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                    }
                    set_country_flag = tie_fighter_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = tie_fighter_market
                            }
                        }
                        set_technology = {
                            tie_fighter_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = tie_automated_selected
                    }
                    set_country_flag = tie_automated_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = tie_automated_market
                            }
                        }
                        set_technology = {
                            tie_automated_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                    }
                    set_country_flag = tie_bomber_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = tie_bomber_market
                            }
                        }
                        set_technology = {
                            tie_bomber_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = tie_fighter_bomber_selected
                    }
                    set_country_flag = tie_fighter_bomber_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = tie_fighterbomber_market
                            }
                        }
                        set_technology = {
                            tie_fighterbomber_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = tie_defender_selected
                    }
                    set_country_flag = tie_defender_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = tie_defender_market
                            }
                        }
                        set_technology = {
                            tie_defender_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                    }
                    set_country_flag = tie_interceptor_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = tie_interceptor_market
                            }
                        }
                        set_technology = {
                            tie_interceptor_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = tie_phantom_selected
                    }
                    set_country_flag = tie_phantom_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = tie_phantom_market
                            }
                        }
                        set_technology = {
                            tie_phantom_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = x_wing_selected
                        has_country_flag = level_1_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = x_wing_selected
                        has_country_flag = level_2_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = x_wing_selected
                        has_country_flag = level_3_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = e_wing_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = a_wing_selected
                        has_country_flag = level_1_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = a_wing_selected
                        has_country_flag = level_2_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = k_wing_selected
                    }
                    KOE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = y_wing_selected
                        has_country_flag = level_1_selected
                    }
                    KOE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = y_wing_selected
                        has_country_flag = level_2_selected
                    }
                    KOE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced }
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = b_wing_selected
                        has_country_flag = level_1_selected
                    }
                    SLK = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = b_wing_selected
                        has_country_flag = level_2_selected
                    }
                    SLK = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = u_wing_selected
                        has_country_flag = level_1_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = u_wing_selected
                        has_country_flag = level_2_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
            #
                if = {
                    limit = {
                        has_country_flag = tie_defender_selected
                        has_country_flag = level_1_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_phantom_selected
                        has_country_flag = level_1_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_automated_selected
                        has_country_flag = level_1_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_automated_selected
                        has_country_flag = level_2_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                        has_country_flag = level_1_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                        has_country_flag = level_2_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                        has_country_flag = level_3_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                        has_country_flag = level_4_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                        has_country_flag = level_1_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    multiply_temp_variable = { price_to_subtract_from_buyer = 1.6 }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                        has_country_flag = level_2_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                        has_country_flag = level_3_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                        has_country_flag = level_4_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_fighter_bomber_selected
                        has_country_flag = level_1_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_fighter_bomber_selected
                        has_country_flag = level_2_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_fighter_bomber_selected
                        has_country_flag = level_3_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                        has_country_flag = level_1_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                        has_country_flag = level_2_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                        has_country_flag = level_3_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                        has_country_flag = level_4_selected
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    divide_temp_variable = {price_to_subtract_from_buyer = 100}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                set_variable = { amount_to_be_produced = 100 }
            }
            level_1_click = {
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected

                if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                    }
                    set_variable = { manufacturing_number = 17 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                    }
                    set_variable = { manufacturing_number = 28 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                    }
                    set_variable = { manufacturing_number = 21 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_fighter_bomber_selected
                    }
                    set_variable = { manufacturing_number = 25 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_automated_selected
                    }
                    set_variable = { manufacturing_number = 15 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = x_wing_selected
                    }
                    set_variable = { manufacturing_number = 6 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = y_wing_selected
                    }
                    set_variable = { manufacturing_number = 9 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = b_wing_selected
                    }
                    set_variable = { manufacturing_number = 7 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = u_wing_selected
                    }
                    set_variable = { manufacturing_number = 0 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = a_wing_selected
                    }
                    set_variable = { manufacturing_number = 3 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }
            }
            level_2_click = {
                set_country_flag = level_2_selected
                clr_country_flag = level_1_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected

                if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                    }
                    set_variable = { manufacturing_number = 18 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                    }
                    set_variable = { manufacturing_number = 29 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                    }
                    set_variable = { manufacturing_number = 22 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_fighter_bomber_selected
                    }
                    set_variable = { manufacturing_number = 26 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_automated_selected
                    }
                    set_variable = { manufacturing_number = 16 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = x_wing_selected
                    }
                    set_variable = { manufacturing_number = 7 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = y_wing_selected
                    }
                    set_variable = { manufacturing_number = 10 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = b_wing_selected
                    }
                    set_variable = { manufacturing_number = 8 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = u_wing_selected
                    }
                    set_variable = { manufacturing_number = 1 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = a_wing_selected
                    }
                    set_variable = { manufacturing_number = 4 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }
            }
            level_3_click = {
                set_country_flag = level_3_selected
                clr_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_4_selected

                if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                    }
                    set_variable = { manufacturing_number = 19 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                    }
                    set_variable = { manufacturing_number = 30 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                    }
                    set_variable = { manufacturing_number = 23 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_fighter_bomber_selected
                    }
                    set_variable = { manufacturing_number = 27 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = x_wing_selected
                    }
                    set_variable = { manufacturing_number = 8 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }
            }
            level_4_click = {
                set_country_flag = level_4_selected
                clr_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected

                if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                    }
                    set_variable = { manufacturing_number = 20 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                    }
                    set_variable = { manufacturing_number = 31 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }else_if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                    }
                    set_variable = { manufacturing_number = 24 }
					set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                }
            }
            #level_4_click = {
            #    set_country_flag = level_4_selected
            #}
        }
        triggers = {
            level_2_visible = {
                OR = {
                    has_country_flag = u_wing_selected
                    has_country_flag = a_wing_selected
                    has_country_flag = x_wing_selected
                    has_country_flag = y_wing_selected
                    has_country_flag = b_wing_selected
                    has_country_flag = tie_fighter_selected
                    has_country_flag = tie_bomber_selected
                    has_country_flag = tie_interceptor_selected
                    has_country_flag = tie_fighter_bomber_selected
                    has_country_flag = tie_automated_selected
                }
            }
            level_3_visible = {
                OR = {
                    has_country_flag = x_wing_selected
                    has_country_flag = tie_fighter_selected
                    has_country_flag = tie_bomber_selected
                    has_country_flag = tie_interceptor_selected
                    has_country_flag = tie_fighter_bomber_selected
                }
            }
            level_4_visible = {
                OR = {
                    has_country_flag = tie_fighter_selected
                    has_country_flag = tie_bomber_selected
                    has_country_flag = tie_interceptor_selected
                }
            }
            level_1_click_enabled = {
                NOT = {
                    has_country_flag = level_1_selected
                }
            }
            level_2_click_enabled = {
                NOT = {
                    has_country_flag = level_2_selected
                }
            }
            level_3_click_enabled = {
                NOT = {
                    has_country_flag = level_3_selected
                }
            }
            level_4_click_enabled = {
                NOT = {
                    has_country_flag = level_4_selected
                }
            }
            order_starship_click_enabled = {
                if = {
                    limit = {
                        has_country_flag = x_wing_selected
                    }
                    NOT = {
                        has_country_flag = x_wing_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        INC = {
                            has_tech = x_wing_70
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_selected
                        }
                        INC = {
                            has_tech = x_wing_85
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = e_wing_selected
                    }
                    NOT = {
                        has_country_flag = e_wing_order_in_progress
                    }
                    INC = {
                        has_tech = e_wing
                    }
                }else_if = {
                    limit = {
                        has_country_flag = a_wing_selected
                    }
                    NOT = {
                        has_country_flag = a_wing_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        KUA = {
                            has_tech = a_wing_2
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = u_wing_selected
                    }
                    NOT = {
                        has_country_flag = u_wing_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        KUA = {
                            has_tech = u_wing_1
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = y_wing_selected
                    }
                    NOT = {
                        has_country_flag = y_wing_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        KOE = {
                            has_tech = y_wing_airframe_2
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = b_wing_selected
                    }
                    NOT = {
                        has_country_flag = b_wing_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        SLK = {
                            has_tech = b_wing_airframe_1
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = k_wing_selected
                    }
                    NOT = {
                        has_country_flag = k_wing_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                    }
                    NOT = {
                        has_country_flag = tie_fighter_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        SFS = {
                            has_tech = tie_fighter_2
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_selected
                        }
                        SFS = {
                            has_tech = tie_dagger
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_4_selected
                        }
                        SFS = {
                            has_tech = tie_predator
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                    }
                    NOT = {
                        has_country_flag = tie_bomber_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        SFS = {
                            has_tech = tie_heavy_bomber
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_selected
                        }
                        SFS = {
                            has_tech = tie_punisher
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_4_selected
                        }
                        SFS = {
                            has_tech = tie_scimitar
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_automated_selected
                    }
                    NOT = {
                        has_country_flag = tie_automated_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        SFS = {
                            has_tech = tie_automated
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                    }
                    NOT = {
                        has_country_flag = tie_interceptor_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        SFS = {
                            has_tech = tie_hunter
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_selected
                        }
                        SFS = {
                            has_tech = tie_raptor
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_4_selected
                        }
                        SFS = {
                            has_tech = tie_silencer
                        }
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_phantom_selected
                    }
                    NOT = {
                        has_country_flag = tie_phantom_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_defender_selected
                    }
                    NOT = {
                        has_country_flag = tie_defender_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_fighter_bomber_selected
                    }
                    NOT = {
                        has_country_flag = tie_fighter_bomber_order_in_progress
                    }
                    if = {
                        limit = {
                            has_country_flag = level_2_selected
                        }
                        SFS = {
                            has_tech = tie_oppressor
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_selected
                        }
                        SFS = {
                            has_tech = tie_aggressor
                        }
                    }
                }
                set_temp_variable = {price_of_batch = current_price_market_buy_price}
                multiply_temp_variable = {price_of_batch = amount_to_be_produced}
                divide_temp_variable = {price_of_batch = 100}
                check_variable = {price_of_batch < currency_amount^primary_currency}
            }
            amount_in_queue_in_front_visible = {
                if = {
                    limit = {
                        has_country_flag = x_wing_selected
                    }
                    has_country_flag = x_wing_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = e_wing_selected
                    }
                    has_country_flag = e_wing_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = a_wing_selected
                    }
                    has_country_flag = a_wing_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = u_wing_selected
                    }
                    has_country_flag = u_wing_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = y_wing_selected
                    }
                    has_country_flag = y_wing_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = b_wing_selected
                    }
                    has_country_flag = b_wing_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = k_wing_selected
                    }
                    has_country_flag = k_wing_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                    }
                    has_country_flag = tie_fighter_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                    }
                    has_country_flag = tie_bomber_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = tie_automated_selected
                    }
                    has_country_flag = tie_automated_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                    }
                    has_country_flag = tie_interceptor_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = tie_phantom_selected
                    }
                    has_country_flag = tie_phantom_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = tie_defender_selected
                    }
                    has_country_flag = tie_defender_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = tie_fighter_bomber_selected
                    }
                    has_country_flag = tie_fighter_bomber_order_in_progress
                }else = {
                    always = no
                }
            }
            amount_in_queue_visible = {
                if = {
                    limit = {
                        has_country_flag = x_wing_selected
                    }
                    NOT = {
                        has_country_flag = x_wing_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = e_wing_selected
                    }
                    NOT = {
                        has_country_flag = e_wing_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = a_wing_selected
                    }
                    NOT = {
                        has_country_flag = a_wing_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = u_wing_selected
                    }
                    NOT = {
                        has_country_flag = u_wing_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = y_wing_selected
                    }
                    NOT = {
                        has_country_flag = y_wing_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = b_wing_selected
                    }
                    NOT = {
                        has_country_flag = b_wing_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = k_wing_selected
                    }
                    NOT = {
                        has_country_flag = k_wing_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_fighter_selected
                    }
                    NOT = {
                        has_country_flag = tie_fighter_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_bomber_selected
                    }
                    NOT = {
                        has_country_flag = tie_bomber_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_automated_selected
                    }
                    NOT = {
                        has_country_flag = tie_automated_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_interceptor_selected
                    }
                    NOT = {
                        has_country_flag = tie_interceptor_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_phantom_selected
                    }
                    NOT = {
                        has_country_flag = tie_phantom_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_defender_selected
                    }
                    NOT = {
                        has_country_flag = tie_defender_order_in_progress
                    }
                }else_if = {
                    limit = {
                        has_country_flag = tie_fighter_bomber_selected
                    }
                    NOT = {
                        has_country_flag = tie_fighter_bomber_order_in_progress
                    }
                }
            }
        }
    }
    Marketplace_buying_ships_main = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_ships"
        visible = {
            has_country_flag = open_market_ships
        }
        effects = {
            order_ship_click = {
                add_political_power = -1
                if = {
                    limit = {
                        has_country_flag = CR70_buying_market_open
                    }
                    if = {
                        limit = {
                            NOT = {
                                has_tech = cr_70_market
                            }
                        }
                        set_technology = {
                            cr_70_market = 1
                        }
                    }
                    set_country_flag = CR70_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = CR90_buying_market_open
                    }
                    set_country_flag = CR90_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = cr_70_market
                            }
                        }
                        set_technology = {
                            cr_70_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = corona_buying_market_open
                    }
                    set_country_flag = corona_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = Corona_market
                            }
                        }
                        set_technology = {
                            Corona_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = pelta_buying_market_open
                    }
                    set_country_flag = pelta_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = Pelta_market
                            }
                        }
                        set_technology = {
                            Pelta_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc30_buying_market_open
                    }
                    set_country_flag = mc30_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = MC30_market
                            }
                        }
                        set_technology = {
                            MC30_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b_buying_market_open
                    }
                    set_country_flag = nebulon_b_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = Nebulon_market
                            }
                        }
                        set_technology = {
                            Nebulon_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b2_buying_market_open
                    }
                    set_country_flag = nebulon_b2_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = Nebulon_market
                            }
                        }
                        set_technology = {
                            Nebulon_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = quaser_buying_market_open
                    }
                    set_country_flag = quaser_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = quaser_market
                            }
                        }
                        set_technology = {
                            quaser_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = warrior_buying_market_open
                    }
                    set_country_flag = warrior_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = warrior_market
                            }
                        }
                        set_technology = {
                            warrior_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = assault_1_buying_market_open
                    }
                    set_country_flag = assault_1_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = assault_market
                            }
                        }
                        set_technology = {
                            assault_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = assault_2_buying_market_open
                    }
                    set_country_flag = assault_2_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = assault_market
                            }
                        }
                        set_technology = {
                            assault_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc40_buying_market_open
                    }
                    set_country_flag = mc40_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = MC40_market
                            }
                        }
                        set_technology = {
                            MC40_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc75_buying_market_open
                    }
                    set_country_flag = mc75_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = MC75_market
                            }
                        }
                        set_technology = {
                            MC75_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = bothan_assault_buying_market_open
                    }
                    set_country_flag = bothan_assault_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = bothan_assault_market
                            }
                        }
                        set_technology = {
                            bothan_assault_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_home_one_buying_market_open
                    }
                    set_country_flag = mc80_home_one_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = MC80_home_one_market
                            }
                        }
                        set_technology = {
                            MC80_home_one_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = starhawk_buying_market_open
                    }
                    set_country_flag = starhawk_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = Starhawk_market
                            }
                        }
                        set_technology = {
                            Starhawk_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_liberty_buying_market_open
                    }
                    set_country_flag = mc80_liberty_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = MC80_liberty_market
                            }
                        }
                        set_technology = {
                            MC80_liberty_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = republic_star_destroyer_buying_market_open
                    }
                    set_country_flag = republic_star_destroyer_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = republic_star_market
                            }
                        }
                        set_technology = {
                            republic_star_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebula_star_destroyer_buying_market_open
                    }
                    set_country_flag = nebula_star_destroyer_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = nebula_market
                            }
                        }
                        set_technology = {
                            nebula_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = MC90_buying_market_open
                    }
                    set_country_flag = MC90_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = mc90_market
                            }
                        }
                        set_technology = {
                            mc90_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = dauntless_buying_market_open
                    }
                    set_country_flag = dauntless_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = dauntless_market
                            }
                        }
                        set_technology = {
                            dauntless_market  = 1
                        }
                    }
                }
                
                if = {
                    limit = {
                        has_country_flag = ipv_1_buying_market_open
                    }
                    set_country_flag = ipv_1_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = ipv_market
                            }
                        }
                        set_technology = {
                            ipv_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = gozanti_buying_market_open
                    }
                    set_country_flag = gozanti_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = gozanti_market
                            }
                        }
                        set_technology = {
                            gozanti_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = raider_buying_market_open
                    }
                    set_country_flag = raider_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = raider_market
                            }
                        }
                        set_technology = {
                            raider_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = raider_2_buying_market_open
                    }
                    set_country_flag = raider_2_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = raider_market
                            }
                        }
                        set_technology = {
                            raider_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = lancer_buying_market_open
                    }
                    set_country_flag = lancer_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = lancer_market
                            }
                        }
                        set_technology = {
                            lancer_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_buying_market_open
                    }
                    set_country_flag = Victory_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = victory_market
                            }
                        }
                        set_technology = {
                            victory_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = arquitens_buying_market_open
                    }
                    set_country_flag = arquitens_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = arquitens_market
                            }
                        }
                        set_technology = {
                            arquitens_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Interdictor_buying_market_open
                    }
                    set_country_flag = Interdictor_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = interdictor_market
                            }
                        }
                        set_technology = {
                            interdictor_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = dreadnaught_buying_market_open
                    }
                    set_country_flag = dreadnaught_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = dreadnaught_market
                            }
                        }
                        set_technology = {
                            dreadnaught_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_2_buying_market_open
                    }
                    set_country_flag = Victory_2_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = victory_market
                            }
                        }
                        set_technology = {
                            victory_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = praertor_buying_market_open
                    }
                    set_country_flag = praertor_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = Praetor_market
                            }
                        }
                        set_technology = {
                            Praetor_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_open
                    }
                    set_country_flag = Imperial_Star_Destroyer_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = isd_market
                            }
                        }
                        set_technology = {
                            isd_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                    }
                    set_country_flag = Imperial_Star_Destroyer_1_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = isd_market
                            }
                        }
                        set_technology = {
                            isd_market = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = resurgent_buying_market_open
                    }
                    set_country_flag = resurgent_buying_market_order_in_progress
                    if = {
                        limit = {
                            NOT = {
                                has_tech = Resurgent_market
                            }
                        }
                        set_technology = {
                            Resurgent_market  = 1
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = CR70_buying_market_open
                    }
                    CEC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = CR90_buying_market_open
                    }
                    CEC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = warrior_buying_market_open
                    }
                    RPE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                    
                }
                if = {
                    limit = {
                        has_country_flag = assault_1_buying_market_open
                    }
                    REN = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = assault_2_buying_market_open
                    }
                    REN = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mc40_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mc75_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = pelta_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mc30_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b2_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = quaser_buying_market_open
                    }
                    SOR = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = corona_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_liberty_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = starhawk_buying_market_open
                    }
                    RPE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_home_one_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = republic_star_destroyer_buying_market_open
                    }
                    RPE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = nebula_star_destroyer_buying_market_open
                    }
                    RPE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = MC90_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = dauntless_buying_market_open
                    }
                    SOR = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = ipv_1_buying_market_open
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = gozanti_buying_market_open
                    }
                    CEC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = raider_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = raider_2_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = lancer_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = arquitens_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = Interdictor_buying_market_open
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = dreadnaught_buying_market_open
                    }
                    REN = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_2_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = resurgent_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = praertor_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@root.manufacturing_number^num
                                    value = 0
                                    compare = less_than_or_equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@root.manufacturing_number = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@root.manufacturing_number value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@root.manufacturing_number value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_price }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
            }
            select_corvettes_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = corvette_buying_market_open
                set_variable = { current_ic_cost_ships = 0 }
                set_variable = { current_price_market_buy_price = 0 }
                set_variable = { manufacturing_number = 0 }
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                clr_country_flag = corona_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = warrior_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open

                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                clr_country_flag = lancer_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                clr_country_flag = praertor_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
            }
            select_frigates_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = frigate_buying_market_open
                set_variable = { current_ic_cost_ships = 0 }
                set_variable = { current_price_market_buy_price = 0 }
                set_variable = { manufacturing_number = 0 }
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                clr_country_flag = corona_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = warrior_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open

                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                clr_country_flag = lancer_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                clr_country_flag = praertor_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
                
            }
            select_cruisers_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = cruiser_buying_market_open
                set_variable = { current_ic_cost_ships = 0 }
                set_variable = { current_price_market_buy_price = 0 }
                set_variable = { manufacturing_number = 0 }
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                clr_country_flag = corona_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = warrior_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open

                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                clr_country_flag = lancer_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                clr_country_flag = praertor_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
            }
            select_star_destroyers_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = star_destroyer_buying_market_open
                set_variable = { current_ic_cost_ships = 0 }
                set_variable = { current_price_market_buy_price = 0 }
                set_variable = { manufacturing_number = 0 }
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                clr_country_flag = corona_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = warrior_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open

                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                clr_country_flag = lancer_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                clr_country_flag = praertor_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
            }
            #flag_producer_click = {
            #    var:manufacturing_country = {
            #        capital_scope = {
            #            ROOT = {
            #                goto_state = PREV
            #            }
            #        }
            #    }
            #}
        }
        triggers = {
            amount_in_queue_in_front_visible = {
                if = {
                    limit = {
                        has_country_flag = CR70_buying_market_open
                    }
                    has_country_flag = CR70_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = CR90_buying_market_open
                    }
                    has_country_flag = CR90_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = corona_buying_market_open
                    }
                    has_country_flag = corona_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = pelta_buying_market_open
                    }
                    has_country_flag = pelta_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = mc30_buying_market_open
                    }
                    has_country_flag = mc30_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = nebulon_b_buying_market_open
                    }
                    has_country_flag = nebulon_b_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = nebulon_b2_buying_market_open
                    }
                    has_country_flag = nebulon_b2_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = quaser_buying_market_open
                    }
                    has_country_flag = quaser_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = warrior_buying_market_open
                    }
                    has_country_flag = warrior_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = assault_1_buying_market_open
                    }
                    has_country_flag = assault_1_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = assault_2_buying_market_open
                    }
                    has_country_flag = assault_2_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = mc40_buying_market_open
                    }
                    has_country_flag = mc40_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = mc75_buying_market_open
                    }
                    has_country_flag = mc75_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = bothan_assault_buying_market_open
                    }
                    has_country_flag = bothan_assault_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = mc80_home_one_buying_market_open
                    }
                    has_country_flag = mc80_home_one_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = starhawk_buying_market_open
                    }
                    has_country_flag = starhawk_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = mc80_liberty_buying_market_open
                    }
                    has_country_flag = mc80_liberty_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = republic_star_destroyer_buying_market_open
                    }
                    has_country_flag = republic_star_destroyer_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = nebula_star_destroyer_buying_market_open
                    }
                    has_country_flag = nebula_star_destroyer_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = MC90_buying_market_open
                    }
                    has_country_flag = MC90_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = dauntless_buying_market_open
                    }
                    has_country_flag = dauntless_buying_market_order_in_progress
                }
                else_if = {
                    limit = {
                        has_country_flag = ipv_1_buying_market_open
                    }
                    has_country_flag = ipv_1_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = gozanti_buying_market_open
                    }
                    has_country_flag = gozanti_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = raider_buying_market_open
                    }
                    has_country_flag = raider_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = raider_2_buying_market_open
                    }
                    has_country_flag = raider_2_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = lancer_buying_market_open
                    }
                    has_country_flag = lancer_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = Victory_buying_market_open
                    }
                    has_country_flag = Victory_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = arquitens_buying_market_open
                    }
                    has_country_flag = arquitens_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = Interdictor_buying_market_open
                    }
                    has_country_flag = Interdictor_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = dreadnaught_buying_market_open
                    }
                    has_country_flag = dreadnaught_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = Victory_2_buying_market_open
                    }
                    has_country_flag = Victory_2_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = praertor_buying_market_open
                    }
                    has_country_flag = praertor_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_open
                    }
                    has_country_flag = Imperial_Star_Destroyer_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                    }
                    has_country_flag = Imperial_Star_Destroyer_1_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = resurgent_buying_market_open
                    }
                    has_country_flag = resurgent_buying_market_order_in_progress
                }else = {
                    always = no
                }
            }
            amount_in_queue_visible = {
                 if = {
                    limit = {
                        has_country_flag = CR70_buying_market_open
                    }
                    NOT = {
                        has_country_flag = CR70_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = CR90_buying_market_open
                    }
                    NOT = {
                        has_country_flag = CR90_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = corona_buying_market_open
                    }
                    NOT = {
                        has_country_flag = corona_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = pelta_buying_market_open
                    }
                    NOT = {
                        has_country_flag = pelta_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc30_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc30_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebulon_b_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebulon_b2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = quaser_buying_market_open
                    }
                    NOT = {
                        has_country_flag = quaser_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = warrior_buying_market_open
                    }
                    NOT = {
                        has_country_flag = warrior_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = assault_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = assault_1_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = assault_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = assault_2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc40_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc40_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc75_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc75_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = bothan_assault_buying_market_open
                    }
                    NOT = {
                        has_country_flag = bothan_assault_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_home_one_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc80_home_one_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = starhawk_buying_market_open
                    }
                    NOT = {
                        has_country_flag = starhawk_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_liberty_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc80_liberty_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = republic_star_destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = republic_star_destroyer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebula_star_destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebula_star_destroyer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = MC90_buying_market_open
                    }
                    NOT = {
                        has_country_flag = MC90_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = dauntless_buying_market_open
                    }
                    NOT = {
                        has_country_flag = dauntless_buying_market_order_in_progress
                    }
                }
                
                if = {
                    limit = {
                        has_country_flag = ipv_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = ipv_1_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = gozanti_buying_market_open
                    }
                    NOT = {
                        has_country_flag = gozanti_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = raider_buying_market_open
                    }
                    NOT = {
                        has_country_flag = raider_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = raider_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = raider_2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = lancer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = lancer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Victory_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = arquitens_buying_market_open
                    }
                    NOT = {
                        has_country_flag = arquitens_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Interdictor_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Interdictor_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = dreadnaught_buying_market_open
                    }
                    NOT = {
                        has_country_flag = dreadnaught_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Victory_2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = praertor_buying_market_open
                    }
                    NOT = {
                        has_country_flag = praertor_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = resurgent_buying_market_open
                    }
                    NOT = {
                        has_country_flag = resurgent_buying_market_order_in_progress
                    }
                }
            }
            order_ship_click_enabled = {
                if = {
                    limit = {
                        has_country_flag = CR70_buying_market_open
                    }
                    NOT = {
                        has_country_flag = CR70_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = CR90_buying_market_open
                    }
                    NOT = {
                        has_country_flag = CR90_buying_market_order_in_progress
                    }
                    CEC = {
                        has_tech = cr70_2
                    }
                }
                if = {
                    limit = {
                        has_country_flag = corona_buying_market_open
                    }
                    NOT = {
                        has_country_flag = corona_buying_market_order_in_progress
                    }
                    KUA = {
                        has_tech = Corona_1
                    }
                }
                if = {
                    limit = {
                        has_country_flag = pelta_buying_market_open
                    }
                    NOT = {
                        has_country_flag = pelta_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc30_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc30_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebulon_b_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebulon_b2_buying_market_order_in_progress
                    }
                    KUA = {
                        has_tech = Nebulon_2
                    }
                }
                if = {
                    limit = {
                        has_country_flag = quaser_buying_market_open
                    }
                    NOT = {
                        has_country_flag = quaser_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = warrior_buying_market_open
                    }
                    NOT = {
                        has_country_flag = warrior_buying_market_order_in_progress
                    }
                    var:global.New_republic_engineering = {
                        has_tech = warrior_1
                    }
                }
                if = {
                    limit = {
                        has_country_flag = assault_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = assault_1_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = assault_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = assault_2_buying_market_order_in_progress
                    }
                    REN = {
                        has_tech = assault_2
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc40_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc40_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc75_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc75_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = bothan_assault_buying_market_open
                    }
                    NOT = {
                        has_country_flag = bothan_assault_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_home_one_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc80_home_one_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = starhawk_buying_market_open
                    }
                    NOT = {
                        has_country_flag = starhawk_buying_market_order_in_progress
                    }
                    var:global.New_republic_engineering = {
                        has_tech = starhawk_1
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_liberty_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc80_liberty_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = republic_star_destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = republic_star_destroyer_buying_market_order_in_progress
                    }
                    var:global.New_republic_engineering = {
                        has_tech = republic_star_1
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebula_star_destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebula_star_destroyer_buying_market_order_in_progress
                    }
                    var:global.New_republic_engineering = {
                        has_tech = nebula_1
                    }
                }
                if = {
                    limit = {
                        has_country_flag = MC90_buying_market_open
                    }
                    NOT = {
                        has_country_flag = MC90_buying_market_order_in_progress
                    }
                    CAL = {
                        has_tech = mc90_1
                    }
                }
                if = {
                    limit = {
                        has_country_flag = dauntless_buying_market_open
                    }
                    NOT = {
                        has_country_flag = dauntless_buying_market_order_in_progress
                    }
                }
                
                if = {
                    limit = {
                        has_country_flag = ipv_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = ipv_1_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = gozanti_buying_market_open
                    }
                    NOT = {
                        has_country_flag = gozanti_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = raider_buying_market_open
                    }
                    NOT = {
                        has_country_flag = raider_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = raider_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = raider_2_buying_market_order_in_progress
                    }
                    KUA = {
                        has_tech = raider_2
                    }
                }
                if = {
                    limit = {
                        has_country_flag = lancer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = lancer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Victory_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = arquitens_buying_market_open
                    }
                    NOT = {
                        has_country_flag = arquitens_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Interdictor_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Interdictor_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = dreadnaught_buying_market_open
                    }
                    NOT = {
                        has_country_flag = dreadnaught_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Victory_2_buying_market_order_in_progress
                    }
                    KUA = {
                        has_tech = victory_2
                    }
                }
                if = {
                    limit = {
                        has_country_flag = praertor_buying_market_open
                    }
                    NOT = {
                        has_country_flag = praertor_buying_market_order_in_progress
                    }
                    KUA = {
                        has_tech = praetor_1
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_order_in_progress
                    }
                    KUA = {
                        has_tech = isd_2
                    }
                }
                if = {
                    limit = {
                        has_country_flag = resurgent_buying_market_open
                    }
                    NOT = {
                        has_country_flag = resurgent_buying_market_order_in_progress
                    }
                    KUA = {
                        has_tech = resurgent_1
                    }
                }
                set_temp_variable = {price_of_batch = current_price_market_buy_price}
                multiply_temp_variable = {price_of_batch = amount_to_be_produced}
                check_variable = {price_of_batch < currency_amount^primary_currency}
            }
            select_corvettes_button_click_enabled = {
                NOT = {
                    has_country_flag = corvette_buying_market_open
                }
            }
            select_frigates_button_click_enabled = {
                NOT = {
                    has_country_flag = frigate_buying_market_open
                }
            }
            select_cruisers_button_click_enabled = {
                NOT = {
                    has_country_flag = cruiser_buying_market_open
                }
            }
            select_star_destroyers_button_click_enabled = {
                NOT = {
                    has_country_flag = star_destroyer_buying_market_open
                }
            }
        }
        properties = {
            flag_producer = {
                image = "[?manufacturing_country.GetFlag]"
            }
        }
    }
    Marketplace_buying_emp_starfighters = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_emp_starfighters"
        visible = {
            has_country_flag = starfighters_buying_market_open
            has_country_flag = imperial_market_open
        }
        effects = {
            tie_fighters_click = {
                set_country_flag = tie_fighter_selected
                clr_country_flag = tie_bomber_selected
                clr_country_flag = tie_interceptor_selected
                clr_country_flag = tie_fighter_bomber_selected
                clr_country_flag = tie_defender_selected
                clr_country_flag = tie_phantom_selected
                clr_country_flag = tie_automated_selected
                set_variable = { manufacturing_country = SFS.id }
                set_variable = { manufacturing_number = 17 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
            tie_bomber_click = {
                set_country_flag = tie_bomber_selected
                clr_country_flag = tie_fighter_selected
                clr_country_flag = tie_interceptor_selected
                clr_country_flag = tie_fighter_bomber_selected
                clr_country_flag = tie_defender_selected
                clr_country_flag = tie_phantom_selected
                clr_country_flag = tie_automated_selected
                set_variable = { manufacturing_country = SFS.id }
                set_variable = { manufacturing_number = 28 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
            tie_interceptor_click = {
                set_country_flag = tie_interceptor_selected
                clr_country_flag = tie_fighter_selected
                clr_country_flag = tie_bomber_selected
                clr_country_flag = tie_fighter_bomber_selected
                clr_country_flag = tie_defender_selected
                clr_country_flag = tie_phantom_selected
                clr_country_flag = tie_automated_selected
                set_variable = { manufacturing_country = SFS.id }
                set_variable = { manufacturing_number = 21 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
            tie_fighter_bomber_click = {
                set_country_flag = tie_fighter_bomber_selected
                clr_country_flag = tie_fighter_selected
                clr_country_flag = tie_bomber_selected
                clr_country_flag = tie_interceptor_selected
                clr_country_flag = tie_defender_selected
                clr_country_flag = tie_phantom_selected
                clr_country_flag = tie_automated_selected
                set_variable = { manufacturing_country = SFS.id }
                set_variable = { manufacturing_number = 25 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
            tie_defender_click = {
                set_country_flag = tie_defender_selected
                clr_country_flag = tie_fighter_selected
                clr_country_flag = tie_bomber_selected
                clr_country_flag = tie_interceptor_selected
                clr_country_flag = tie_fighter_bomber_selected
                clr_country_flag = tie_phantom_selected
                clr_country_flag = tie_automated_selected
                set_variable = { manufacturing_country = SFS.id }
                set_variable = { manufacturing_number = 13 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
            tie_phantom_click = {
                set_country_flag = tie_phantom_selected
                clr_country_flag = tie_fighter_selected
                clr_country_flag = tie_bomber_selected
                clr_country_flag = tie_interceptor_selected
                clr_country_flag = tie_fighter_bomber_selected
                clr_country_flag = tie_defender_selected
                clr_country_flag = tie_automated_selected
                set_variable = { manufacturing_country = SFS.id }
                set_variable = { manufacturing_number = 14 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
            tie_automated_click = {
                set_country_flag = tie_automated_selected
                clr_country_flag = tie_fighter_selected
                clr_country_flag = tie_bomber_selected
                clr_country_flag = tie_interceptor_selected
                clr_country_flag = tie_fighter_bomber_selected
                clr_country_flag = tie_defender_selected
                clr_country_flag = tie_phantom_selected
                set_variable = { manufacturing_country = SFS.id }
                set_variable = { manufacturing_number = 15 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
                clr_country_flag = level_4_selected
            }
        }
        triggers = {
            level_2_visible = {
                OR = {
                    has_country_flag = tie_fighter_selected
                    has_country_flag = tie_bomber_selected
                    has_country_flag = tie_interceptor_selected
                    has_country_flag = tie_fighter_bomber_selected
                    has_country_flag = tie_automated_selected
                }
            }
            level_3_visible = {
                OR = {
                    has_country_flag = tie_fighter_selected
                    has_country_flag = tie_bomber_selected
                    has_country_flag = tie_interceptor_selected
                    has_country_flag = tie_fighter_bomber_selected
                }
            }
            level_4_visible = {
                OR = {
                    has_country_flag = tie_fighter_selected
                    has_country_flag = tie_bomber_selected
                    has_country_flag = tie_interceptor_selected
                }
            }
            level_1_click_enabled = {
                NOT = {
                    has_country_flag = level_1_selected
                }
            }
            level_2_click_enabled = {
                NOT = {
                    has_country_flag = level_2_selected
                }
            }
            level_3_click_enabled = {
                NOT = {
                    has_country_flag = level_3_selected
                }
            }
            level_4_click_enabled = {
                NOT = {
                    has_country_flag = level_4_selected
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_emp_starfighter]"
            }
        }
    }
    Marketplace_buying_reb_starfighters = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_reb_starfighters"
        visible = {
            has_country_flag = starfighters_buying_market_open
            has_country_flag = republic_market_open
        }
        effects = {
            x_wing_click = {
                set_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = INC.id }
                set_variable = { manufacturing_number = 6 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
            }
            y_wing_click = {
                clr_country_flag = x_wing_selected
                set_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = KOE.id }
                set_variable = { manufacturing_number = 9 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
            }
            a_wing_click = {
                clr_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                set_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 3 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
            }
            b_wing_click = {
                clr_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                set_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = SLK.id }
                set_variable = { manufacturing_number = 11 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
            }
            e_wing_click = {
                clr_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                set_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = INC.id }
                set_variable = { manufacturing_number = 2 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
            }
            k_wing_click = {
                clr_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                set_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = KOE.id }
                set_variable = { manufacturing_number = 5 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
            }
            u_wing_click = {
                clr_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                set_country_flag = u_wing_selected
                set_variable = { manufacturing_country = INC.id }
                set_variable = { manufacturing_number = 0 }
				set_variable = { current_price_market_buy_price = Global.air_market_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = Global.air_market_ic_cost_holder@root.manufacturing_number}
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
            }
        }
        triggers = {
            x_wing_click_enabled = {
                NOT = {
                    has_country_flag = x_wing_selected
                }
            }
            y_wing_click_enabled = {
                NOT = {
                    has_country_flag = y_wing_selected
                }
            }
            a_wing_click_enabled = {
                NOT = {
                    has_country_flag = a_wing_selected
                }
            }
            b_wing_click_enabled = {
                NOT = {
                    has_country_flag = b_wing_selected
                }
            }
            e_wing_click_enabled = {
                NOT = {
                    has_country_flag = e_wing_selected
                }
            }
            k_wing_click_enabled = {
                NOT = {
                    has_country_flag = k_wing_selected
                }
            }
            u_wing_click_enabled = {
                NOT = {
                    has_country_flag = u_wing_selected
                }
            }
            level_2_visible = {
                OR = {
                    has_country_flag = u_wing_selected
                    has_country_flag = a_wing_selected
                    has_country_flag = x_wing_selected
                    has_country_flag = y_wing_selected
                    has_country_flag = b_wing_selected
                }
            }
            level_3_visible = {
                OR = {
                    has_country_flag = y_wing_selected
                }
            }
            level_4_visible = {
               #OR = {
               #    has_country_flag = b_wing_selected
               #}
            }
            level_1_click_enabled = {
                NOT = {
                    has_country_flag = level_1_selected
                }
            }
            level_2_click_enabled = {
                NOT = {
                    has_country_flag = level_2_selected
                }
            }
            level_3_click_enabled = {
                NOT = {
                    has_country_flag = level_3_selected
                }
            }
            level_4_click_enabled = {
                NOT = {
                    has_country_flag = level_4_selected
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_reb_starfighter]"
            }
        }
    }
        #Marketplace_buying_ships_main = {
        #   context_type = player_context
        #   parent_window_name = "Marketplace_buying_menu"
        #   window_name = "Marketplace_buying_ships"
        #   visible = {
        #       has_country_flag = open_market_ships
        #   }
        #   effects = {
        #       select_corvettes_button_click = {
        #           erase_previous_ship_menu_selection = yes
        #           set_country_flag = corvette_buying_market_open
        #           set_variable = { current_ic_cost_ships = 0 }
        #           set_variable = { current_price_market_buy_price = 0 }
        #           clr_country_flag = CR70_buying_market_open
        #           clr_country_flag = CR90_buying_market_open
        #           clr_country_flag = corona_buying_market_open
        #           clr_country_flag = pelta_buying_market_open
        #           clr_country_flag = mc30_buying_market_open
        #           clr_country_flag = nebulon_b_buying_market_open
        #           clr_country_flag = nebulon_b2_buying_market_open
        #           clr_country_flag = quaser_buying_market_open
        #           clr_country_flag = warrior_buying_market_open
        #           clr_country_flag = assault_1_buying_market_open
        #           clr_country_flag = assault_2_buying_market_open
        #           clr_country_flag = mc40_buying_market_open
        #           clr_country_flag = mc75_buying_market_open
        #           clr_country_flag = bothan_assault_buying_market_open
        #           clr_country_flag = mc80_home_one_buying_market_open
        #           clr_country_flag = starhawk_buying_market_open
        #           clr_country_flag = mc80_liberty_buying_market_open
        #           clr_country_flag = republic_star_destroyer_buying_market_open
        #           clr_country_flag = nebula_star_destroyer_buying_market_open
        #           clr_country_flag = MC90_buying_market_open
        #           clr_country_flag = dauntless_buying_market_open

        #           clr_country_flag = ipv_1_buying_market_open
        #           clr_country_flag = gozanti_buying_market_open
        #           clr_country_flag = raider_buying_market_open
        #           clr_country_flag = raider_2_buying_market_open
        #           clr_country_flag = lancer_buying_market_open
        #           clr_country_flag = Victory_buying_market_open
        #           clr_country_flag = arquitens_buying_market_open
        #           clr_country_flag = Interdictor_buying_market_open
        #           clr_country_flag = dreadnaught_buying_market_open
        #           clr_country_flag = Victory_2_buying_market_open
        #           clr_country_flag = praertor_buying_market_open
        #           clr_country_flag = Imperial_Star_Destroyer_buying_market_open
        #           clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
        #           clr_country_flag = resurgent_buying_market_open
        #       }
        #       select_frigates_button_click = {
        #           erase_previous_ship_menu_selection = yes
        #           set_country_flag = frigate_buying_market_open
        #           set_variable = { current_ic_cost_ships = 0 }
        #           set_variable = { current_price_market_buy_price = 0 }
        #           clr_country_flag = CR70_buying_market_open
        #           clr_country_flag = CR90_buying_market_open
        #           clr_country_flag = corona_buying_market_open
        #           clr_country_flag = pelta_buying_market_open
        #           clr_country_flag = mc30_buying_market_open
        #           clr_country_flag = nebulon_b_buying_market_open
        #           clr_country_flag = nebulon_b2_buying_market_open
        #           clr_country_flag = quaser_buying_market_open
        #           clr_country_flag = warrior_buying_market_open
        #           clr_country_flag = assault_1_buying_market_open
        #           clr_country_flag = assault_2_buying_market_open
        #           clr_country_flag = mc40_buying_market_open
        #           clr_country_flag = mc75_buying_market_open
        #           clr_country_flag = bothan_assault_buying_market_open
        #           clr_country_flag = mc80_home_one_buying_market_open
        #           clr_country_flag = starhawk_buying_market_open
        #           clr_country_flag = mc80_liberty_buying_market_open
        #           clr_country_flag = republic_star_destroyer_buying_market_open
        #           clr_country_flag = nebula_star_destroyer_buying_market_open
        #           clr_country_flag = MC90_buying_market_open
        #           clr_country_flag = dauntless_buying_market_open

        #           clr_country_flag = ipv_1_buying_market_open
        #           clr_country_flag = gozanti_buying_market_open
        #           clr_country_flag = raider_buying_market_open
        #           clr_country_flag = raider_2_buying_market_open
        #           clr_country_flag = lancer_buying_market_open
        #           clr_country_flag = Victory_buying_market_open
        #           clr_country_flag = arquitens_buying_market_open
        #           clr_country_flag = Interdictor_buying_market_open
        #           clr_country_flag = dreadnaught_buying_market_open
        #           clr_country_flag = Victory_2_buying_market_open
        #           clr_country_flag = praertor_buying_market_open
        #           clr_country_flag = Imperial_Star_Destroyer_buying_market_open
        #           clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
        #           clr_country_flag = resurgent_buying_market_open
        #           
        #       }
        #       select_cruisers_button_click = {
        #           erase_previous_ship_menu_selection = yes
        #           set_country_flag = cruiser_buying_market_open
        #           set_variable = { current_ic_cost_ships = 0 }
        #           set_variable = { current_price_market_buy_price = 0 }
        #           clr_country_flag = CR70_buying_market_open
        #           clr_country_flag = CR90_buying_market_open
        #           clr_country_flag = corona_buying_market_open
        #           clr_country_flag = pelta_buying_market_open
        #           clr_country_flag = mc30_buying_market_open
        #           clr_country_flag = nebulon_b_buying_market_open
        #           clr_country_flag = nebulon_b2_buying_market_open
        #           clr_country_flag = quaser_buying_market_open
        #           clr_country_flag = warrior_buying_market_open
        #           clr_country_flag = assault_1_buying_market_open
        #           clr_country_flag = assault_2_buying_market_open
        #           clr_country_flag = mc40_buying_market_open
        #           clr_country_flag = mc75_buying_market_open
        #           clr_country_flag = bothan_assault_buying_market_open
        #           clr_country_flag = mc80_home_one_buying_market_open
        #           clr_country_flag = starhawk_buying_market_open
        #           clr_country_flag = mc80_liberty_buying_market_open
        #           clr_country_flag = republic_star_destroyer_buying_market_open
        #           clr_country_flag = nebula_star_destroyer_buying_market_open
        #           clr_country_flag = MC90_buying_market_open
        #           clr_country_flag = dauntless_buying_market_open

        #           clr_country_flag = ipv_1_buying_market_open
        #           clr_country_flag = gozanti_buying_market_open
        #           clr_country_flag = raider_buying_market_open
        #           clr_country_flag = raider_2_buying_market_open
        #           clr_country_flag = lancer_buying_market_open
        #           clr_country_flag = Victory_buying_market_open
        #           clr_country_flag = arquitens_buying_market_open
        #           clr_country_flag = Interdictor_buying_market_open
        #           clr_country_flag = dreadnaught_buying_market_open
        #           clr_country_flag = Victory_2_buying_market_open
        #           clr_country_flag = praertor_buying_market_open
        #           clr_country_flag = Imperial_Star_Destroyer_buying_market_open
        #           clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
        #           clr_country_flag = resurgent_buying_market_open
        #       }
        #       select_star_destroyers_button_click = {
        #           erase_previous_ship_menu_selection = yes
        #           set_country_flag = star_destroyer_buying_market_open
        #           set_variable = { current_ic_cost_ships = 0 }
        #           set_variable = { current_price_market_buy_price = 0 }
        #           clr_country_flag = CR70_buying_market_open
        #           clr_country_flag = CR90_buying_market_open
        #           clr_country_flag = corona_buying_market_open
        #           clr_country_flag = pelta_buying_market_open
        #           clr_country_flag = mc30_buying_market_open
        #           clr_country_flag = nebulon_b_buying_market_open
        #           clr_country_flag = nebulon_b2_buying_market_open
        #           clr_country_flag = quaser_buying_market_open
        #           clr_country_flag = warrior_buying_market_open
        #           clr_country_flag = assault_1_buying_market_open
        #           clr_country_flag = assault_2_buying_market_open
        #           clr_country_flag = mc40_buying_market_open
        #           clr_country_flag = mc75_buying_market_open
        #           clr_country_flag = bothan_assault_buying_market_open
        #           clr_country_flag = mc80_home_one_buying_market_open
        #           clr_country_flag = starhawk_buying_market_open
        #           clr_country_flag = mc80_liberty_buying_market_open
        #           clr_country_flag = republic_star_destroyer_buying_market_open
        #           clr_country_flag = nebula_star_destroyer_buying_market_open
        #           clr_country_flag = MC90_buying_market_open
        #           clr_country_flag = dauntless_buying_market_open

        #           clr_country_flag = ipv_1_buying_market_open
        #           clr_country_flag = gozanti_buying_market_open
        #           clr_country_flag = raider_buying_market_open
        #           clr_country_flag = raider_2_buying_market_open
        #           clr_country_flag = lancer_buying_market_open
        #           clr_country_flag = Victory_buying_market_open
        #           clr_country_flag = arquitens_buying_market_open
        #           clr_country_flag = Interdictor_buying_market_open
        #           clr_country_flag = dreadnaught_buying_market_open
        #           clr_country_flag = Victory_2_buying_market_open
        #           clr_country_flag = praertor_buying_market_open
        #           clr_country_flag = Imperial_Star_Destroyer_buying_market_open
        #           clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
        #           clr_country_flag = resurgent_buying_market_open
        #       }
        #       #flag_producer_click = {
        #       #    var:manufacturing_country = {
        #       #        capital_scope = {
        #       #            ROOT = {
        #       #                goto_state = PREV
        #       #            }
        #       #        }
        #       #    }
        #       #}
        #   }
        #   triggers = {
        #       select_corvettes_button_click_enabled = {
        #           NOT = {
        #               has_country_flag = corvette_buying_market_open
        #           }
        #       }
        #       select_frigates_button_click_enabled = {
        #           NOT = {
        #               has_country_flag = frigate_buying_market_open
        #           }
        #       }
        #       select_cruisers_button_click_enabled = {
        #           NOT = {
        #               has_country_flag = cruiser_buying_market_open
        #           }
        #       }
        #       select_star_destroyers_button_click_enabled = {
        #           NOT = {
        #               has_country_flag = star_destroyer_buying_market_open
        #           }
        #       }
        #   }
        #}
    Marketplace_corvettes_rebel_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_corvettes_rebel_buttons"
        visible = {
            has_country_flag = corvette_buying_market_open
            has_country_flag = republic_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            CR70_click = {
                set_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                clr_country_flag = warrior_buying_market_open
                set_variable = { manufacturing_country = CEC.id }
                set_variable = { manufacturing_number = 913 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 913}
            }
            CR90_click = {
                set_country_flag = CR90_buying_market_open
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = warrior_buying_market_open
                set_variable = { manufacturing_country = CEC.id }
                set_variable = { manufacturing_number = 990 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 990}

            }
            warrior_click = {
                set_country_flag = warrior_buying_market_open
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                set_variable = { manufacturing_country = RPE.id }
                set_variable = { manufacturing_number = 1530 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 1530}
            }
        }
        triggers = {
            CR70_click_enabled = {
                NOT = {
                    has_country_flag = CR70_buying_market_open
                }
            }
            CR90_click_enabled = {
                NOT = {
                    has_country_flag = CR90_buying_market_open
                }
            }
            warrior_click_enabled = {
                NOT = {
                    has_country_flag = warrior_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_new_rep_corvette]"
            }
        }
    }
    Marketplace_frigate_rebel_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_frigate_rebel_buttons"
        visible = {
            has_country_flag = frigate_buying_market_open
            has_country_flag = republic_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            pelta_click = {
                set_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = corona_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 3200 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 3200}
            }
            MC30_click = {
                set_country_flag = mc30_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = corona_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { manufacturing_number = 4262 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 4262}
            }
            Nebulon_b_click = {
                set_country_flag = nebulon_b_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = corona_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 2829 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 2829}
            }
            Nebulon_b_2_click = {
                set_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = corona_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 2943 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 2943}
            }
            quaser_click = {
                set_country_flag = quaser_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = corona_buying_market_open
                set_variable = { manufacturing_country = SOR.id }
                set_variable = { manufacturing_number = 4300 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 4300}
            }
            corona_click = {
                set_country_flag = corona_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 2980 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 2980}
            }
        }
        triggers = {
            pelta_click_enabled = {
                NOT = {
                    has_country_flag = pelta_buying_market_open
                }
            }
            MC30_click_enabled = {
                NOT = {
                    has_country_flag = mc30_buying_market_open
                }
            }
            Nebulon_b_click_enabled = {
                NOT = {
                    has_country_flag = nebulon_b_buying_market_open
                }
            }
            Nebulon_b_2_click_enabled = {
                NOT = {
                    has_country_flag = nebulon_b2_buying_market_open
                }
            }
            quaser_click_enabled = {
                NOT = {
                    has_country_flag = quaser_buying_market_open
                }
            }
            corona_click_enabled = {
                NOT = {
                    has_country_flag = corona_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_reb_frigate]"
            }
        }
    }
    Marketplace_cruiser_rebel_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_cruiser_rebel_buttons"
        visible = {
            has_country_flag = cruiser_buying_market_open
            has_country_flag = republic_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            assault_1_click = {
                set_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                set_variable = { manufacturing_country = REN.id }
                set_variable = { manufacturing_number = 5421 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 5421}

            }
            assault_2_click = {
                set_country_flag = assault_2_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                set_variable = { manufacturing_country = REN.id }
                set_variable = { manufacturing_number = 5600 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 5600}

            }
            mc40_click = {
                set_country_flag = mc40_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { manufacturing_number = 5830 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 5830}
            }
            bothan_assault_click = {
                set_country_flag = bothan_assault_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                set_variable = { manufacturing_country = REN.id }
                set_variable = { manufacturing_number = 7340 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 7340}
            }
            mc75_click = {
                set_country_flag = mc75_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { manufacturing_number = 7540 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 7540}
            }
        }
        triggers = {
            assault_1_click_enabled = {
                NOT = {
                    has_country_flag = assault_1_buying_market_open
                }
            }
            assault_2_click_enabled = {
                NOT = {
                    has_country_flag = assault_2_buying_market_open
                }
            }
            mc40_click_enabled = {
                NOT = {
                    has_country_flag = mc40_buying_market_open
                }
            }
            mc75_click_enabled = {
                NOT = {
                    has_country_flag = mc75_buying_market_open
                }
            }
            bothan_assault_click_enabled = {
                NOT = {
                    has_country_flag = bothan_assault_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_reb_cruiser]"
            }
        }
    }
    Marketplace_battlecruiser_rebel_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_battlecruiser_rebel_buttons"
        visible = {
            has_country_flag = star_destroyer_buying_market_open
            has_country_flag = republic_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            mc80_liberty_click = {
                set_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { manufacturing_number = 10080 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 10080}
            }
            starhawk_click = {
                set_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = RPE.id }
                set_variable = { manufacturing_number = 12400 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 12400}
            }
            dauntless_click = {
                set_country_flag = dauntless_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                set_variable = { manufacturing_country = SOR.id }
                set_variable = { manufacturing_number = 13450 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 13450}
            }
            mc80_home_one_click = {
                set_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { manufacturing_number = 13200 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 13200}
            }
            republic_star_destroyer_click = {
                set_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = RPE.id }
                set_variable = { manufacturing_number = 13430 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 13430}
            }
            nebula_star_destroyer_click = {
                set_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = RPE.id }
                set_variable = { manufacturing_number = 14400 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 14400}
            }
            MC90_click = {
                set_country_flag = MC90_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { manufacturing_number = 7540 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 7540}
            }
        }
        triggers = {
            mc80_liberty_click_enabled = {
                NOT = {
                    has_country_flag = mc80_liberty_buying_market_open
                }
            }
            starhawk_click_enabled = {
                NOT = {
                    has_country_flag = starhawk_buying_market_open
                }
            }
            dauntless_click_enabled = {
                NOT = {
                    has_country_flag = dauntless_buying_market_open
                }
            }
            mc80_home_one_click_enabled = {
                NOT = {
                    has_country_flag = mc80_home_one_buying_market_open
                }
            }
            republic_star_destroyer_click_enabled = {
                NOT = {
                    has_country_flag = republic_star_destroyer_buying_market_open
                }
            }
            nebula_star_destroyer_click_enabled = {
                NOT = {
                    has_country_flag = nebula_star_destroyer_buying_market_open
                }
            }
            MC90_click_enabled = {
                NOT = {
                    has_country_flag = MC90_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_reb_battlecruiser]"
            }
        }
    }
    Marketplace_corvettes_imperial_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_corvettes_imperial_buttons"
        visible = {
            has_country_flag = corvette_buying_market_open
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            ipv_click = {
                set_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                set_variable = { manufacturing_country = SFS.id }
                set_variable = { manufacturing_number = 950 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 950}
            }
            gozanti_click = {
                set_country_flag = gozanti_buying_market_open
                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                set_variable = { manufacturing_country = CEC.id }
                set_variable = { manufacturing_number = 1260 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 1260}
            }
            raider_click = {
                set_country_flag = raider_buying_market_open
                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 1925 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 1925}
            }
            raider_2_click = {
                set_country_flag = raider_2_buying_market_open
                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { manufacturing_number = 1990 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 1990}
            }
        }
        triggers = {
            ipv_click_enabled = {
                NOT = {
                    has_country_flag = ipv_1_buying_market_open
                }
            }
            gozanti_click_enabled = {
                NOT = {
                    has_country_flag = gozanti_buying_market_open
                }
            }
            raider_click_enabled = {
                NOT = {
                    has_country_flag = raider_buying_market_open
                }
            }
            raider_2_click_enabled = {
                NOT = {
                    has_country_flag = raider_2_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_emp_corvette]"
            }
        }
    }
    Marketplace_frigate_imperial_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_frigate_imperial_buttons"
        visible = {
            has_country_flag = frigate_buying_market_open
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            lancer_click = {
                set_country_flag = lancer_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
            }
        }
        triggers = {
            lancer_click_enabled = {
                NOT = {
                    has_country_flag = lancer_buying_market_open
                }
            }
        }
    }
    Marketplace_cruiser_imperial_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_cruiser_imperial_buttons"
        visible = {
            has_country_flag = cruiser_buying_market_open
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            Arquitens_click = {
                set_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                set_variable = { manufacturing_number = 4800 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 4800}
                set_variable = { manufacturing_country = KUA.id }
            }
            Interdictor_click = {
                set_country_flag = interdictor_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                set_variable = { manufacturing_number = 5950 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 5950}
                set_variable = { manufacturing_country = SFS.id }
            }
            Dreadnaught_click = {
                set_country_flag = dreadnaught_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                set_variable = { manufacturing_number = 5200 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 5200}
                set_variable = { manufacturing_country = KUA.id }
            }
            Victory_click = {
                set_country_flag = Victory_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                set_variable = { manufacturing_number = 7400 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 7400}
                set_variable = { manufacturing_country = KUA.id }
            }
            Victory_2_click = {
                set_country_flag = Victory_2_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_buying_market_open
                set_variable = { manufacturing_number = 7940 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 7940}
                set_variable = { manufacturing_country = KUA.id }
            }
        }
        triggers = {
            Arquitens_click_enabled = {
                NOT = {
                    has_country_flag = arquitens_buying_market_open
                }
            }
            Interdictor_click_enabled = {
                NOT = {
                    has_country_flag = interdictor_buying_market_open
                }
            }
            Dreadnaught_click_enabled = {
                NOT = {
                    has_country_flag = dreadnaught_buying_market_open
                }
            }
            Victory_click_enabled = {
                NOT = {
                    has_country_flag = Victory_buying_market_open
                }
            }
            Victory_2_click_enabled = {
                NOT = {
                    has_country_flag = Victory_2_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_emp_cruiser]"
            }
        }
    }
    Marketplace_battlecruiser_imperial_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_battlecruiser_imperial_buttons"
        visible = {
            has_country_flag = star_destroyer_buying_market_open
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            Imperial_Star_Destroyer_click = {
                set_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
                clr_country_flag = praertor_buying_market_open
                set_variable = { manufacturing_number = 11005 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 11005}
                set_variable = { manufacturing_country = KUA.id }
            }
            Imperial_Star_Destroyer_1_click = {
                set_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = resurgent_buying_market_open
                clr_country_flag = praertor_buying_market_open
                set_variable = { manufacturing_number = 11850 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 11850}
                set_variable = { manufacturing_country = KUA.id }
            }
            resurgent_click = {
                set_country_flag = resurgent_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = praertor_buying_market_open
                set_variable = { manufacturing_number = 14503 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 14503}
                set_variable = { manufacturing_country = KUA.id }
            }
            praetor_click = {
                set_country_flag = praertor_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
                set_variable = { manufacturing_number = 14030 }
				set_variable = { current_price_market_buy_price = Global.ship_price_holder@root.manufacturing_number }
                set_variable = { current_ic_cost_ships = 14030}
                set_variable = { manufacturing_country = KUA.id }
            }
        }
        triggers = {
            Imperial_Star_Destroyer_click_enabled = {
                NOT = {
                    has_country_flag = Imperial_Star_Destroyer_buying_market_open
                }
            }
            Imperial_Star_Destroyer_1_click_enabled = {
                NOT = {
                    has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                }
            }
            resurgent_click_enabled = {
                NOT = {
                    has_country_flag = resurgent_buying_market_open
                }
            }
            praetor_click_enabled = {
                NOT = {
                    has_country_flag = praertor_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_emp_battlecruiser]"
            }
        }
    }
    Marketplace_mercs_main_buttons = { ## Different containers for easy of modding (copy paste of ships)
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_corvettes_imperial_buttons"
        visible = {
            has_country_flag = open_market_mercs
        }
        effects = {
            order_mercs_click = {
                if = {
                    limit = {
                        has_country_flag = selected_mandolorian_warriors
                    }
                    division_template = {
                        name = "Mandolorian Warriors"
                        is_locked = yes
                        force_allow_recruiting = yes
                        priority = 0
                        template_counter = 0
                        regiments = {
                            mandolorian_warriors = { x = 0 y = 0 }
                            mandolorian_warriors = { x = 0 y = 1 }
                            mandolorian_warriors = { x = 0 y = 2 }
                            mandolorian_warriors = { x = 0 y = 3 }
                            mandolorian_warriors = { x = 1 y = 0 }
                            mandolorian_warriors = { x = 1 y = 1 }
                            mandolorian_warriors = { x = 1 y = 2 }
                            mandolorian_warriors = { x = 1 y = 3 }
                        }
                        support = {
                        }
                    }
                    for_loop_effect = {
                        end = amount_to_be_produced
                        capital_scope = {
                            create_unit = {
                                division = "name = \"Mandolorian Warriors\" division_template = \"Mandolorian Warriors\" start_experience_factor = 1.0"
                                owner = PREV
                            }	
                        }
                    }
                    add_ideas = mandolorian_hired_mercs
                }
                if = {
                    limit = {
                        has_country_flag = selected_pirate_brigade
                    }
                    division_template = {
                        name = "Pirate Brigade"
                        is_locked = yes
                        force_allow_recruiting = yes
                        priority = 0
                        template_counter = 0
                        regiments = {
                            pirate_brigade = { x = 0 y = 0 }
                            pirate_brigade = { x = 0 y = 1 }
                            pirate_brigade = { x = 0 y = 2 }
                            pirate_brigade = { x = 0 y = 3 }
                            pirate_brigade = { x = 1 y = 0 }
                            pirate_brigade = { x = 1 y = 1 }
                            pirate_brigade = { x = 1 y = 2 }
                            pirate_brigade = { x = 1 y = 3 }
                        }
                        support = {
                        }
                    }
                    for_loop_effect = {
                        end = amount_to_be_produced
                        capital_scope = {
                            create_unit = {
                                division = "name = \"Pirate Brigade\" division_template = \"Pirate Brigade\" start_experience_factor = 1.0"
                                owner = PREV
                            }	
                        }
                    }
                    add_ideas = mandolorian_hired_mercs
                }
                if = {
                    limit = {
                        has_country_flag = selected_mistral_shadow_guard
                    }
                    division_template = {
                        name = "Mistral Shadow Guard"
                        is_locked = yes
                        force_allow_recruiting = yes
                        priority = 0
                        template_counter = 0
                        regiments = {
                            mistral_shadow_guard = { x = 0 y = 0 }
                            mistral_shadow_guard = { x = 0 y = 1 }
                            mistral_shadow_guard = { x = 0 y = 2 }
                            mistral_shadow_guard = { x = 0 y = 3 }
                            mistral_shadow_guard = { x = 1 y = 0 }
                            mistral_shadow_guard = { x = 1 y = 1 }
                            mistral_shadow_guard = { x = 1 y = 2 }
                            mistral_shadow_guard = { x = 1 y = 3 }
                        }
                        support = {
                        }
                    }
                    for_loop_effect = {
                        end = amount_to_be_produced
                        capital_scope = {
                            create_unit = {
                                division = "name = \"Mistral Shadow Guard\" division_template = \"Mistral Shadow Guard\" start_experience_factor = 1.0"
                                owner = PREV
                            }	
                        }
                    }
                    add_ideas = mandolorian_hired_mercs
                }
                if = {
                    limit = {
                        has_country_flag = selected_gamorrean_warriors
                    }
                    division_template = {
                        name = "Gamorrean Warriors"
                        is_locked = yes
                        force_allow_recruiting = yes
                        priority = 0
                        template_counter = 0
                        regiments = {
                            gamorrean_warriors = { x = 0 y = 0 }
                            gamorrean_warriors = { x = 0 y = 1 }
                            gamorrean_warriors = { x = 0 y = 2 }
                            gamorrean_warriors = { x = 0 y = 3 }
                            gamorrean_warriors = { x = 1 y = 0 }
                            gamorrean_warriors = { x = 1 y = 1 }
                            gamorrean_warriors = { x = 1 y = 2 }
                            gamorrean_warriors = { x = 1 y = 3 }
                        }
                        support = {
                        }
                    }
                    for_loop_effect = {
                        end = amount_to_be_produced
                        capital_scope = {
                            create_unit = {
                                division = "name = \"Gamorrean Warriors\" division_template = \"Gamorrean Warriors\" start_experience_factor = 1.0"
                                owner = PREV
                            }	
                        }
                    }
                    add_ideas = mandolorian_hired_mercs
                }
                if = {
                    limit = {
                        has_country_flag = selected_corporate_security
                    }
                    division_template = {
                        name = "Corporate Security"
                        is_locked = yes
                        force_allow_recruiting = yes
                        priority = 0
                        template_counter = 0
                        regiments = {
                            hired_mercs = { x = 0 y = 0 }
                            hired_mercs = { x = 0 y = 1 }
                            hired_mercs = { x = 0 y = 2 }
                            hired_mercs = { x = 0 y = 3 }
                            hired_mercs = { x = 1 y = 0 }
                            hired_mercs = { x = 1 y = 1 }
                            hired_mercs = { x = 1 y = 2 }
                            hired_mercs = { x = 1 y = 3 }
                        }
                        support = {
                        }
                    }
                    for_loop_effect = {
                        end = amount_to_be_produced
                        capital_scope = {
                            create_unit = {
                                division = "name = \"Corporate Security\" division_template = \"Corporate Security\" start_experience_factor = 1.0"
                                owner = PREV
                            }	
                        }
                    }
                }
            }
            select_division_button_click = {
                set_country_flag = mercs_divisions_open
                clr_country_flag = mercs_starfighters_open
                set_variable = {amount_to_be_produced = 1}
            }
            select_starfighters_button_click = {
                set_country_flag = mercs_starfighters_open
                clr_country_flag = mercs_divisions_open
                clr_country_flag = selected_mandolorian_warriors
                clr_country_flag = selected_pirate_brigade
                clr_country_flag = selected_mistral_shadow_guard
                clr_country_flag = selected_gamorrean_warriors
                clr_country_flag = selected_corporate_security
                set_variable = {amount_to_be_produced = 100}
            }
        }
        triggers = {
            select_division_button = {
                NOT = {
                    has_country_flag = mercs_divisions_open
                }
            }
            select_starfighters_button = {
                NOT = {
                    has_country_flag = mercs_starfighters_open
                }
            }
        }
    }
    Marketplace_select_mercs_division_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_mercs_division_buttons"
        visible = {
            has_country_flag = open_market_mercs
            has_country_flag = mercs_divisions_open
        }
        effects = {
            mandolorian_warriors_button_click = {
                set_country_flag = selected_mandolorian_warriors
                clr_country_flag = selected_pirate_brigade
                clr_country_flag = selected_mistral_shadow_guard
                clr_country_flag = selected_gamorrean_warriors
                clr_country_flag = selected_corporate_security
                set_variable = { manufacturing_number = 0 }
				set_variable = { current_price_market_buy_price = Global.mercs_price_holder@root.manufacturing_number }
                set_variable = { manufacturing_country = KUA.id }
            }
            pirate_brigade_button_click = {
                set_country_flag = selected_pirate_brigade
                clr_country_flag = selected_mandolorian_warriors
                clr_country_flag = selected_mistral_shadow_guard
                clr_country_flag = selected_gamorrean_warriors
                clr_country_flag = selected_corporate_security
                set_variable = { manufacturing_number = 1 }
				set_variable = { current_price_market_buy_price = Global.mercs_price_holder@root.manufacturing_number }
                set_variable = { manufacturing_country = KUA.id }
            }
            mistral_shadow_guard_button_click = {
                set_country_flag = selected_mistral_shadow_guard
                clr_country_flag = selected_pirate_brigade
                clr_country_flag = selected_mandolorian_warriors
                clr_country_flag = selected_gamorrean_warriors
                clr_country_flag = selected_corporate_security
                set_variable = { manufacturing_number = 2 }
				set_variable = { current_price_market_buy_price = Global.mercs_price_holder@root.manufacturing_number }
                set_variable = { manufacturing_country = KUA.id }
            }
            gamorrean_warriors_button_click = {
                set_country_flag = selected_gamorrean_warriors
                clr_country_flag = selected_pirate_brigade
                clr_country_flag = selected_mistral_shadow_guard
                clr_country_flag = selected_mandolorian_warriors
                clr_country_flag = selected_corporate_security
                set_variable = { manufacturing_number = 3 }
				set_variable = { current_price_market_buy_price = Global.mercs_price_holder@root.manufacturing_number }
                set_variable = { manufacturing_country = KUA.id }
            }
            corporate_security_button_click = {
                set_country_flag = selected_corporate_security
                clr_country_flag = selected_pirate_brigade
                clr_country_flag = selected_mistral_shadow_guard
                clr_country_flag = selected_gamorrean_warriors
                clr_country_flag = selected_mandolorian_warriors
                set_variable = { manufacturing_number = 4 }
				set_variable = { current_price_market_buy_price = Global.mercs_price_holder@root.manufacturing_number }
                set_variable = { manufacturing_country = KUA.id }
            }
        }
    }
    Marketplace_select_mercs_starfighter_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_mercs_starfighters_buttons"
        visible = {
            has_country_flag = open_market_mercs
            has_country_flag = mercs_starfighters_open
        }
        effects = {
            crimson_aces_button_click = {

            }
            rebel_privateer_button_click = {

            }
            pirate_starfighters_button_click = {

            }
            disgraced_imperial_fighters_button_click = {

            }
            havoc_bombers_button_click = {

            }
        }
    }
}   
 ################################################################################## BUYING SHIPS END #########################################################################
