scripted_gui = {
    Marketplace_main_selection = {
        context_type = player_context
        window_name = "Marketplace_buying_menu"
        visible = {
            check_variable = { open_market_click = 2}
        }
        effects = {
			exit_menu_click = {
                set_variable = { open_market_click = 1}
            }
            select_ground_forces_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_ground_forces
            }
            select_starfighters_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = starfighters_buying_market_open
            }
            select_ships_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_ships
            }
            select_droids_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_droids
            }
            select_mercs_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_mercs
            }
            select_medical_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_medical
            }
            select_entertainment_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_entertainment
            }
            select_resource_extraction_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_resource_extraction
            }
            select_raw_goods_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_raw_goods
            }
            select_republic_button_click = {
                erase_previous_ship_menu_faction_selection = yes
                set_country_flag = republic_market_open
            }
            select_neutral_button_click = {
                erase_previous_ship_menu_faction_selection = yes
                set_country_flag = neutral_market_open
            }
            select_imperial_button_click = {
                erase_previous_ship_menu_faction_selection = yes
                set_country_flag = imperial_market_open
            }
            country_flag_overlay_click = {
                var:manufacturing_country = {
                    capital_scope = {
                        ROOT = {
                            goto_state = PREV
                        }
                    }
                }
            }
            order_ship_click = {
                if = {
                    limit = {
                        has_country_flag = CR70_buying_market_open
                    }
                    set_country_flag = CR70_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = CR90_buying_market_open
                    }
                    set_country_flag = CR90_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = corona_buying_market_open
                    }
                    set_country_flag = corona_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = pelta_buying_market_open
                    }
                    set_country_flag = pelta_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = mc30_buying_market_open
                    }
                    set_country_flag = mc30_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b_buying_market_open
                    }
                    set_country_flag = nebulon_b_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b2_buying_market_open
                    }
                    set_country_flag = nebulon_b2_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = quaser_buying_market_open
                    }
                    set_country_flag = quaser_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = warrior_buying_market_open
                    }
                    set_country_flag = warrior_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = assault_1_buying_market_open
                    }
                    set_country_flag = assault_1_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = assault_2_buying_market_open
                    }
                    set_country_flag = assault_2_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = mc40_buying_market_open
                    }
                    set_country_flag = mc40_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = mc75_buying_market_open
                    }
                    set_country_flag = mc75_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = bothan_assault_buying_market_open
                    }
                    set_country_flag = bothan_assault_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = mc80_home_one_buying_market_open
                    }
                    set_country_flag = mc80_home_one_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = starhawk_buying_market_open
                    }
                    set_country_flag = starhawk_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = mc80_liberty_buying_market_open
                    }
                    set_country_flag = mc80_liberty_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = republic_star_destroyer_buying_market_open
                    }
                    set_country_flag = republic_star_destroyer_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = nebula_star_destroyer_buying_market_open
                    }
                    set_country_flag = nebula_star_destroyer_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = MC90_buying_market_open
                    }
                    set_country_flag = MC90_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = dauntless_buying_market_open
                    }
                    set_country_flag = dauntless_buying_market_order_in_progress
                }
                
                if = {
                    limit = {
                        has_country_flag = ipv_1_buying_market_open
                    }
                    set_country_flag = ipv_1_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = gozanti_buying_market_open
                    }
                    set_country_flag = gozanti_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = raider_buying_market_open
                    }
                    set_country_flag = raider_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = raider_2_buying_market_open
                    }
                    set_country_flag = raider_2_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = lancer_buying_market_open
                    }
                    set_country_flag = lancer_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = Victory_buying_market_open
                    }
                    set_country_flag = Victory_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = arquitens_buying_market_open
                    }
                    set_country_flag = arquitens_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = Interdictor_buying_market_open
                    }
                    set_country_flag = Interdictor_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = dreadnaught_buying_market_open
                    }
                    set_country_flag = dreadnaught_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = Victory_2_buying_market_open
                    }
                    set_country_flag = Victory_2_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = praertor_buying_market_open
                    }
                    set_country_flag = praertor_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_open
                    }
                    set_country_flag = Imperial_Star_Destroyer_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                    }
                    set_country_flag = Imperial_Star_Destroyer_1_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = resurgent_buying_market_open
                    }
                    set_country_flag = resurgent_buying_market_order_in_progress
                }
                if = {
                    limit = {
                        has_country_flag = CR70_buying_market_open
                    }
                    CEC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@913^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@913 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@913 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@913 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = CR90_buying_market_open
                    }
                    CEC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@990^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@990 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@990 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@990 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = warrior_buying_market_open
                    }
                    RPE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@1530^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@1530 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@1530 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@1530 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                    
                }
                if = {
                    limit = {
                        has_country_flag = assault_1_buying_market_open
                    }
                    REN = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@5421^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@5421 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@5421 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@5421 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = assault_2_buying_market_open
                    }
                    REN = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@5600^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@5600 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@5600 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@5600 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mc40_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@5830^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@5830 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@5830 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@5830 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mc75_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@7540^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@7540 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@7540 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@7540 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = pelta_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@3200^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@3200 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@3200 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@3200 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mc30_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@4262^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@4262 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@4262 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@4262 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@2829^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@2829 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@2829 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@2829 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b2_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@2943^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@2943 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@2943 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@2943 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = quaser_buying_market_open
                    }
                    SOR = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@4300^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@4300 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@4300 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@4300 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = corona_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@2980^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@2980 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@2980 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@2980 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_liberty_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@10080^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@10080 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@10080 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@10080 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = starhawk_buying_market_open
                    }
                    RPE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@12400^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@12400 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@12400 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@12400 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_home_one_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@13200^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@13200 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@13200 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@13200 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = republic_star_destroyer_buying_market_open
                    }
                    RPE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@13430^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@13430 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@13430 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@13430 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = nebula_star_destroyer_buying_market_open
                    }
                    RPE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@14400^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@14400 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@14400 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@14400 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = MC90_buying_market_open
                    }
                    CAL = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@10630^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@10630 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@10630 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@10630 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = dauntless_buying_market_open
                    }
                    SOR = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@13450^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@13450 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@13450 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@13450 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = ipv_1_buying_market_open
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@950^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@950 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@950 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@950 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = gozanti_buying_market_open
                    }
                    CEC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@1260^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@1260 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@1260 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@1260 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = raider_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@1925^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@1925 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@1925 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@1925 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = raider_2_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@1990^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@1990 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@1990 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@1990 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = lancer_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@2700^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@2700 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@2700 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@2700 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = arquitens_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@4800^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@4800 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@4800 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@4800 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = Interdictor_buying_market_open
                    }
                    SFS = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@5950^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@5950 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@5950 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@5950 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = dreadnaught_buying_market_open
                    }
                    REN = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@5200^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@5200 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@5200 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@5200 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@7400^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@7400 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@7400 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@7400 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_2_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@7940^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@7940 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@7940 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@7940 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@11005^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@11005 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@11005 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@11005 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@11850^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@11850 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@11850 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@11850 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = resurgent_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@14503^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@14503 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@14503 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@14503 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = praertor_buying_market_open
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = ship_amount_contract_holder@14030^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {ship_counting_to_zero_holder@14030 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = ship_amount_contract_holder@14030 value = prev.amount_to_be_produced }
                        add_to_array = { array = ship_tag_holder@14030 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_ships }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                ####################### Fighters ##################################

                if = {
                    limit = {
                        has_country_flag = x_wing_selected
                        has_country_flag = level_1_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@6^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@6 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@6 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@6 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = x_wing_selected
                        has_country_flag = level_2_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@7^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@7 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@7 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@7 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = x_wing_selected
                        has_country_flag = level_3_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@8^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@8 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@8 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@8 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = e_wing_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@2^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@2 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@2 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@2 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = a_wing_selected
                        has_country_flag = level_1_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@3^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@3 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@3 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@3 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }
                if = {
                    limit = {
                        has_country_flag = a_wing_selected
                        has_country_flag = level_2_selected
                    }
                    KUA = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@4^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@4 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@4 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@4 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = k_wing_selected
                    }
                    KOE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@5^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@5 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@5 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@5 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = y_wing_selected
                        has_country_flag = level_1_selected
                    }
                    KOE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@9^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@9 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@9 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@9 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = y_wing_selected
                        has_country_flag = level_2_selected
                    }
                    KOE = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@10^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@10 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@10 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@10 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced }
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = b_wing_selected
                        has_country_flag = level_1_selected
                    }
                    SLK = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@11^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@11 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@11 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@11 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = b_wing_selected
                        has_country_flag = level_2_selected
                    }
                    SLK = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@12^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@12 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@12 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@12 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = u_wing_selected
                        has_country_flag = level_1_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@0^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@0 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@0 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@0 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                if = {
                    limit = {
                        has_country_flag = u_wing_selected
                        has_country_flag = level_2_selected
                    }
                    INC = {
                        if = {
                            limit = {
                                check_variable = {
                                    var = starfighter_amount_contract_holder@1^num
                                    value = 0
                                    compare = equals
                                }
                            }
                            set_variable = {starfighter_counting_to_zero_holder@1 = prev.amount_to_be_produced}
                        }
                        add_to_array = { array = starfighter_amount_contract_holder@1 value = prev.amount_to_be_produced }
                        add_to_array = { array = starfighter_tag_holder@1 value = ROOT.id }
                    }
                    set_temp_variable = {price_to_subtract_from_buyer = amount_to_be_produced}
                    multiply_temp_variable = { price_to_subtract_from_buyer = current_price_market_buy_starfighters }
                    subtract_from_variable = {currency_amount^primary_currency = price_to_subtract_from_buyer }
                }

                set_variable = { amount_to_be_produced = 1 }
            }
        }
        triggers = {
            top_cover_visible = {
                NOT = {
                    has_country_flag = open_market_ships
                }
            }
            upgrade_cover_visible = {
                NOT = {
                    has_country_flag = open_market_ships
                }
            }
            move_up_button_visible = {
                NOT = {
                    has_country_flag = open_third_tab_lazy
                }
            }
            move_down_button_visible = {
                NOT = {
                    has_country_flag = open_first_tab_lazy
                }
            }
            select_ground_forces_click_enabled = {
                NOT = {
                    has_country_flag = open_market_ground_forces
                }
            }
            select_ships_click_enabled = {
                NOT = {
                  has_country_flag = open_market_ships
                }
            }
            select_starfighters_click_enabled = {
                NOT = {
                    has_country_flag = starfighters_buying_market_open
                }
            }
            select_droids_click_enabled = {
                NOT = {
                    has_country_flag = open_market_droids
                }
            }
            select_republic_button_click_enabled = {
                NOT = {
                    has_country_flag = republic_market_open
                }
                has_government = democratic
            }
            select_neutral_button_click_enabled = {
                NOT = {
                    has_country_flag = neutral_market_open
                }
            }
            select_imperial_button_click_enabled = {
                NOT = {
                    has_country_flag = imperial_market_open
                }
                has_government = imperial
            }
            order_ship_click_enabled = {
                if = {
                    limit = {
                        has_country_flag = CR70_buying_market_open
                    }
                    NOT = {
                        has_country_flag = CR70_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = CR90_buying_market_open
                    }
                    NOT = {
                        has_country_flag = CR90_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = corona_buying_market_open
                    }
                    NOT = {
                        has_country_flag = corona_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = pelta_buying_market_open
                    }
                    NOT = {
                        has_country_flag = pelta_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc30_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc30_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebulon_b_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebulon_b2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = quaser_buying_market_open
                    }
                    NOT = {
                        has_country_flag = quaser_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = warrior_buying_market_open
                    }
                    NOT = {
                        has_country_flag = warrior_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = assault_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = assault_1_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = assault_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = assault_2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc40_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc40_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc75_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc75_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = bothan_assault_buying_market_open
                    }
                    NOT = {
                        has_country_flag = bothan_assault_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_home_one_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc80_home_one_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = starhawk_buying_market_open
                    }
                    NOT = {
                        has_country_flag = starhawk_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_liberty_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc80_liberty_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = republic_star_destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = republic_star_destroyer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebula_star_destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebula_star_destroyer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = MC90_buying_market_open
                    }
                    NOT = {
                        has_country_flag = MC90_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = dauntless_buying_market_open
                    }
                    NOT = {
                        has_country_flag = dauntless_buying_market_order_in_progress
                    }
                }
                
                if = {
                    limit = {
                        has_country_flag = ipv_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = ipv_1_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = gozanti_buying_market_open
                    }
                    NOT = {
                        has_country_flag = gozanti_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = raider_buying_market_open
                    }
                    NOT = {
                        has_country_flag = raider_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = raider_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = raider_2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = lancer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = lancer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Victory_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = arquitens_buying_market_open
                    }
                    NOT = {
                        has_country_flag = arquitens_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Interdictor_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Interdictor_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = dreadnaught_buying_market_open
                    }
                    NOT = {
                        has_country_flag = dreadnaught_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Victory_2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = praertor_buying_market_open
                    }
                    NOT = {
                        has_country_flag = praertor_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = resurgent_buying_market_open
                    }
                    NOT = {
                        has_country_flag = resurgent_buying_market_order_in_progress
                    }
                }
            }
        }
        properties = {
            flag_producer = {
                image = "[?manufacturing_country.GetFlag]"
            }
        }
    }
    Marketplace_buying_starfighters_reb_main = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_starfighters"
        visible = {
            has_country_flag = starfighters_buying_market_open
        }
        effects = {
            x_wing_click = {
                set_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = INC.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@6 }
                set_variable = { current_ic_cost_ships = 990}
            }
            y_wing_click = {
                clr_country_flag = x_wing_selected
                set_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = KOE.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@2 }
                set_variable = { current_ic_cost_ships = 990}
            }
            a_wing_click = {
                clr_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                set_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@3 }
                set_variable = { current_ic_cost_ships = 990}
            }
            b_wing_click = {
                clr_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                set_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = SLK.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@11 }
                set_variable = { current_ic_cost_ships = 990}
            }
            e_wing_click = {
                clr_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                set_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = INC.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@2 }
                set_variable = { current_ic_cost_ships = 990}
            }
            k_wing_click = {
                clr_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                set_country_flag = k_wing_selected
                clr_country_flag = u_wing_selected
                set_variable = { manufacturing_country = KOE.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@5 }
                set_variable = { current_ic_cost_ships = 990}
            }
            u_wing_click = {
                clr_country_flag = x_wing_selected
                clr_country_flag = y_wing_selected
                clr_country_flag = a_wing_selected
                clr_country_flag = b_wing_selected
                clr_country_flag = e_wing_selected
                clr_country_flag = k_wing_selected
                set_country_flag = u_wing_selected
                set_variable = { manufacturing_country = INC.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@6 }
                set_variable = { current_ic_cost_ships = 990}
            }
            level_1_click = {
                set_country_flag = level_1_selected
                clr_country_flag = level_2_selected
                clr_country_flag = level_3_selected
            }
            level_2_click = {
                set_country_flag = level_2_selected
                clr_country_flag = level_1_selected
                clr_country_flag = level_3_selected
            }
            level_3_click = {
                set_country_flag = level_3_selected
                clr_country_flag = level_1_selected
                clr_country_flag = level_2_selected
            }
            #level_4_click = {
            #    set_country_flag = level_4_selected
            #}
        }
        triggers = {
            x_wing_click_enabled = {
                NOT = {
                    has_country_flag = x_wing_selected
                }
            }
            y_wing_click_enabled = {
                NOT = {
                    has_country_flag = y_wing_selected
                }
            }
            a_wing_click_enabled = {
                NOT = {
                    has_country_flag = a_wing_selected
                }
            }
            b_wing_click_enabled = {
                NOT = {
                    has_country_flag = b_wing_selected
                }
            }
            e_wing_click_enabled = {
                NOT = {
                    has_country_flag = e_wing_selected
                }
            }
            k_wing_click_enabled = {
                NOT = {
                    has_country_flag = k_wing_selected
                }
            }
            u_wing_click_enabled = {
                NOT = {
                    has_country_flag = u_wing_selected
                }
            }
            level_2_visible = {
                OR = {
                    has_country_flag = u_wing_selected
                    has_country_flag = a_wing_selected
                    has_country_flag = x_wing_selected
                    has_country_flag = y_wing_selected
                    has_country_flag = b_wing_selected
                }
            }
            level_3_visible = {
                OR = {
                    has_country_flag = y_wing_selected
                }
            }
            level_4_visible = {
               #OR = {
               #    has_country_flag = b_wing_selected
               #}
            }
            level_1_click_enabled = {
                NOT = {
                    has_country_flag = level_1_selected
                }
            }
            level_2_click_enabled = {
                NOT = {
                    has_country_flag = level_2_selected
                }
            }
            level_3_click_enabled = {
                NOT = {
                    has_country_flag = level_3_selected
                }
            }
            level_4_click_enabled = {
                NOT = {
                    has_country_flag = level_4_selected
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_reb_starfighter]"
            }
        }
    }
    Marketplace_buying_ships_main = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_ships"
        visible = {
            has_country_flag = open_market_ships
        }
        effects = {
            right_click_market_click = {
                add_to_variable = { amount_to_be_produced = 1 }
            }
            left_click_market_click = {
                subtract_from_variable = { amount_to_be_produced = 1 }
            }
            select_corvettes_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = corvette_buying_market_open
                set_variable = { current_ic_cost_ships = 0 }
                set_variable = { current_price_market_buy_ships = 0 }
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                clr_country_flag = corona_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = warrior_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open

                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                clr_country_flag = lancer_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                clr_country_flag = praertor_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
            }
            select_frigates_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = frigate_buying_market_open
                set_variable = { current_ic_cost_ships = 0 }
                set_variable = { current_price_market_buy_ships = 0 }
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                clr_country_flag = corona_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = warrior_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open

                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                clr_country_flag = lancer_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                clr_country_flag = praertor_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
                
            }
            select_cruisers_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = cruiser_buying_market_open
                set_variable = { current_ic_cost_ships = 0 }
                set_variable = { current_price_market_buy_ships = 0 }
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                clr_country_flag = corona_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = warrior_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open

                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                clr_country_flag = lancer_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                clr_country_flag = praertor_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
            }
            select_star_destroyers_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = star_destroyer_buying_market_open
                set_variable = { current_ic_cost_ships = 0 }
                set_variable = { current_price_market_buy_ships = 0 }
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                clr_country_flag = corona_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = warrior_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open

                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                clr_country_flag = lancer_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                clr_country_flag = praertor_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
            }
            #flag_producer_click = {
            #    var:manufacturing_country = {
            #        capital_scope = {
            #            ROOT = {
            #                goto_state = PREV
            #            }
            #        }
            #    }
            #}
        }
        triggers = {
            select_corvettes_button_click_enabled = {
                NOT = {
                    has_country_flag = corvette_buying_market_open
                }
            }
            select_frigates_button_click_enabled = {
                NOT = {
                    has_country_flag = frigate_buying_market_open
                }
            }
            select_cruisers_button_click_enabled = {
                NOT = {
                    has_country_flag = cruiser_buying_market_open
                }
            }
            select_star_destroyers_button_click_enabled = {
                NOT = {
                    has_country_flag = star_destroyer_buying_market_open
                }
            }
            right_click_market_click_enabled = {
                NOT = {
                    check_variable = { amount_to_be_produced = 5 }
                }
            }
            left_click_market_click_enabled = {
                NOT = {
                    check_variable = { amount_to_be_produced = 1 }
                }
            }
            amount_in_queue_in_front_visible = {
                if = {
                    limit = {
                        has_country_flag = CR70_buying_market_open
                    }
                    has_country_flag = CR70_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = CR90_buying_market_open
                    }
                    has_country_flag = CR90_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = corona_buying_market_open
                    }
                    has_country_flag = corona_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = pelta_buying_market_open
                    }
                    has_country_flag = pelta_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = mc30_buying_market_open
                    }
                    has_country_flag = mc30_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = nebulon_b_buying_market_open
                    }
                    has_country_flag = nebulon_b_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = nebulon_b2_buying_market_open
                    }
                    has_country_flag = nebulon_b2_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = quaser_buying_market_open
                    }
                    has_country_flag = quaser_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = warrior_buying_market_open
                    }
                    has_country_flag = warrior_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = assault_1_buying_market_open
                    }
                    has_country_flag = assault_1_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = assault_2_buying_market_open
                    }
                    has_country_flag = assault_2_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = mc40_buying_market_open
                    }
                    has_country_flag = mc40_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = mc75_buying_market_open
                    }
                    has_country_flag = mc75_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = bothan_assault_buying_market_open
                    }
                    has_country_flag = bothan_assault_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = mc80_home_one_buying_market_open
                    }
                    has_country_flag = mc80_home_one_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = starhawk_buying_market_open
                    }
                    has_country_flag = starhawk_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = mc80_liberty_buying_market_open
                    }
                    has_country_flag = mc80_liberty_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = republic_star_destroyer_buying_market_open
                    }
                    has_country_flag = republic_star_destroyer_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = nebula_star_destroyer_buying_market_open
                    }
                    has_country_flag = nebula_star_destroyer_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = MC90_buying_market_open
                    }
                    has_country_flag = MC90_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = dauntless_buying_market_open
                    }
                    has_country_flag = dauntless_buying_market_order_in_progress
                }
                else_if = {
                    limit = {
                        has_country_flag = ipv_1_buying_market_open
                    }
                    has_country_flag = ipv_1_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = gozanti_buying_market_open
                    }
                    has_country_flag = gozanti_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = raider_buying_market_open
                    }
                    has_country_flag = raider_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = raider_2_buying_market_open
                    }
                    has_country_flag = raider_2_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = lancer_buying_market_open
                    }
                    has_country_flag = lancer_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = Victory_buying_market_open
                    }
                    has_country_flag = Victory_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = arquitens_buying_market_open
                    }
                    has_country_flag = arquitens_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = Interdictor_buying_market_open
                    }
                    has_country_flag = Interdictor_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = dreadnaught_buying_market_open
                    }
                    has_country_flag = dreadnaught_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = Victory_2_buying_market_open
                    }
                    has_country_flag = Victory_2_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = praertor_buying_market_open
                    }
                    has_country_flag = praertor_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_open
                    }
                    has_country_flag = Imperial_Star_Destroyer_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                    }
                    has_country_flag = Imperial_Star_Destroyer_1_buying_market_order_in_progress
                }else_if = {
                    limit = {
                        has_country_flag = resurgent_buying_market_open
                    }
                    has_country_flag = resurgent_buying_market_order_in_progress
                }else = {
                    always = no
                }
            }
            amount_in_queue_visible = {
                 if = {
                    limit = {
                        has_country_flag = CR70_buying_market_open
                    }
                    NOT = {
                        has_country_flag = CR70_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = CR90_buying_market_open
                    }
                    NOT = {
                        has_country_flag = CR90_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = corona_buying_market_open
                    }
                    NOT = {
                        has_country_flag = corona_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = pelta_buying_market_open
                    }
                    NOT = {
                        has_country_flag = pelta_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc30_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc30_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebulon_b_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebulon_b2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebulon_b2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = quaser_buying_market_open
                    }
                    NOT = {
                        has_country_flag = quaser_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = warrior_buying_market_open
                    }
                    NOT = {
                        has_country_flag = warrior_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = assault_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = assault_1_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = assault_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = assault_2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc40_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc40_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc75_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc75_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = bothan_assault_buying_market_open
                    }
                    NOT = {
                        has_country_flag = bothan_assault_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_home_one_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc80_home_one_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = starhawk_buying_market_open
                    }
                    NOT = {
                        has_country_flag = starhawk_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = mc80_liberty_buying_market_open
                    }
                    NOT = {
                        has_country_flag = mc80_liberty_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = republic_star_destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = republic_star_destroyer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = nebula_star_destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = nebula_star_destroyer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = MC90_buying_market_open
                    }
                    NOT = {
                        has_country_flag = MC90_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = dauntless_buying_market_open
                    }
                    NOT = {
                        has_country_flag = dauntless_buying_market_order_in_progress
                    }
                }
                
                if = {
                    limit = {
                        has_country_flag = ipv_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = ipv_1_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = gozanti_buying_market_open
                    }
                    NOT = {
                        has_country_flag = gozanti_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = raider_buying_market_open
                    }
                    NOT = {
                        has_country_flag = raider_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = raider_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = raider_2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = lancer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = lancer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Victory_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = arquitens_buying_market_open
                    }
                    NOT = {
                        has_country_flag = arquitens_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Interdictor_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Interdictor_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = dreadnaught_buying_market_open
                    }
                    NOT = {
                        has_country_flag = dreadnaught_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Victory_2_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Victory_2_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = praertor_buying_market_open
                    }
                    NOT = {
                        has_country_flag = praertor_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Imperial_Star_Destroyer_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                    }
                    NOT = {
                        has_country_flag = Imperial_Star_Destroyer_1_buying_market_order_in_progress
                    }
                }
                if = {
                    limit = {
                        has_country_flag = resurgent_buying_market_open
                    }
                    NOT = {
                        has_country_flag = resurgent_buying_market_order_in_progress
                    }
                }
            }
        }
    }
    Marketplace_corvettes_rebel_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_corvettes_rebel_buttons"
        visible = {
            has_country_flag = corvette_buying_market_open
            has_country_flag = republic_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            CR70_click = {
                set_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                clr_country_flag = warrior_buying_market_open
                set_variable = { manufacturing_country = CEC.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@913 }
                set_variable = { current_ic_cost_ships = 913}
            }
            CR90_click = {
                set_country_flag = CR90_buying_market_open
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = warrior_buying_market_open
                set_variable = { manufacturing_country = CEC.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@990 }
                set_variable = { current_ic_cost_ships = 990}

            }
            warrior_click = {
                set_country_flag = warrior_buying_market_open
                clr_country_flag = CR70_buying_market_open
                clr_country_flag = CR90_buying_market_open
                set_variable = { manufacturing_country = RPE.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@1530 }
                set_variable = { current_ic_cost_ships = 1530}
            }
        }
        triggers = {
            CR70_click_enabled = {
                NOT = {
                    has_country_flag = CR70_buying_market_open
                }
            }
            CR90_click_enabled = {
                NOT = {
                    has_country_flag = CR90_buying_market_open
                }
            }
            warrior_click_enabled = {
                NOT = {
                    has_country_flag = warrior_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_new_rep_corvette]"
            }
        }
    }
    Marketplace_frigate_rebel_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_frigate_rebel_buttons"
        visible = {
            has_country_flag = frigate_buying_market_open
            has_country_flag = republic_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            pelta_click = {
                set_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = corona_buying_market_open
                set_variable = { manufacturing_country = REN.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@3200 }
                set_variable = { current_ic_cost_ships = 3200}
            }
            MC30_click = {
                set_country_flag = mc30_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = corona_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@4262 }
                set_variable = { current_ic_cost_ships = 4262}
            }
            Nebulon_b_click = {
                set_country_flag = nebulon_b_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = corona_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@2829 }
                set_variable = { current_ic_cost_ships = 2829}
            }
            Nebulon_b_2_click = {
                set_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = quaser_buying_market_open
                clr_country_flag = corona_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@2943 }
                set_variable = { current_ic_cost_ships = 2943}
            }
            quaser_click = {
                set_country_flag = quaser_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = corona_buying_market_open
                set_variable = { manufacturing_country = SOR.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@4300 }
                set_variable = { current_ic_cost_ships = 4300}
            }
            corona_click = {
                set_country_flag = corona_buying_market_open
                clr_country_flag = pelta_buying_market_open
                clr_country_flag = mc30_buying_market_open
                clr_country_flag = nebulon_b_buying_market_open
                clr_country_flag = nebulon_b2_buying_market_open
                clr_country_flag = quaser_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@2980 }
                set_variable = { current_ic_cost_ships = 2980}
            }
        }
        triggers = {
            pelta_click_enabled = {
                NOT = {
                    has_country_flag = pelta_buying_market_open
                }
            }
            MC30_click_enabled = {
                NOT = {
                    has_country_flag = mc30_buying_market_open
                }
            }
            Nebulon_b_click_enabled = {
                NOT = {
                    has_country_flag = nebulon_b_buying_market_open
                }
            }
            Nebulon_b_2_click_enabled = {
                NOT = {
                    has_country_flag = nebulon_b2_buying_market_open
                }
            }
            quaser_click_enabled = {
                NOT = {
                    has_country_flag = quaser_buying_market_open
                }
            }
            corona_click_enabled = {
                NOT = {
                    has_country_flag = corona_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_reb_frigate]"
            }
        }
    }
    Marketplace_cruiser_rebel_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_cruiser_rebel_buttons"
        visible = {
            has_country_flag = cruiser_buying_market_open
            has_country_flag = republic_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            assault_1_click = {
                set_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                set_variable = { manufacturing_country = REN.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@5421 }
                set_variable = { current_ic_cost_ships = 5421}

            }
            assault_2_click = {
                set_country_flag = assault_2_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                set_variable = { manufacturing_country = REN.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@5600 }
                set_variable = { current_ic_cost_ships = 5600}

            }
            mc40_click = {
                set_country_flag = mc40_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@5830 }
                set_variable = { current_ic_cost_ships = 5830}
            }
            bothan_assault_click = {
                set_country_flag = bothan_assault_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = mc75_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                set_variable = { manufacturing_country = REN.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@7340 }
                set_variable = { current_ic_cost_ships = 7340}
            }
            mc75_click = {
                set_country_flag = mc75_buying_market_open
                clr_country_flag = assault_1_buying_market_open
                clr_country_flag = assault_2_buying_market_open
                clr_country_flag = mc40_buying_market_open
                clr_country_flag = bothan_assault_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@7540 }
                set_variable = { current_ic_cost_ships = 7540}
            }
        }
        triggers = {
            assault_1_click_enabled = {
                NOT = {
                    has_country_flag = assault_1_buying_market_open
                }
            }
            assault_2_click_enabled = {
                NOT = {
                    has_country_flag = assault_2_buying_market_open
                }
            }
            mc40_click_enabled = {
                NOT = {
                    has_country_flag = mc40_buying_market_open
                }
            }
            mc75_click_enabled = {
                NOT = {
                    has_country_flag = mc75_buying_market_open
                }
            }
            bothan_assault_click_enabled = {
                NOT = {
                    has_country_flag = bothan_assault_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_reb_cruiser]"
            }
        }
    }
    Marketplace_battlecruiser_rebel_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_battlecruiser_rebel_buttons"
        visible = {
            has_country_flag = star_destroyer_buying_market_open
            has_country_flag = republic_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            mc80_liberty_click = {
                set_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@10080 }
                set_variable = { current_ic_cost_ships = 10080}
            }
            starhawk_click = {
                set_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = RPE.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@12400 }
                set_variable = { current_ic_cost_ships = 12400}
            }
            dauntless_click = {
                set_country_flag = dauntless_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                set_variable = { manufacturing_country = SOR.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@13450 }
                set_variable = { current_ic_cost_ships = 13450}
            }
            mc80_home_one_click = {
                set_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@13200 }
                set_variable = { current_ic_cost_ships = 13200}
            }
            republic_star_destroyer_click = {
                set_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = RPE.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@13430 }
                set_variable = { current_ic_cost_ships = 13430}
            }
            nebula_star_destroyer_click = {
                set_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = MC90_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = RPE.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@14400 }
                set_variable = { current_ic_cost_ships = 14400}
            }
            MC90_click = {
                set_country_flag = MC90_buying_market_open
                clr_country_flag = starhawk_buying_market_open
                clr_country_flag = mc80_liberty_buying_market_open
                clr_country_flag = mc80_home_one_buying_market_open
                clr_country_flag = republic_star_destroyer_buying_market_open
                clr_country_flag = nebula_star_destroyer_buying_market_open
                clr_country_flag = dauntless_buying_market_open
                set_variable = { manufacturing_country = CAL.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@7540 }
                set_variable = { current_ic_cost_ships = 7540}
            }
        }
        triggers = {
            mc80_liberty_click_enabled = {
                NOT = {
                    has_country_flag = mc80_liberty_buying_market_open
                }
            }
            starhawk_click_enabled = {
                NOT = {
                    has_country_flag = starhawk_buying_market_open
                }
            }
            dauntless_click_enabled = {
                NOT = {
                    has_country_flag = dauntless_buying_market_open
                }
                subtract_from_variable = {currency_amount^primary_currency = price_of_the_item }
            }
            mc80_home_one_click_enabled = {
                NOT = {
                    has_country_flag = mc80_home_one_buying_market_open
                }
            }
            republic_star_destroyer_click_enabled = {
                NOT = {
                    has_country_flag = republic_star_destroyer_buying_market_open
                }
            }
            nebula_star_destroyer_click_enabled = {
                NOT = {
                    has_country_flag = nebula_star_destroyer_buying_market_open
                }
            }
            MC90_click_enabled = {
                NOT = {
                    has_country_flag = MC90_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_reb_battlecruiser]"
            }
        }
    }
    Marketplace_corvettes_imperial_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_corvettes_imperial_buttons"
        visible = {
            has_country_flag = corvette_buying_market_open
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            ipv_click = {
                set_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                set_variable = { manufacturing_country = SFS.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@950 }
                set_variable = { current_ic_cost_ships = 950}
            }
            gozanti_click = {
                set_country_flag = gozanti_buying_market_open
                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = raider_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                set_variable = { manufacturing_country = CEC.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@1260 }
                set_variable = { current_ic_cost_ships = 1260}
            }
            raider_click = {
                set_country_flag = raider_buying_market_open
                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_2_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@1925 }
                set_variable = { current_ic_cost_ships = 1925}
            }
            raider_2_click = {
                set_country_flag = raider_2_buying_market_open
                clr_country_flag = ipv_1_buying_market_open
                clr_country_flag = gozanti_buying_market_open
                clr_country_flag = raider_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@1990 }
                set_variable = { current_ic_cost_ships = 1990}
            }
        }
        triggers = {
            ipv_click_enabled = {
                NOT = {
                    has_country_flag = ipv_1_buying_market_open
                }
            }
            gozanti_click_enabled = {
                NOT = {
                    has_country_flag = gozanti_buying_market_open
                }
            }
            raider_click_enabled = {
                NOT = {
                    has_country_flag = raider_buying_market_open
                }
            }
            raider_2_click_enabled = {
                NOT = {
                    has_country_flag = raider_2_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_emp_corvette]"
            }
        }
    }
    Marketplace_frigate_imperial_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_frigate_imperial_buttons"
        visible = {
            has_country_flag = frigate_buying_market_open
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            lancer_click = {
                set_country_flag = lancer_buying_market_open
                set_variable = { manufacturing_country = KUA.id }
            }
        }
        triggers = {
            lancer_click_enabled = {
                NOT = {
                    has_country_flag = lancer_buying_market_open
                }
            }
        }
    }
    Marketplace_cruiser_imperial_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_cruiser_imperial_buttons"
        visible = {
            has_country_flag = cruiser_buying_market_open
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            Arquitens_click = {
                set_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@4800 }
                set_variable = { current_ic_cost_ships = 4800}
                set_variable = { manufacturing_country = KUA.id }
            }
            Interdictor_click = {
                set_country_flag = interdictor_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@5950 }
                set_variable = { current_ic_cost_ships = 5950}
                set_variable = { manufacturing_country = SFS.id }
            }
            Dreadnaught_click = {
                set_country_flag = dreadnaught_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = Victory_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@5200 }
                set_variable = { current_ic_cost_ships = 5200}
                set_variable = { manufacturing_country = KUA.id }
            }
            Victory_click = {
                set_country_flag = Victory_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_2_buying_market_open
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@7400 }
                set_variable = { current_ic_cost_ships = 7400}
                set_variable = { manufacturing_country = KUA.id }
            }
            Victory_2_click = {
                set_country_flag = Victory_2_buying_market_open
                clr_country_flag = arquitens_buying_market_open
                clr_country_flag = Interdictor_buying_market_open
                clr_country_flag = dreadnaught_buying_market_open
                clr_country_flag = Victory_buying_market_open
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@7940 }
                set_variable = { current_ic_cost_ships = 7940}
                set_variable = { manufacturing_country = KUA.id }
            }
        }
        triggers = {
            Arquitens_click_enabled = {
                NOT = {
                    has_country_flag = arquitens_buying_market_open
                }
            }
            Interdictor_click_enabled = {
                NOT = {
                    has_country_flag = interdictor_buying_market_open
                }
            }
            Dreadnaught_click_enabled = {
                NOT = {
                    has_country_flag = dreadnaught_buying_market_open
                }
            }
            Victory_click_enabled = {
                NOT = {
                    has_country_flag = Victory_buying_market_open
                }
            }
            Victory_2_click_enabled = {
                NOT = {
                    has_country_flag = Victory_2_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_emp_cruiser]"
            }
        }
    }
    Marketplace_battlecruiser_imperial_buttons = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_battlecruiser_imperial_buttons"
        visible = {
            has_country_flag = star_destroyer_buying_market_open
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
        }
        effects = {
            Imperial_Star_Destroyer_click = {
                set_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
                clr_country_flag = praertor_buying_market_open
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@11005 }
                set_variable = { current_ic_cost_ships = 11005}
                set_variable = { manufacturing_country = KUA.id }
            }
            Imperial_Star_Destroyer_1_click = {
                set_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = resurgent_buying_market_open
                clr_country_flag = praertor_buying_market_open
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@11850 }
                set_variable = { current_ic_cost_ships = 11850}
                set_variable = { manufacturing_country = KUA.id }
            }
            resurgent_click = {
                set_country_flag = resurgent_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = praertor_buying_market_open
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@14503 }
                set_variable = { current_ic_cost_ships = 14503}
                set_variable = { manufacturing_country = KUA.id }
            }
            praetor_click = {
                set_country_flag = praertor_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_buying_market_open
                clr_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                clr_country_flag = resurgent_buying_market_open
                set_variable = { current_price_market_buy_ships = Global.ship_price_holder@14030 }
                set_variable = { current_ic_cost_ships = 14030}
                set_variable = { manufacturing_country = KUA.id }
            }
        }
        triggers = {
            Imperial_Star_Destroyer_click_enabled = {
                NOT = {
                    has_country_flag = Imperial_Star_Destroyer_buying_market_open
                }
            }
            Imperial_Star_Destroyer_1_click_enabled = {
                NOT = {
                    has_country_flag = Imperial_Star_Destroyer_1_buying_market_open
                }
            }
            resurgent_click_enabled = {
                NOT = {
                    has_country_flag = resurgent_buying_market_open
                }
            }
            praetor_click_enabled = {
                NOT = {
                    has_country_flag = praertor_buying_market_open
                }
            }
        }
        properties = {
            ship_icon = {
                image = "[Get_emp_battlecruiser]"
            }
        }
    }
}   
 ################################################################################## BUYING SHIPS END #########################################################################
