clear_side_guild_screen_flags = {
	if = {
		limit = {
			has_country_flag = bounty_hunter_side_screen
		}
		clr_country_flag = bounty_hunter_side_screen
	}else_if = {
		limit = {
			has_country_flag = smugglers_side_screen
		}
		clr_country_flag = smugglers_side_screen	
	}else_if = {
		limit = {
			has_country_flag = technicians_side_screen
		}
		clr_country_flag = technicians_side_screen	
	}else_if = {
		limit = {
			has_country_flag = spynet_side_screen
		}
		clr_country_flag = spynet_side_screen	
	}else_if = {
		limit = {
			has_country_flag = counter_intelligence_side_screen
		}
		clr_country_flag = counter_intelligence_side_screen	
	}
		
}
find_espionage_mission_end_time = {

}
espionage_end_mission_effect = {
	## add Modifiers for success chance here
	set_temp_variable = {Total_counterespionage_vs_espionage_percentage = modifier@espionage_value } ## grab espionage value (the good for you one)
	targeted_country = {
		subtract_from_temp_variable = {Total_counterespionage_vs_espionage_percentage = modifier@counter_espionage_value} ## grab opponetnts counter espionage value (bad for you)
	}

	##

	randomize_temp_variable = {  ## success and failure chance generator
		var = chance_of_success 
		distribution = uniform
		min = 1
		max = 100
	}

	## HOW THE CHANCE OF SUCCESS WORKS
# Chance of success is a random number between 1 and 100
# You want that number to fall within your 'net', which is the sum total of positive and negative modifiers and skill scores
# multiplied by how easy the mission is (lower numbers are harder as your net is smaller)

	## FOR EXAMPLE
#	martial score is 12
#	technician score is 7
#	total skill score divided by two = 9.5 (reason is there are two skills while some missions use only one)
#   mission is 6 on the factor of how hard it is
#   net is then 57
#   times by 1.10, which is the sum total of the percentages for epsionage and counter espionage
#	so net becomes 62.7
#	chance_of_success lands on 62
	##
	meta_effect = { # grab the mission identifier and enact that scripted effect, each scripted effects holds the end results of a operation
		text = {
			mission_number_[mission_number] = yes
		}
		mission_number = "[?effect_mission_identifier]"
	}
}
mission_number_1 = { ## assassinate mission end effect
	set_temp_variable = { net_size = agent_martial@var:agent_in_mission } ## find characters martial and sets net_size to then work out success chance
	multiply_temp_variable = { net_size = 6 } ## 6 on how easy it is
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		if = {
			limit = {
				check_variable = {chance_of_success_1 > 10}
			}
			var:targeted_country = {
				every_unit_leader = {
					limit = {
						has_character_flag = targeted_by_mission
						has_character_flag = targeted_by_@ROOT_1_murder
					}
					add_timed_unit_leader_trait = {
						trait = wounded
						days = 180
					}
					unit_leader_event = {id = espionage.1}
				}
			}
			country_event = espionage_missions.5
		}else = {														 ### CRITICAL SUCCESSS
			var:targeted_country = { ### ASSASSIN KILLS TARGET
				every_unit_leader = {
					limit = {
						has_character_flag = targeted_by_mission
						has_character_flag = targeted_by_@ROOT_1_murder
					}
					retire = yes
					unit_leader_event = {id = espionage.2}
				}
			}
			country_event = espionage_missions.14
		}
	}else = {## FALIURE
		country_event = espionage_missions.6
		var:targeted_country = {
			country_event = espionage_missions.9
			every_unit_leader = {
				limit = {
					has_character_flag = targeted_by_mission
					has_character_flag = targeted_by_@ROOT_1_murder
				}
				clr_character_flag = targeted_by_training
				clr_character_flag = targeted_by_@ROOT_1_murder
			}
		}
	}
}
mission_number_2 = {
	set_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 5 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			country_event = {
				id = espionage.3
				days = 1
			}
		}
	}
}
mission_number_3 = { ## Army Training
	set_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 5 }
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		every_unit_leader = {
			limit = {
				has_character_flag = targeted_by_mission
				has_character_flag = targeted_by_training
			}
			add_random_trait = {
				organizer
				cavalry_leader
				infantry_leader
				skilled_staffer
				trickster
				infantry_officer
				armor_officer
			}
		}
		country_event = espionage_missions.11
	}else = {## FALIURE
		country_event = espionage_missions.12
		every_unit_leader = {
			limit = {
				has_character_flag = targeted_by_mission
				has_character_flag = targeted_by_training
			}
			clr_character_flag = targeted_by_training
			clr_character_flag = targeted_by_mission
		}
	}
}
mission_number_4 = { ## Blackmail Senator
	set_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_charisma@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 10 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			country_event = espionage_missions.20
		}
		country_event = espionage_missions.17
	}else = {## FALIURE
		country_event = espionage_missions.18
		var:targeted_country = {
			country_event = espionage_missions.21
		}
	}
}
mission_number_5 = {
	set_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	multiply_temp_variable = { net_size = 5 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			add_timed_idea = {
				idea = cyber_attack_espionage
				days = 100
			}
			country_event = espionage_missions.26
		}
		country_event = espionage_missions.23
	}else = {## FALIURE
		country_event = espionage_missions.24
		var:targeted_country = {
			country_event = espionage_missions.21
		}
	}
}
mission_number_6 = {
	set_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_charisma@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 8 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			steal_random_tech_bonus = {
				folder = electronics_folder
				folder = industry_folder
				bonus = 3.0
				dynamic = no
				instant = yes
				name = operation_steal_tech_civilian
				target = FROM
				uses = 1
			}
			country_event = espionage_missions.32
		}
		country_event = espionage_missions.29
	}else = {## FALIURE
		country_event = espionage_missions.30
		var:targeted_country = {
			country_event = espionage_missions.33
		}
	}
}
mission_number_7 = {
	set_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_charisma@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 5 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			capital_scope = {
				add_manpower = -50000
			}
			country_event = espionage_missions.38
		}
		country_event = espionage_missions.35
	}else = {## FALIURE
		country_event = espionage_missions.36
		var:targeted_country = {
			country_event = espionage_missions.39
		}
	}
}
mission_number_8 = {
	set_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 8 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			add_timed_idea = {
				idea = logistics_sabotage_espionage
				days = 40
			}
			country_event = espionage_missions.44
		}
		country_event = espionage_missions.41
	}else = {## FALIURE
		country_event = espionage_missions.42
		var:targeted_country = {
			country_event = espionage_missions.45
		}
	}
}
mission_number_9 = {
	set_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 12 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			while_loop_effect = {
				break = temp_break
				limit = {
					NOT = {
						has_variable = targeted_country
					}
				}
				random_core_state = {
					if = {
						limit = {
							arms_factory > 1
						}
						remove_building = {
							type = arms_factory
							level = 1
						}
						set_temp_variable = {temp_break = 1}
					}else_if = {
						limit = {
							industrial_complex > 1
						}
						remove_building = {
							type = industrial_complex
							level = 1
						}
						set_temp_variable = {temp_break = 1}
					}
				}
			}
			country_event = espionage_missions.50
		}
		country_event = espionage_missions.47
	}else = {## FALIURE
		country_event = espionage_missions.48
		var:targeted_country = {
			country_event = espionage_missions.51
		}
	}
}
mission_number_10 = {
	set_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_charisma@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 6 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		add_intel = {
			target = var:targeted_country
			army_intel = 30
			navy_intel = 30
			airforce_intel = 30
		}
		var:targeted_country = {
			country_event = espionage_missions.56
		}
		country_event = espionage_missions.53
	}else = {## FALIURE
		country_event = espionage_missions.54
		var:targeted_country = {
			country_event = espionage_missions.57
		}
	}
}
mission_number_11 = {
	set_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_charisma@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 8 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			country_event = espionage_missions.62
		}
		country_event = espionage_missions.59
	}else = {## FALIURE
		country_event = espionage_missions.60
		var:targeted_country = {
			country_event = espionage_missions.63
		}
	}
}
mission_number_12 = {
	set_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 5 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			if = {
				limit = {
					check_variable = {
						var = num_ships_with_type@carrier  ## CHANGE_ME, need to ask diosysnus about ship types
						value = 1
						compare = greater_than
					}
				}
				destroy_ships = {
					type = carrier
					count = 1
				}
			}else_if = {
				limit = {
					check_variable = {
						var = num_ships_with_type@battleship ## CHANGE_ME, need to ask diosysnus about ship types
						value = 1
						compare = greater_than
					}
				}
				destroy_ships = {
					type = battleship
					count = 1
				}
			}
			country_event = espionage_missions.74
		}
		country_event = espionage_missions.71
	}else = {## FALIURE
		country_event = espionage_missions.72
		var:targeted_country = {
			country_event = espionage_missions.75
		}
	}
}
mission_number_13 = {
	set_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 10 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			send_equipment_fraction = {
				value = 0.02
				target = PREV
			}
			country_event = espionage_missions.80
		}
		country_event = espionage_missions.77
	}else = {## FALIURE
		country_event = espionage_missions.78
		var:targeted_country = {
			country_event = espionage_missions.81
		}
	}
}
mission_number_14 = {
	set_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 8 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			find_highest_in_array = { 
				array = slaves
				value = slave_value_count_temp
				index = slave_index_espionage_temp
			}
			divide_variable = {slave_value_count_temp = 3} ## Thought this might be cleaner
			multiply_variable = {slave_value_count_temp = 2}
			round_variable = slave_value_count_temp
			set_variable = { slaves^slave_index_espionage_temp = slave_value_count_temp }
		country_event = espionage_missions.80
		}
		country_event = espionage_missions.77
		set_variable = { slaves^targeted_country.slave_index_espionage_temp = var:targeted_country.slave_value_count_temp} ## this is stupid and should be treated as such
	}else = {## FALIURE
		country_event = espionage_missions.78
		var:targeted_country = {
			country_event = espionage_missions.81
		}
	}
}
mission_number_15 = {
	set_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 10 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			find_highest_in_array = { 
				array = slaves
				value = slave_value_count_temp
				index = slave_index_espionage_temp
			}
			divide_variable = {slave_value_count_temp = 3} ## Thought this might be cleaner
			multiply_variable = {slave_value_count_temp = 2}
			round_variable = slave_value_count_temp
			set_variable = { slaves^slave_index_espionage_temp = slave_value_count_temp }
			country_event = espionage_missions.92
		}
		country_event = espionage_missions.89
	}else = {## FALIURE
		country_event = espionage_missions.90
		var:targeted_country = {
			country_event = espionage_missions.93
		}
	}
}
mission_number_16 = {
	set_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_charisma@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 4 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			set_temp_variable = { slave_total_count_temp = 0 }
			for_each_loop = {
				array = slaves
				value = slave_index_count

				add_to_temp_variable = {slave_total_count_temp = slave_index_count}
			}
			divide_variable = {slave_total_count_temp = 800000}
			random_core_state = {
					set_variable = { core_temp_state = THIS.id}
			}
			start_civil_war = {
				ruling_party = neutrality
				ideology = ROOT
				size = slave_total_count_temp
				capital = var:core_temp_state
				navy_ratio = 0
				states_filter = {
					check_variable = {var:core_temp_state = THIS.id}
				}
				keep_unit_leaders_trigger = {
					always = yes
				}
				keep_political_leader = yes
				keep_political_party_members = yes
			}
			country_event = espionage_missions.98
		}
		country_event = espionage_missions.95
	}else = {## FALIURE
		country_event = espionage_missions.96
		var:targeted_country = {
			country_event = espionage_missions.99
		}
	}
}
mission_number_17 = {
	set_temp_variable = { net_size = agent_martial@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_charisma@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 10 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			every_controlled_state = {
				limit = {
					has_active_resistance = yes
				}
				add_resistance = 20 
			}
			country_event = espionage_missions.104
		}
		country_event = espionage_missions.101
	}else = {## FALIURE
		country_event = espionage_missions.102
		var:targeted_country = {
			country_event = espionage_missions.105
		}
	}
}
mission_number_18 = {
	set_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_charisma@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 12 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			country_event = espionage_missions.110
		}
		country_event = espionage_missions.107
		set_variable = {higher_chance_espionage_target = var:targeted_country.id }
	}else = {## FALIURE
		country_event = espionage_missions.108
		var:targeted_country = {
			country_event = espionage_missions.111
		}
	}
}
mission_number_19 = {
	set_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_charisma@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 8 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			subtract_from_variable = { currency_amount^primary_currency = 1000 }
			country_event = espionage_missions.116
		}
		country_event = espionage_missions.113
	}else = {## FALIURE
		country_event = espionage_missions.114
		var:targeted_country = {
			country_event = espionage_missions.117
		}
	}
}
mission_number_20 = {
	set_temp_variable = { net_size = agent_intelligence@var:agent_in_mission }
	add_to_temp_variable = { net_size = agent_charisma@var:agent_in_mission }
	divide_temp_variable = { net_size = 2 }
	multiply_temp_variable = { net_size = 8 }
	multiply_temp_variable = { net_size = Total_counterespionage_vs_espionage_percentage} ## multiply the bonuses to get total net size
	if = {
		limit = {
			check_variable = {
				var = chance_of_success
				value = net_size
				compare = less_than_or_equals
			}
		}
		var:targeted_country = {
			give_resource_rights = { receiver = ROOT state = capital }
			country_event = {
				id = espionage.4
				days = 80
			}
		}
	}else = {## FALIURE
	}
}

create_temporary_agents = { ## CREATE TEMPORARY AGENTS FOR RECRUITMENT
	set_temp_variable = {amount_of_common_agents = 32}
	while_loop_effect = {
		limit = {
			NOT = {
				check_variable = {temporary_agent_1 = agent_slot_1_identifier}
				check_variable = {temporary_agent_1 = agent_slot_2_identifier}
				check_variable = {temporary_agent_1 = agent_slot_3_identifier}
				check_variable = {temporary_agent_1 = agent_slot_4_identifier}
				check_variable = {temporary_agent_1 = agent_slot_5_identifier}
			}
		}
		set_temp_variable = {
			min = 0
			max = amount_of_common_agents
			var = temporary_agent_1
			interger = yes
		}
	}
	while_loop_effect = {
		limit = {
			NOT = {
				check_variable = {temporary_agent_2 = agent_slot_1_identifier}
				check_variable = {temporary_agent_2 = agent_slot_2_identifier}
				check_variable = {temporary_agent_2 = agent_slot_3_identifier}
				check_variable = {temporary_agent_2 = agent_slot_4_identifier}
				check_variable = {temporary_agent_2 = agent_slot_5_identifier}
				check_variable = {temporary_agent_2 = temporary_agent_1}
			}
		}
		set_temp_variable = {
			min = 0
			max = amount_of_common_agents
			var = temporary_agent_2
			interger = yes
		}
	}
	while_loop_effect = {
		limit = {
			NOT = {
				check_variable = {temporary_agent_3 = agent_slot_1_identifier}
				check_variable = {temporary_agent_3 = agent_slot_2_identifier}
				check_variable = {temporary_agent_3 = agent_slot_3_identifier}
				check_variable = {temporary_agent_3 = agent_slot_4_identifier}
				check_variable = {temporary_agent_3 = agent_slot_5_identifier}
				check_variable = {temporary_agent_3 = temporary_agent_1}
				check_variable = {temporary_agent_3 = temporary_agent_2}
			}
		}
		set_temp_variable = {
			min = 0
			max = amount_of_common_agents
			var = temporary_agent_3
			interger = yes
		}
	}
	set_temp_variable = {agent_identifier = 0} ## HOLDS PUT ONE HIGHER THEN LAST EFFECT
	set_temp_variable = {agent_portrait =0} ## THIS IS THE GFX HOLDER FOR THE PORTRAIT
	set_temp_variable = {agent_name = 0} ## HOLDS NAME LOCALISATION
	set_temp_variable = {agent_charisma = 0} 
	set_temp_variable = {agent_intelligence = 0}
	set_temp_variable = {agent_martial = 0}
	set_temp_variable = {personality_trait = 0}
	set_temp_variable = {class_trait = 0}
	set_temp_variable = {race_trait = 0}
	meta_effect = {
		text = {
			agent_recruitment_agent_[AGENT_GRAB_NUMBER] = yes
		}
		AGENT_GRAB_NUMBER = "[?temporary_agent_1]"
	}
	set_variable = {agent_identifier_temporary_agent_1 = agent_identifier}
	set_variable = {agent_portrait_temporary_agent_1 = agent_portrait}
	set_variable = {agent_name_temporary_agent_1 = agent_name}
	set_variable = {agent_charisma_temporary_agent_1 = agent_charisma}
	set_variable = {agent_intelligence_temporary_agent_1 = agent_intelligence}
	set_variable = {agent_martial_temporary_agent_1 = agent_martial}
	set_variable = {personality_trait_temporary_agent_1 = personality_trait}
	set_variable = {class_trait_temporary_agent_1 = class_trait}
	set_variable = {race_trait_temporary_agent_1 = race_trait}
	meta_effect = {
		text = {
			agent_recruitment_agent_[AGENT_GRAB_NUMBER] = yes
		}
		AGENT_GRAB_NUMBER = "[?temporary_agent_2]"
	}
	set_variable = {agent_identifier_temporary_agent_2 = agent_identifier}
	set_variable = {agent_portrait_temporary_agent_2 = agent_portrait}
	set_variable = {agent_name_temporary_agent_2 = agent_name}
	set_variable = {agent_charisma_temporary_agent_2 = agent_charisma}
	set_variable = {agent_intelligence_temporary_agent_2 = agent_intelligence}
	set_variable = {agent_martial_temporary_agent_2 = agent_martial}
	set_variable = {personality_trait_temporary_agent_2 = personality_trait}
	set_variable = {class_trait_temporary_agent_2 = class_trait}
	set_variable = {race_trait_temporary_agent_2 = race_trait}
	meta_effect = {
		text = {
			agent_recruitment_agent_[AGENT_GRAB_NUMBER] = yes
		}
		AGENT_GRAB_NUMBER = "[?temporary_agent_3]"
	}
	set_variable = {agent_identifier_temporary_agent_3 = agent_identifier}
	set_variable = {agent_portrait_temporary_agent_3 = agent_portrait}
	set_variable = {agent_name_temporary_agent_3 = agent_name}
	set_variable = {agent_charisma_temporary_agent_3 = agent_charisma}
	set_variable = {agent_intelligence_temporary_agent_3 = agent_intelligence}
	set_variable = {agent_martial_temporary_agent_3 = agent_martial}
	set_variable = {personality_trait_temporary_agent_3 = personality_trait}
	set_variable = {class_trait_temporary_agent_3 = class_trait}
	set_variable = {race_trait_temporary_agent_3 = race_trait}
}

agent_recruitment_agent_1 = { ## ALL FEEDS UP TO create_temporary_agents EFFECT
	set_temp_variable = {agent_identifier = 1} ## HOLDS PUT ONE HIGHER THEN LAST EFFECT
	set_temp_variable = {agent_portrait = token:agent_1_portrait} ## THIS IS THE GFX HOLDER FOR THE PORTRAIT
	set_temp_variable = {agent_name = token:agent_1_name} ## HOLDS NAME LOCALISATION
	set_temp_variable = {agent_charisma = 10} 
	set_temp_variable = {agent_intelligence = 10}
	set_temp_variable = {agent_martial = 10}
	set_temp_variable = {personality_trait = token:cautious_trait} ## LOOK AT ESPIONAGE_TOKENS FOR TRAITS
	set_temp_variable = {class_trait = token:smuggler_trait} ## LOOK AT ESPIONAGE_TOKENS FOR TRAITS
	set_temp_variable = {race_trait = token:bothan_trait} ## LOOK AT ESPIONAGE_TOKENS FOR TRAITS, RACE TRAIT IS NOT NEEDED YOU CAN IGNORE THIS
}



espionage_agent_test = {
	test_character_5 = {
		set_variable = {test_value = 5}
	}
	log = "Past Charcters"
	test_character_5 = {
		set_temp_variable = {holder_of_value = test_value}
	}
	set_variable = {test_variable = token:test_character_5}
	log = "[?test_variable]"
	log = "[test_character_5.GetName]"
	log = "[?test_variable.GetTokenLocalizedKey]"
}
