on_actions = {
	on_startup = {
		effect = {
			## ADDS UNIQUE BUILDINGS VARIABLE TO THEIR RESPECTIVE STATES
			375 = {
				set_variable = {unique_building_on_state = token:mustafar_works}
			}
			18 = {
				set_variable = {unique_building_on_state = token:beskar_mine}
			}
			445 = {
				set_variable = {unique_building_on_state = token:bespin_cloud_refinery}
			}
			97 = {
				set_variable = {unique_building_on_state = token:theed_palace}
			}
			554 = {
				set_variable = {unique_building_on_state = token:jabbas_palace}
			}
			131 = {
				set_variable = {unique_building_on_state = token:casino_catonica}
			}
			151 = {
				set_variable = {unique_building_on_state = token:yavin_temple}
			}
			436 = {
				set_variable = {unique_building_on_state = token:sundari}
			}
			107 = {
				set_variable = {unique_building_on_state = token:vaders_castle}
			}
		}
	}
	on_daily = {
		effect = {

		}
	}
	on_state_control_changed = {
		effect = {
	#### BUILDING 1 CONTROLLER
			## Controls state change ownership when buildings are involved, i.e. taking buildings benfits from the losing side and transferring them to the victor
			FROM.FROM = {
				if = {
					limit = {
						has_var = building_1
					}
					set_variable = {building_name_passer = building_1}
				}
			}
			## Below grabs the building and enacts its removal effect on the country that lost the building
			if = {
				limit = {
					has_variable = building_name_passer
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_1}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_2}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_3}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				## ADD AND REMOVE IDEAS
				FROM = {
					if = {
						limit = { ## FIND IF ANY STATE ALREADY HAS BUILDING AS NOT TO REMOVE IDEA FROM BUILDINGS THAT ARE THERE
							NOT ={
								any_controlled_state = {
									has_variable = building_name_passer
								}
							}
						}
						remove_ideas = var:building_name_passer
					}
				}
				ROOT = {
					add_ideas = var:building_name_passer
				}
			}
			clear_variable = building_name_passer
	#### BUILDING 2 CONTROLLER
			FROM.FROM = {
				if = {
					limit = {
						has_var = building_2
					}
					set_variable = {building_name_passer = building_2}
				}
			}
			## Below grabs the building and enacts its removal effect on the country that lost the building and add effect on country that gained it
			if = {
				limit = {
					has_variable = building_name_passer
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_1}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_2}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_3}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				FROM = {
					if = {
						limit = { ## FIND IF ANY STATE ALREADY HAS BUILDING AS NOT TO REMOVE IDEA FROM BUILDINGS THAT ARE THERE
							NOT ={
								any_controlled_state = {
									has_variable = building_name_passer
								}
							}
						}
						remove_ideas = var:building_name_passer
					}
				}
				ROOT = {
						add_ideas = var:building_name_passer
				}
			}
	### END OF BUILDING CONTROLLER
	### No idea what this is below - Neverfire
			if = {
				limit = {
					FROM.FROM = {
						has_state_flag = academy_built
					}
				}
				ROOT = {
					add_to_variable = { academy = 1 }
					if = {
						limit = {
							NOT = {
								OR = {
									has_idea = academy_lvl_1
									has_idea = academy_lvl_2
									has_idea = academy_lvl_3
								}
							}
						}
						add_ideas = academy_lvl_1
					}
				}
				FROM = {
					subtract_from_variable = { academy = 1 }
					if = {
						limit = {
							check_variable = { academy < 1 }
						}
						remove_ideas = academy_lvl_1
						remove_ideas = academy_lvl_2
						remove_ideas = academy_lvl_3
					}
				}
			}
					else_if = {
			limit = {
				FROM.FROM = {
					has_state_flag = lab_built
				}
			}
			ROOT = {
				add_to_variable = { lab = 1 }
				if = {
					limit = {
						NOT = {
							OR = {
								has_idea = lab_lvl_1
								has_idea = lab_lvl_2
								has_idea = lab_lvl_3
							}
						}
					}
					add_ideas = lab_lvl_1
				}
			}
			FROM = {
				subtract_from_variable = { lab = 1 }
				if = {
					limit = {
						check_variable = { lab < 1 }
					}
					remove_ideas = lab_lvl_1
					remove_ideas = lab_lvl_2
					remove_ideas = lab_lvl_3
				}
			}
		}
		else_if = {
			limit = {
				FROM.FROM = {
					has_state_flag = shipyard_built
				}
			}
			ROOT = {
				add_to_variable = { shipyard = 1 }
				if = {
					limit = {
						NOT = {
							OR = {
								has_idea = shipyard_lvl_1
								has_idea = shipyard_lvl_2
								has_idea = shipyard_lvl_3
							}
						}
					}
					add_ideas = shipyard_lvl_1
				}
			}
			FROM = {
				subtract_from_variable = { shipyard = 1 }
				if = {
					limit = {
						check_variable = { shipyard < 1 }
					}
					remove_ideas = shipyard_lvl_1
					remove_ideas = shipyard_lvl_2
					remove_ideas = shipyard_lvl_3
				}
			}
		}
		else_if = {
			limit = {
				FROM.FROM = {
					has_state_flag = intelligence_built_lvl_1
				}
			}
			ROOT = {
				add_to_variable = { intelligence = 1 }
				if = {
					limit = {
						NOT = {
							OR = {
								has_idea = intelligence_lvl_1
								has_idea = intelligence_lvl_2
								has_idea = intelligence_lvl_3
							}
						}
					}
					add_ideas = intelligence_lvl_1
				}
			}
			FROM = {
				subtract_from_variable = { intelligence = 1 }
				if = {
					limit = {
						check_variable = { intelligence < 1 }
					}
					remove_ideas = intelligence_lvl_1
					remove_ideas = intelligence_lvl_2
					remove_ideas = intelligence_lvl_3
					}
				}
			}
		}
	}
}