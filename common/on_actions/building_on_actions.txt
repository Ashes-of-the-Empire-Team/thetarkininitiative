on_actions = {
	on_startup = {
		effect = {
		## CREATING GLOBAL VARIABLES FOR NORMAL PRICES OF BUILDINGS - WE DEFO COULD CHANGE THESE PRICES AND TIMES FOR ERA SHIT, MAYBE :(
			set_variable = {global.arms_factory_1_global_speed = 80}
			set_variable = {global.soft_arms_factory_1_global_speed = 80}
			set_variable = {global.soft_arms_factory_2_global_speed = 80}
			set_variable = {global.tank_factory_1_global_speed = 80}
			set_variable = {global.tank_factory_2_global_speed = 80}
			
			set_variable = {global.starfighter_factory_1_global_speed = 80}
			set_variable = {global.starfighter_factory_2_global_speed = 80}
			set_variable = {global.starfighter_factory_3_global_speed = 80}
			set_variable = {global.starbomber_factory_1_global_speed = 80}
			set_variable = {global.starbomber_factory_2_global_speed = 80}

			set_variable = {global.light_shipyard_1_global_speed = 80}
			set_variable = {global.light_shipyard_2_global_speed = 80}
			set_variable = {global.light_shipyard_3_global_speed = 80}
			set_variable = {global.medium_shipyard_1_global_speed = 80}
			set_variable = {global.medium_shipyard_2_global_speed = 80}
			set_variable = {global.heavy_shipyard_1_global_speed = 80}

			set_variable = {global.training_facilities_1_global_speed = 80}
			set_variable = {global.special_forces_training_facilities_1_global_speed = 80}
			set_variable = {global.special_forces_training_facilities_2_global_speed = 80}
			set_variable = {global.military_bootcamp_1_global_speed = 80}
			set_variable = {global.military_bootcamp_2_global_speed = 80}

			set_variable = {global.intelligence_center_1_global_speed = 80}
			set_variable = {global.sensor_array_1_global_speed = 80}
			set_variable = {global.sensor_array_2_global_speed = 80}
			set_variable = {global.spy_academy_1_global_speed = 80}
			set_variable = {global.spy_academy_2_global_speed = 80}

			set_variable = {global.research_center_1_global_speed = 80}
			set_variable = {global.research_center_2_global_speed = 80}
			set_variable = {global.research_center_3_global_speed = 80}

			set_variable = {global.military_academy_1_global_speed = 80}
			set_variable = {global.military_academy_2_global_speed = 80}
			set_variable = {global.military_academy_3_global_speed = 80}
			set_variable = {global.starfighter_academy_1_global_speed = 80}
			set_variable = {global.admiralty_academy_1_global_speed = 80}
			set_variable = {global.naval_academy_1_global_speed = 80}

			set_variable = {global.taxation_center_1_global_speed = 80}
			set_variable = {global.taxation_center_2_global_speed = 80}
			set_variable = {global.taxation_center_3_global_speed = 80}

			set_variable = {global.homestead_1_global_speed = 80}
			set_variable = {global.homestead_2_global_speed = 80}
			set_variable = {global.homestead_3_global_speed = 80}

			set_variable = {global.corporate_office_1_global_speed = 80}
			set_variable = {global.corporate_office_2_global_speed = 80}
			set_variable = {global.corporate_office_3_global_speed = 80}

			set_variable = {global.recycle_center_1_global_speed = 80}
			set_variable = {global.recycle_center_2_global_speed = 80}
			set_variable = {global.recycle_center_3_global_speed = 80}

			set_variable = {global.spice_market_1_global_speed = 80}
			set_variable = {global.spice_market_2_global_speed = 80}
			set_variable = {global.spice_market_3_global_speed = 80}

			set_variable = {global.fuel_refinery_1_global_speed = 80}
			set_variable = {global.fuel_refinery_2_global_speed = 80}
			set_variable = {global.fuel_refinery_3_global_speed = 80}

			set_variable = {global.anti_air_1_global_speed = 80}
			set_variable = {global.anti_air_2_global_speed = 80}
			set_variable = {global.anti_air_3_global_speed = 80}

		## CREATING GLOBAL VARIABLES FOR SPEED OF BUILDINGS
			set_variable = {global.arms_factory_1_global_cost = 200}
			set_variable = {global.soft_arms_factory_1_global_cost = 200}
			set_variable = {global.soft_arms_factory_2_global_cost = 200}
			set_variable = {global.tank_factory_1_global_cost = 200}
			set_variable = {global.tank_factory_2_global_cost = 200}
			
			set_variable = {global.starfighter_factory_1_global_cost = 200}
			set_variable = {global.starfighter_factory_2_global_cost = 200}
			set_variable = {global.starfighter_factory_3_global_cost = 200}
			set_variable = {global.starbomber_factory_1_global_cost = 200}
			set_variable = {global.starbomber_factory_2_global_cost = 200}

			set_variable = {global.light_shipyard_1_global_cost = 200}
			set_variable = {global.light_shipyard_2_global_cost = 200}
			set_variable = {global.light_shipyard_3_global_cost = 200}
			set_variable = {global.medium_shipyard_1_global_cost = 200}
			set_variable = {global.medium_shipyard_2_global_cost = 200}
			set_variable = {global.heavy_shipyard_1_global_cost = 200}

			set_variable = {global.training_facilities_1_global_cost = 200}
			set_variable = {global.special_forces_training_facilities_1_global_cost = 200}
			set_variable = {global.special_forces_training_facilities_2_global_cost = 200}
			set_variable = {global.military_bootcamp_1_global_cost = 200}
			set_variable = {global.military_bootcamp_2_global_cost = 200}

			set_variable = {global.intelligence_center_1_global_cost = 200}
			set_variable = {global.sensor_array_1_global_cost = 200}
			set_variable = {global.sensor_array_2_global_cost = 200}
			set_variable = {global.spy_academy_1_global_cost = 200}
			set_variable = {global.spy_academy_2_global_cost = 200}

			set_variable = {global.research_center_1_global_cost = 200}
			set_variable = {global.research_center_2_global_cost = 200}
			set_variable = {global.research_center_3_global_cost = 200}

			set_variable = {global.military_academy_1_global_cost = 200}
			set_variable = {global.military_academy_2_global_cost = 200}
			set_variable = {global.military_academy_3_global_cost = 200}
			set_variable = {global.starfighter_academy_1_global_cost = 200}
			set_variable = {global.admiralty_academy_1_global_cost = 200}
			set_variable = {global.naval_academy_1_global_cost = 200}

			set_variable = {global.taxation_center_1_global_cost = 200}
			set_variable = {global.taxation_center_2_global_cost = 200}
			set_variable = {global.taxation_center_3_global_cost = 200}

			set_variable = {global.homestead_1_global_cost = 200}
			set_variable = {global.homestead_2_global_cost = 200}
			set_variable = {global.homestead_3_global_cost = 200}

			set_variable = {global.corporate_office_1_global_cost = 200}
			set_variable = {global.corporate_office_2_global_cost = 200}
			set_variable = {global.corporate_office_3_global_cost = 200}

			set_variable = {global.recycle_center_1_global_cost = 200}
			set_variable = {global.recycle_center_2_global_cost = 200}
			set_variable = {global.recycle_center_3_global_cost = 200}

			set_variable = {global.spice_market_1_global_cost = 200}
			set_variable = {global.spice_market_2_global_cost = 200}
			set_variable = {global.spice_market_3_global_cost = 200}

			set_variable = {global.fuel_refinery_1_global_cost = 200}
			set_variable = {global.fuel_refinery_2_global_cost = 200}
			set_variable = {global.fuel_refinery_3_global_cost = 200}

			set_variable = {global.anti_air_1_global_cost = 200}
			set_variable = {global.anti_air_2_global_cost = 200}
			set_variable = {global.anti_air_3_global_cost = 200}
			## ADDS UNIQUE BUILDINGS VARIABLE TO THEIR RESPECTIVE STATES
			3 = {
				set_variable = {unique_building_on_state = token:the_maw_station}
				set_state_flag = wonder_built_no_destroy_1
			}
			22 = {
				set_variable = {unique_building_on_state = token:ring_of_kafrene}
				set_state_flag = wonder_built_no_destroy_1
			}
			103 = {
				set_variable = {unique_building_on_state = token:the_wheel}
				set_state_flag = wonder_built_no_destroy_1
			}

			38 = {
				set_variable = {unique_building_on_state = token:bilbringi_station}
				set_state_flag = wonder_built_no_destroy_1
			}

			366 = {
				set_variable = {unique_building_on_state = token:fondor_shipyard}
				set_state_flag = wonder_built_no_destroy_1
			}

			318 = {
				set_variable = {unique_building_on_state = token:corellian_shipyard}
				set_state_flag = wonder_built_no_destroy_1
			}

			405 = {
				set_variable = {unique_building_on_state = token:sluis_van}
				set_state_flag = wonder_built_no_destroy_1
			}

			297 = {
				set_variable = {unique_building_on_state = token:jeddah_temple}
			}
			375 = {
				set_variable = {unique_building_on_state = token:malastare_fuel}
				set_state_flag = wonder_built_no_destroy_1
			}
			18 = {
				set_variable = {unique_building_on_state = token:beskar_mine}
			}
			445 = {
				set_variable = {unique_building_on_state = token:cloud_city}
				set_state_flag = wonder_built_no_destroy_1
			}
			97 = {
				set_variable = {unique_building_on_state = token:theed_palace}
				set_state_flag = wonder_built_no_destroy_1
			}
			554 = {
				set_variable = {unique_building_on_state = token:jabbas_palace}
				set_state_flag = wonder_built_no_destroy_1
			}
			131 = {
				set_variable = {unique_building_on_state = token:casino_catonica}
				set_state_flag = wonder_built_no_destroy_1
			}
			151 = {
				set_variable = {unique_building_on_state = token:yavin_temple}
				set_state_flag = wonder_built_no_destroy_1
			}
			107 = {
				set_variable = {unique_building_on_state = token:vaders_castle}
				set_state_flag = wonder_built_no_destroy_1
			}
			53 = {
				set_variable = {unique_building_on_state = token:kashyyyk_tree}
				set_state_flag = wonder_built_no_destroy_1
			}
			235 = {
				set_variable = {unique_building_on_state = token:senate_building}
				set_state_flag = wonder_built_no_destroy_1
			}
			20 = {
				set_variable = {unique_building_on_state = token:mount_tantiss}
				set_state_flag = wonder_built_no_destroy_1
			}
			161 = {
				set_variable = {unique_building_on_state = token:korriban_temple}
				set_state_flag = wonder_built_no_destroy_1
			}

			197 = {
				set_variable = {unique_building_on_state = token:mon_cala_shipyards}
				set_state_flag = wonder_built_no_destroy_1
			}
			284 = {
				set_variable = { building_1 = token:kuat_rings }
				set_variable = {unique_building_on_state = token:kuat_rings}
				set_state_flag = wonder_built_no_destroy_1
			}
			65 = {
				set_variable = { building_1 = token:kuat_rings }
				set_variable = {unique_building_on_state = token:kuat_rings}
				set_state_flag = wonder_built_no_destroy_1
			}
			287 = {
				set_variable = { building_1 = token:kuat_rings }
				set_variable = {unique_building_on_state = token:kuat_rings}
				set_state_flag = wonder_built_no_destroy_1
			}
			56 = {
				set_variable = { building_1 = token:kuat_rings }
				set_variable = {unique_building_on_state = token:kuat_rings}
				set_state_flag = wonder_built_no_destroy_1
			}

	### TILE BLOCKER SET UP, dont have to do it here but makes it easier to edit generalised tile blockers.
	## For Unique tile blockers its recommended to use the countries history file rather then this file (but commands will be same as below)
			555 = { ## Kashykkk
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
			}
	## GENERAL TILE BLOCKERS
		### DATHOMIR
			143 = {## TILE BLOCKER EXAMPLE - DATHOMIR BADLANDS AREA
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:dathomir_badlands}
				set_variable = {building_2 = token:dathomir_badlands}
			}
			486 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:dathomir_badlands}
				set_variable = {building_2 = token:dathomir_badlands}
			}
			487 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:dathomir_badlands}
				set_variable = {building_2 = token:dathomir_badlands}
			}
			8 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:dathomir_badlands}
				set_variable = {building_2 = token:rock_slides}
			}
		## BYSS
			439 ={
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:dangerous_fauna}
				set_variable = {building_2 = token:untamed_jungle}
			}
			373 ={
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:untamed_jungle}
				set_variable = {building_2 = token:ruined_city}
			}
			## Chandrila
			24 ={
				set_state_flag = tile_blocker_building_2
				set_variable = {building_2 = token:rolling_mountains}
			}
			127 ={
				set_state_flag = tile_blocker_building_2
				set_variable = {building_2 = token:rolling_mountains}
			}
			185 ={
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:rolling_mountains}
				set_variable = {building_2 = token:rolling_mountains}
			}
			195 ={
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:rolling_mountains}
				set_variable = {building_2 = token:rolling_mountains}
			}
		## Mustafar
			434 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:lava_fields}
			}
			435 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:lava_fields}
				set_variable = {building_2 = token:rock_slides}
			}
			436 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:lava_fields}
			}
		## Bespin
			447 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:inhospitable_area}
				set_variable = {building_2 = token:inhospitable_area}
			}
		## Taris
			160 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:ruined_city}
			}
			15 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:ruined_city}
			}
			163 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:ruined_city}
			}
		##	Korriban
			14 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:rock_slides}
			}
			158 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:dead_land_desert}
			}
			161 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:dead_land_desert}
			}
		## Jedah
			297 ={
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:glassed_surface}
				set_variable = {building_2 = token:inhospitable_area}
			}
			61 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:dead_land_desert}
			}
			286 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:dead_land_desert}
			}
			288 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:glassed_surface}
				set_variable = {building_2 = token:rock_slides}
			}
		## Mandalore
			18 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:glassed_surface}
				set_variable = {building_2 = token:glassed_surface}
			}
			169 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:glassed_surface}
				set_variable = {building_2 = token:glassed_surface}
			}
			172 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:glassed_surface}
				set_variable = {building_2 = token:glassed_surface}
			}
			166 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:glassed_surface}
				set_variable = {building_2 = token:glassed_surface}
			}
		## Tatooine - god help me on this one
			551 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:dead_land_desert}
			}
			553 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:dead_land_desert}
				set_variable = {building_2 = token:dead_land_desert}
			}
			425 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:dead_land_desert}
			}
			552 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:dead_land_desert}
			}
			426 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:dead_land_desert}
			}
			424 = {
				set_state_flag = tile_blocker_building_1
				set_variable = {building_1 = token:dead_land_desert}
			}
		## Ryloth
			390 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:dead_land_desert}
				set_variable = {building_2 = token:dead_land_desert}
			}
			396 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:dead_land_desert}
				set_variable = {building_2 = token:dead_land_desert}
			}
		## Eadu
			349 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:rock_slides}
				set_variable = {building_2 = token:rock_slides}
			}
			343 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:rock_slides}
				set_variable = {building_2 = token:snow_area}
			}
			80 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:rock_slides}
				set_variable = {building_2 = token:snow_area}
			}
			345 = {
				set_state_flag = tile_blocker_building_1
				set_state_flag = tile_blocker_building_2
				set_variable = {building_1 = token:rock_slides}
				set_variable = {building_2 = token:snow_area}
			}
		## Coruscant 
			235	= {
				set_state_flag = tile_blocker_building_2
				set_variable = {building_2 = token:undercity_slums}
			}

	## PRIMITIVE BUILDINGS ASSINGING
			### STATE EVALUATER.. ON STARTUP EVALUATES EACH STATE FOR ITS UNIQUE BUILDING AND IMPLANTS VARIABLES HOLDING LOCALISATION FOR UNIQUE BUILDINGS FOR GRABBING, CONTAINS TOOLTIP FOR HOVER OVER OF EFFECTS
			every_state = {
				set_temp_variable = {chance_for_primitive_resource_extraction_building = 10}
				set_temp_variable = {chance_for_primitive_farm_building = 10}
				set_temp_variable = {chance_for_primitive_office_building = 10}
				set_temp_variable = {chance_for_primitive_industry_building = 10}
				### STANDARD INITALISATION BEFORE TRIGGERS
				if = {
					limit = {
						OR = {
							has_state_category = wasteland
							has_state_category = enclave
						}
					}
					add_to_temp_variable = {chance_for_primitive_industry_building = -10}
					add_to_temp_variable = {chance_for_primitive_office_building = -10}
					add_to_temp_variable = {chance_for_primitive_farm_building = -10}
					add_to_temp_variable = {chance_for_primitive_resource_extraction_building = 20}
				}
				if = {
					limit = {
						OR = {
							has_state_category = rural
							has_state_category = pastoral
						}
					}
					add_to_temp_variable = {chance_for_primitive_industry_building = -10}
					add_to_temp_variable = {chance_for_primitive_office_building = 5}
					add_to_temp_variable = {chance_for_primitive_farm_building = 15}
					add_to_temp_variable = {chance_for_primitive_resource_extraction_building = 10}
				}
				if = {
					limit = {
						or = {
							has_state_category = town
							has_state_category = large_town
							has_state_category = city
						}
					}
					add_to_temp_variable = {chance_for_primitive_industry_building = 10}
					add_to_temp_variable = {chance_for_primitive_office_building = 15}
					add_to_temp_variable = {chance_for_primitive_farm_building = 5}
					add_to_temp_variable = {chance_for_primitive_resource_extraction_building = -10}
				}
				if = {
					limit = {
						or = {
							has_state_category = megalopolis
							has_state_category = metropolis
							has_state_category = large_city
						}
					}
					add_to_temp_variable = {chance_for_primitive_industry_building = 20}
					add_to_temp_variable = {chance_for_primitive_office_building = 10}
					add_to_temp_variable = {chance_for_primitive_farm_building = -10}
					add_to_temp_variable = {chance_for_primitive_resource_extraction_building = -10}
				}
				if = { ## Simple Neverfire being lazy and getting the computer to auto create primitive buildings
					limit = {
						NOT = {
							has_variable = building_1
						}
					}
					random_list = {
						chance_for_primitive_industry_building = {
							set_variable = {building_1 = token:primitive_industry}
							primitive_industry_add_effect = yes
						}
						chance_for_primitive_office_building = {
							set_variable = {building_1 = token:primitive_offices}
							primitive_offices_add_effect = yes
						}
						chance_for_primitive_farm_building = {
							set_variable = {building_1 = token:primitive_farm}
							primitive_farm_add_effect = yes
						}
						chance_for_primitive_resource_extraction_building = {
							set_variable = {building_1 = token:primitive_resource_extraction}
							primitive_resource_extraction_add_effect = yes
						}
						45 = {
							## No effect
						}
					}
				}
				if = {
					limit = {
						NOT = {
							has_variable = building_2
						}
					}
					random_list = {
						chance_for_primitive_industry_building = {
							set_variable = {building_2 = token:primitive_industry}
							primitive_industry_add_effect = yes
						}
						chance_for_primitive_office_building = {
							set_variable = {building_2 = token:primitive_offices}
							primitive_offices_add_effect = yes
						}
						chance_for_primitive_farm_building = {
							set_variable = {building_2 = token:primitive_farm}
							primitive_farm_add_effect = yes
						}
						chance_for_primitive_resource_extraction_building = {
							set_variable = {building_2 = token:primitive_resource_extraction}
							primitive_resource_extraction_add_effect = yes
						}
						45 = {
							## No effect
						}
					}
				}
				if = {
					limit = {
						has_variable = building_1 ## IMPLANTS IDEAS FOR COUNTRIES WITH PREEXISTING IDEAS
					}
					set_temp_variable = {passer_upper = building_1 }
					controller = {
						add_ideas = var:passer_upper
					}
				}
				if = {
					limit = {
						has_variable = building_2 ## IMPLANTS IDEAS FOR COUNTRIES WITH PREEXISTING IDEAS
					}
					set_temp_variable = {passer_upper = building_2 }
					controller = {
						add_ideas = var:passer_upper
					}
				}
				if = {
					limit = {
						has_variable = unique_building_on_state
					}
					meta_effect = {
						text = {
							set_variable = {unique_building_1_localisation_holder = token:[BUILDING_NAME]_first_tt_localisation_holder}
							set_variable = {unique_building_2_localisation_holder = token:[BUILDING_NAME]_2}
							set_variable = {unique_building_3_localisation_holder = token:[BUILDING_NAME]_3}
						}
						BUILDING_NAME = "[?unique_building_on_state.GetTokenKey]"
					}
				}
			}
	### END
		}
	}
	on_weekly = {
		effect = {
			add_ideas = no_building_to_allow_bigger_ships
			refresh_building_time_and_cost_modifiers = yes
		}
	}
	on_daily_VON = {
		effect = {
			## BUILDING CONSTRUCTION CONTROLLER, 4 arrays, building 1,state location and time left ,and building 2. 
			## It works by tracking building progress linked to its state location and every day reducing by 1. At -1 building will have its effect granted and idea given
			for_each_loop = {
				array = global.building_state_constructer_1
				value = v
				index = current_array_index
				set_temp_variable = {state_id_finder = global.building_state_constructer_1^current_array_index}
				var:state_id_finder = {
					subtract_from_variable = { time_left_building_1 = 1 }
				}
				if = {
					limit = {
						var:state_id_finder = {
							check_variable = { time_left_building_1 = -1 }
						}
					}
					## create building effect
					var:state_id_finder = {
						set_temp_variable = {idea_token_passer = building_1}
						controller = {
							add_ideas = var:idea_token_passer
						}
						meta_effect = {
							text = {
								[BUILDING_NAME]_add_effect = yes
							}
							BUILDING_NAME = "[?building_1.GetTokenKey]"
						}
						clear_variable = time_left_building_1
					}
					##
					add_to_temp_array = {indexs_to_remove_1 = current_array_index}
					
				}
			}
			for_each_loop = {
				array = global.building_state_constructer_2
				value = v
				index = current_array_index
				set_temp_variable = {state_id_finder = global.building_state_constructer_2^current_array_index}
				var:state_id_finder = {
					subtract_from_variable = { time_left_building_2 = 1 }
				}
				if = {
					limit = {
						var:state_id_finder = {
							check_variable = { time_left_building_2 = -1 }
						}
					}
					## create building effect
					var:state_id_finder = {
						set_temp_variable = {idea_token_passer = building_2}
						controller = {
							add_ideas = var:idea_token_passer
						}
						meta_effect = {
							text = {
								[BUILDING_NAME]_add_effect = yes
							}
							BUILDING_NAME = "[?building_2.GetTokenKey]"
						}
						clear_variable = time_left_building_2
					}
					##
					add_to_temp_array = {indexs_to_remove_2 = current_array_index}
					
				}
			}
			## Finally get rid of all indexs that needed to be removed
			for_each_loop = {
				array = indexs_to_remove_1
				value = index_location
				remove_from_array = {
					array = global.building_state_constructer_1
					index = index_location
				}
			}
			for_each_loop = {
				array = indexs_to_remove_2
				value = index_location
				remove_from_array = {
					array = global.building_state_constructer_2
					index = index_location
				}
			}
		}
	}
	on_state_control_changed = {
		effect = {
	#### BUILDING 1 CONTROLLER
			## Controls state change ownership when buildings are involved, i.e. taking buildings benfits from the losing side and transferring them to the victor
			FROM.FROM = {
				if = {
					limit = {
						has_variable = building_1
					}
					set_variable = {building_name_passer = building_1}
				}
			}
			## Below grabs the building and enacts its removal effect on the country that lost the building
			if = {
				limit = {
					has_variable = building_name_passer
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_1}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_2}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_3}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				## ADD AND REMOVE IDEAS
				FROM = {
					if = {
						limit = { ## FIND IF ANY STATE ALREADY HAS BUILDING AS NOT TO REMOVE IDEA FROM BUILDINGS THAT ARE THERE
							NOT ={
								any_controlled_state = {
									has_variable = building_name_passer
								}
							}
						}
						remove_ideas = var:building_name_passer
					}
				}
				ROOT = {
					add_ideas = var:building_name_passer
				}
			}
			clear_variable = building_name_passer
	#### BUILDING 2 CONTROLLER
			FROM.FROM = {
				if = {
					limit = {
						has_variable = building_2
					}
					set_variable = {building_name_passer = building_2}
				}
			}
			## Below grabs the building and enacts its removal effect on the country that lost the building and add effect on country that gained it
			if = {
				limit = {
					has_variable = building_name_passer
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_1}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_2}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				if = {
					limit = {
						check_variable = {building_name_passer = var:corporate_office_3}
					}
					FROM = {
						corporate_office_1_remove_effect = yes
					}
					ROOT = {
						corporate_office_1_add_effect = yes
					}
				}
				FROM = {
					if = {
						limit = { ## FIND IF ANY STATE ALREADY HAS BUILDING AS NOT TO REMOVE IDEA FROM BUILDINGS THAT ARE THERE
							NOT ={
								any_controlled_state = {
									has_variable = building_name_passer
								}
							}
						}
						remove_ideas = var:building_name_passer
					}
				}
				ROOT = {
						add_ideas = var:building_name_passer
				}
			}
	### END OF BUILDING CONTROLLER
	### No idea what this is below - Neverfire
			if = {
				limit = {
					FROM.FROM = {
						has_state_flag = academy_built
					}
				}
				ROOT = {
					add_to_variable = { academy = 1 }
					if = {
						limit = {
							NOT = {
								OR = {
									has_idea = academy_lvl_1
									has_idea = academy_lvl_2
									has_idea = academy_lvl_3
								}
							}
						}
						add_ideas = academy_lvl_1
					}
				}
				FROM = {
					subtract_from_variable = { academy = 1 }
					if = {
						limit = {
							check_variable = { academy < 1 }
						}
						remove_ideas = academy_lvl_1
						remove_ideas = academy_lvl_2
						remove_ideas = academy_lvl_3
					}
				}
			}
					else_if = {
			limit = {
				FROM.FROM = {
					has_state_flag = lab_built
				}
			}
			ROOT = {
				add_to_variable = { lab = 1 }
				if = {
					limit = {
						NOT = {
							OR = {
								has_idea = lab_lvl_1
								has_idea = lab_lvl_2
								has_idea = lab_lvl_3
							}
						}
					}
					add_ideas = lab_lvl_1
				}
			}
			FROM = {
				subtract_from_variable = { lab = 1 }
				if = {
					limit = {
						check_variable = { lab < 1 }
					}
					remove_ideas = lab_lvl_1
					remove_ideas = lab_lvl_2
					remove_ideas = lab_lvl_3
				}
			}
		}
		else_if = {
			limit = {
				FROM.FROM = {
					has_state_flag = shipyard_built
				}
			}
			ROOT = {
				add_to_variable = { shipyard = 1 }
				if = {
					limit = {
						NOT = {
							OR = {
								has_idea = shipyard_lvl_1
								has_idea = shipyard_lvl_2
								has_idea = shipyard_lvl_3
							}
						}
					}
					add_ideas = shipyard_lvl_1
				}
			}
			FROM = {
				subtract_from_variable = { shipyard = 1 }
				if = {
					limit = {
						check_variable = { shipyard < 1 }
					}
					remove_ideas = shipyard_lvl_1
					remove_ideas = shipyard_lvl_2
					remove_ideas = shipyard_lvl_3
				}
			}
		}
		else_if = {
			limit = {
				FROM.FROM = {
					has_state_flag = intelligence_built_lvl_1
				}
			}
			ROOT = {
				add_to_variable = { intelligence = 1 }
				if = {
					limit = {
						NOT = {
							OR = {
								has_idea = intelligence_lvl_1
								has_idea = intelligence_lvl_2
								has_idea = intelligence_lvl_3
							}
						}
					}
					add_ideas = intelligence_lvl_1
				}
			}
			FROM = {
				subtract_from_variable = { intelligence = 1 }
				if = {
					limit = {
						check_variable = { intelligence < 1 }
					}
					remove_ideas = intelligence_lvl_1
					remove_ideas = intelligence_lvl_2
					remove_ideas = intelligence_lvl_3
					}
				}
			}
		}
	}
}